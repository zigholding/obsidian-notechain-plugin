/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/utils.ts
var utils_exports = {};
__export(utils_exports, {
  array_prefix_id: () => array_prefix_id,
  check_value: () => check_value,
  concat_array: () => concat_array,
  get_plugins: () => get_plugins,
  get_tp_func: () => get_tp_func,
  sleep: () => sleep
});
function get_plugins(app2, name) {
}
function array_prefix_id(items, offset = 1) {
  let res = new Array();
  for (let i = 0; i < items.length; i++) {
    res.push(`${i + offset} ${items[i]}`);
  }
  return res;
}
function concat_array(items) {
  if (items == null) {
    return [];
  }
  if (typeof items === "string") {
    return [items];
  }
  if (!(items instanceof Array)) {
    return [items];
  }
  let res = [];
  for (let item of items) {
    if (typeof item === "string") {
      res.push(item);
    } else if (item instanceof Array) {
      res = res.concat(this.concat_array(item));
    } else {
      res.push(item);
    }
  }
  return res;
}
function sleep(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}
async function check_value(t, k, v, dt, T) {
  let i = 0;
  while (t[k] == null || !(t[k] === v)) {
    await sleep(dt);
    i = dt + dt;
    if (i > T) {
      break;
    }
  }
  if (t[k] && t[k] === v) {
    return true;
  } else {
    return false;
  }
}
function get_tp_func(app2, target) {
  let templater = app2.plugins.getPlugin(
    "templater-obsidian"
  );
  let items = target.split(".");
  if (items[0].localeCompare("tp") != 0 || items.length != 3) {
    return void 0;
  }
  let modules = templater.templater.functions_generator.internal_functions.modules_array.filter(
    (item) => item.name.localeCompare(items[1]) == 0
  );
  if (modules.length == 0) {
    return void 0;
  }
  return modules[0].static_functions.get(items[2]);
}
var init_utils = __esm({
  "src/utils.ts"() {
  }
});

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => NoteChainPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/NCEditor.ts
var NCEditor = class {
  constructor(app2) {
    this.app = app2;
  }
  async set_frontmatter(tfile, key, value) {
    let prev = this.get_frontmatter(tfile, key);
    if (prev === value) {
      return;
    }
    await this.app.fileManager.processFrontMatter(tfile, (fm) => {
      console.log(`${tfile.basename}---${key}---${value}`);
      fm[key] = value;
    });
  }
  get_frontmatter(tfile, key) {
    try {
      if (!tfile) {
        return null;
      }
      let meta = this.app.metadataCache.getFileCache(tfile);
      if (meta == null ? void 0 : meta.frontmatter) {
        return meta.frontmatter[key];
      }
    } catch (error) {
      console.log("get_frontmatter");
      console.log(tfile);
      console.log(error);
      return null;
    }
  }
  regexp_link(tfile, mode) {
    if (mode === "link") {
      return new RegExp(`\\[\\[${tfile.basename}\\|?.*\\]\\]`, "g");
    }
    if (mode === "para") {
      return new RegExp(`.*\\[\\[${tfile.basename}\\|?.*\\]\\].*`, "g");
    }
  }
  async replace(tfile, regex, target) {
    if (typeof regex === "string") {
      await this.app.vault.process(tfile, (data) => {
        if (data.indexOf(regex) > -1) {
          console.log("Replace: ", tfile.path);
          return data.replace(regex, target);
        }
        return data;
      });
    } else if (regex instanceof RegExp) {
      await this.app.vault.process(tfile, (data) => {
        if (data.match(regex)) {
          console.log("Replace: ", tfile.path);
          return data.replace(regex, target);
        }
        return data;
      });
    }
  }
};

// src/NoteChain.ts
var import_obsidian = require("obsidian");
init_utils();
var NoteChain = class {
  constructor(plugin, editor, prev = "PrevNote", next = "NextNote") {
    this.plugin = plugin;
    this.app = plugin.app;
    this.editor = new NCEditor(this.app);
    this.prev = prev;
    this.next = next;
    this.init_children();
  }
  init_children() {
    this.children = {};
    for (let f of this.get_all_folders()) {
      this.children[f.path] = this.sort_tfiles_by_chain(f.children);
    }
  }
  get tp_find_tfile() {
    return get_tp_func(this.app, "tp.file.find_tfile");
  }
  get tp_suggester() {
    return get_tp_func(this.app, "tp.system.suggester");
  }
  get tp_prompt() {
    return get_tp_func(this.app, "tp.system.prompt");
  }
  get_all_folders(sort_mode = "") {
    return this.app.vault.getAllFolders();
  }
  get_all_tfiles(sort_mode = "") {
    let files = this.app.vault.getMarkdownFiles();
    if (!(sort_mode === "")) {
      this.sort_tfiles(files, sort_mode = sort_mode);
    }
    return files;
  }
  sort_folders_by_mtime(folders, reverse = true) {
    function ufunc(f) {
      return Math.max(
        ...f.children.filter((f2) => f2.basename).map((f2) => f2.stat.mtime)
      );
    }
    let res = folders.sort((a, b) => ufunc(a) - ufunc(b));
    if (reverse) {
      res = res.reverse();
    }
    return res;
  }
  async cmd_move_file_to_another_folder(tfile = this.current_note) {
    if (tfile == null) {
      return;
    }
    let folders = this.get_all_folders();
    folders = this.sort_folders_by_mtime(
      folders
    ).filter((f) => f != tfile.parent);
    if (tfile.extension === "md") {
      folders = folders.filter((f) => this.filter_user_ignore(f));
    }
    try {
      let folder = await this.tp_suggester((f) => f.path, folders);
      let dst = folder.path + "/" + tfile.basename + "." + tfile.extension;
      await this.app.fileManager.renameFile(tfile, dst);
    } catch (error) {
    }
  }
  filter_user_ignore(note) {
    if (!(this.app.vault.config.attachmentFolderPath === "./")) {
      if (note.path.startsWith(
        this.app.vault.config.attachmentFolderPath
      )) {
        return false;
      }
    }
    if (this.app.vault.userIgnoreFilters) {
      for (let x of this.app.vault.userIgnoreFilters) {
        if (note.path.startsWith(x)) {
          return false;
        }
      }
    }
    return true;
  }
  async sugguster_note() {
    let notes = this.sort_tfiles(
      this.app.vault.getFiles(),
      ["mtime", "x"]
    ).filter((f) => this.filter_user_ignore(f));
    try {
      let note = await this.tp_suggester((f) => f.path, notes);
      return note;
    } catch (error) {
      return null;
    }
  }
  open_note(tfile, new_tab = false, revealFolder = true) {
    if (tfile) {
      if (this.app.workspace.activeLeaf.pinned || new_tab) {
        this.app.workspace.getLeaf(true).openFile(tfile);
      } else {
        this.app.workspace.activeLeaf.openFile(tfile);
      }
      if (revealFolder) {
        this.plugin.explorer.file_explorer.revealInFolder(tfile);
      }
    }
  }
  async sugguster_open_note() {
    try {
      let note = await this.sugguster_note();
      this.open_note(note);
    } catch (error) {
    }
  }
  get_tfile(path) {
    let name = path.split("|")[0].replace("[[", "").replace("]]", "");
    return this.tp_find_tfile(name);
  }
  get current_note() {
    return this.app.workspace.getActiveFile();
  }
  get_inlinks(tfile = this.current_note) {
    if (tfile == null) {
      return [];
    }
    let res = new Array();
    let dv_api = this.app.plugins.getPlugin("dataview");
    let inlinks = dv_api.index.links.invMap.get(tfile.path);
    if (inlinks == void 0) {
      return [];
    } else {
      return Array.from(inlinks).map(
        (path) => this.app.vault.fileMap[path]
      ).filter(
        (item) => item
      );
    }
  }
  get_outlinks(tfile = this.current_note) {
    if (tfile == null) {
      return [];
    }
    let dv_api = this.app.plugins.getPlugin("dataview");
    let inlinks = dv_api.index.links.map.get(tfile.path);
    if (inlinks == void 0) {
      return [];
    } else {
      return Array.from(inlinks).map(
        (path) => this.app.vault.fileMap[path]
      ).filter(
        (item) => item
      );
    }
  }
  get_links(tfile = this.current_note) {
    let inlinks = this.get_inlinks(tfile);
    let outlinks = this.get_outlinks(tfile);
    for (let link of inlinks) {
      if (!outlinks.includes(link)) {
        outlinks.push(link);
      }
    }
    return outlinks;
  }
  get_brothers(tfile = this.current_note) {
    if (tfile && tfile.parent) {
      return this.get_tfiles_of_folder(tfile.parent, false);
    } else {
      return [];
    }
  }
  get_uncles(tfile) {
    if (tfile && tfile.parent && tfile.parent.parent) {
      let folder = tfile.parent.parent;
      return folder.children.filter(
        (x) => x instanceof import_obsidian.TFile
      );
    }
    return [];
  }
  get_tfiles_of_folder(tfolder, with_children = false) {
    if (tfolder == null) {
      return [];
    }
    let notes = [];
    for (let c of tfolder.children) {
      if (c instanceof import_obsidian.TFile && c.extension === "md") {
        notes.push(c);
      } else if (c instanceof import_obsidian.TFolder && with_children) {
        let tmp = this.get_tfiles_of_folder(c);
        for (let x of tmp) {
          notes.push(x);
        }
      }
    }
    return notes;
  }
  indexOfFolder(tfile, tfiles) {
    let fnote = this.tp_find_tfile(tfile.name + ".md");
    if (!fnote) {
      return -1;
    }
    let msg = this.plugin.editor.get_frontmatter(
      fnote,
      "FolderPrevNote"
    );
    if (!msg) {
      return -1;
    }
    let items = msg.split("]]+");
    let anchor = this.get_tfile(items[0].slice(2));
    if (!anchor) {
      return -1;
    }
    let idx = tfiles.indexOf(anchor);
    if (items.length == 2) {
      idx = idx + parseFloat(items[1]);
    }
    return idx;
  }
  tfile_to_string(tfile) {
    let curr = this.current_note;
    let msg = "";
    if (tfile.parent == (curr == null ? void 0 : curr.parent)) {
      msg = tfile.basename;
    } else {
      msg = tfile.path;
    }
    if (tfile == this.current_note) {
      return `\u{1F3E0} ${msg}`;
    } else {
      return msg;
    }
  }
  async suggester_notes(tfile = this.current_note, curr_first = true, smode = "") {
    if (tfile) {
      tfile == this.current_note;
    }
    let kv = [
      "\u540C\u7EA7\u7B14\u8BB0",
      "\u7B14\u8BB0\u94FE\u6761",
      "\u4E0A\u7EA7\u7B14\u8BB0",
      "\u540C\u7EA7\u7B14\u8BB0+\u5B50\u76EE\u5F55",
      "\u51FA\u94FE+\u5165\u94FE",
      "\u5165\u94FE",
      "\u51FA\u94FE",
      "\u6240\u6709\u7B14\u8BB0",
      "recent-files-obsidian"
    ];
    if (curr_first) {
      kv.unshift("\u5F53\u524D\u7B14\u8BB0");
    } else {
      kv.push("\u5F53\u524D\u7B14\u8BB0");
    }
    let kvs = [];
    let i = 1;
    for (let x of kv) {
      kvs.push(`${i++} ${x}`);
    }
    let mode = "";
    if (kv.contains(smode)) {
      mode = smode;
    } else {
      mode = await this.tp_suggester(kvs, kv);
    }
    if (mode === "\u5F53\u524D\u7B14\u8BB0") {
      return [tfile];
    } else if (mode === "\u540C\u7EA7\u7B14\u8BB0") {
      return this.get_brothers(tfile);
    } else if (mode === "\u540C\u7EA7\u7B14\u8BB0+\u5B50\u76EE\u5F55") {
      if (tfile == null ? void 0 : tfile.parent) {
        return this.get_tfiles_of_folder(tfile.parent, true);
      }
    } else if (mode === "\u51FA\u94FE+\u5165\u94FE") {
      return this.get_links(tfile);
    } else if (mode === "\u5165\u94FE") {
      return this.get_inlinks(tfile);
    } else if (mode === "\u51FA\u94FE") {
      return this.get_outlinks(tfile);
    } else if (mode === "\u6240\u6709\u7B14\u8BB0") {
      return this.get_all_tfiles();
    } else if (mode === "recent-files-obsidian") {
      let r = this.app.plugins.getPlugin("recent-files-obsidian");
      if (!r) {
        return [];
      }
      return Object.values(
        r.data.recentFiles
      ).map(
        (f) => this.app.vault.fileMap[f.path]
      ).filter((f) => f);
    } else if (mode === "\u4E0A\u7EA7\u7B14\u8BB0") {
      if (tfile) {
        return this.get_uncles(tfile);
      }
    } else if (mode === "\u7B14\u8BB0\u94FE\u6761") {
      return this.get_chain(
        tfile,
        Number(this.plugin.settings.PrevChain),
        Number(this.plugin.settings.NextChain)
      );
    } else {
      return [];
    }
  }
  // Chain
  get_prev_note(tfile = this.current_note) {
    if (!tfile) {
      return;
    }
    if (tfile.deleted) {
      let tfiles = this.app.vault.getMarkdownFiles();
      tfiles.filter((f) => `[[${tfile.basename}]]` === this.plugin.editor.get_frontmatter(f, "NextNote"));
      tfiles = tfiles.filter((f) => `[[${tfile.basename}]]` === this.editor.get_frontmatter(f, this.next));
      if (tfiles.length > 0) {
        return tfiles[0];
      } else {
        return null;
      }
    } else {
      let name = this.editor.get_frontmatter(tfile, this.prev);
      if (!name) {
        return null;
      }
      let note = this.get_tfile(name);
      return note ? note : null;
    }
  }
  open_prev_notes(tfile = this.current_note) {
    let note = this.get_prev_note(tfile);
    this.open_note(note);
  }
  get_next_note(tfile = this.current_note) {
    if (!tfile) {
      return null;
    }
    if (tfile.deleted) {
      let tfiles = this.app.vault.getMarkdownFiles();
      tfiles = tfiles.filter((f) => `[[${tfile.basename}]]` === this.editor.get_frontmatter(f, this.prev));
      if (tfiles.length > 0) {
        return tfiles[0];
      } else {
        return null;
      }
    } else {
      let name = this.editor.get_frontmatter(tfile, this.next);
      if (!name) {
        return null;
      }
      let note = this.get_tfile(name);
      return note ? note : null;
    }
  }
  open_next_notes(tfile = this.current_note) {
    let note = this.get_next_note(tfile);
    this.open_note(note);
  }
  get_chain(tfile = this.current_note, prev = 10, next = 10, with_self = true) {
    if (tfile == null) {
      return [];
    }
    let res = new Array();
    if (with_self) {
      res.push(tfile);
    }
    let tmp = tfile;
    for (let i = prev; i != 0; i--) {
      let note = this.get_prev_note(tmp);
      if (!note) {
        break;
      } else if (res.includes(note)) {
        this.editor.set_frontmatter(note, this.next, "");
        this.editor.set_frontmatter(tmp, this.prev, "");
        break;
      } else {
        res.unshift(note);
        tmp = note;
      }
    }
    tmp = tfile;
    for (let i = next; i != 0; i--) {
      let note = this.get_next_note(tmp);
      if (!note) {
        break;
      } else if (res.includes(note)) {
        this.editor.set_frontmatter(note, this.prev, "");
        this.editor.set_frontmatter(tmp, this.next, "");
        break;
      } else {
        res.push(note);
        tmp = note;
      }
    }
    return res;
  }
  get_first_note(tfile = this.current_note) {
    let notes = this.get_chain(tfile, -1, 0, false);
    if (notes.length > 0) {
      return notes[0];
    } else {
      return null;
    }
  }
  get_last_note(tfile = this.current_note) {
    let notes = this.get_chain(tfile, 0, -1, false);
    if (notes.length > 0) {
      return notes[notes.length - 1];
    } else {
      return null;
    }
  }
  get_neighbors(tfile = this.current_note) {
    return [
      this.get_prev_note(tfile),
      this.get_next_note(tfile)
    ];
  }
  async chain_set_prev(tfile, prev) {
    if (tfile == null || tfile == prev) {
      return;
    }
    this.plugin.console_log("chain_set_prev:", tfile.basename, prev == null ? void 0 : prev.basename);
    if (prev == null) {
      await this.editor.set_frontmatter(
        tfile,
        this.prev,
        ""
      );
    } else {
      await this.editor.set_frontmatter(
        tfile,
        this.prev,
        `[[${prev.basename}]]`
      );
    }
  }
  async chain_set_next(tfile, next) {
    if (tfile == null || tfile == next) {
      return;
    }
    this.plugin.console_log("chain_set_next:", tfile.basename, next == null ? void 0 : next.basename);
    if (next == null) {
      await this.editor.set_frontmatter(
        tfile,
        this.next,
        ""
      );
    } else {
      await this.editor.set_frontmatter(
        tfile,
        this.next,
        `[[${next.basename}]]`
      );
    }
  }
  async chain_set_prev_next(prev, next) {
    await this.chain_set_prev(next, prev);
    await this.chain_set_next(prev, next);
  }
  async chain_concat_tfiles(tfiles) {
    let prev = this.get_prev_note(tfiles[0]);
    if (tfiles.contains(prev)) {
      await this.chain_set_prev(tfiles[0], null);
    }
    let next = this.get_next_note(tfiles[tfiles.length - 1]);
    if (tfiles.contains(next)) {
      await this.chain_set_next(tfiles[tfiles.length - 1], null);
    }
    for (let i = 0; i < tfiles.length - 1; i++) {
      await this.chain_set_prev_next(tfiles[i], tfiles[i + 1]);
    }
  }
  async chain_pop_node(tfile) {
    let notes = this.get_neighbors(tfile);
    await this.chain_set_prev_next(notes[0], notes[1]);
  }
  async chain_insert_node_as_head(tfile, anchor) {
    let head = this.get_first_note(anchor);
    await this.chain_set_prev_next(tfile, head);
  }
  async chain_insert_node_as_tail(tfile, anchor) {
    let tail = this.get_last_note(anchor);
    await this.chain_set_prev_next(tail, tfile);
  }
  async chain_insert_node_after(tfile, anchor) {
    let t = this;
    console.log(this);
    t.plugin.console_log(t);
    await t.chain_pop_node(tfile);
    let next = this.get_next_note(anchor);
    await this.chain_concat_tfiles([anchor, tfile, next]);
  }
  async chain_insert_node_before(tfile, anchor) {
    await this.chain_pop_node(tfile);
    let prev = this.get_prev_note(anchor);
    await this.chain_concat_tfiles([prev, tfile, anchor]);
  }
  async chain_insert_folder_after(tfile, anchor) {
    if (!tfile.parent || tfile.parent.parent != anchor.parent) {
      return;
    }
    let note = this.get_tfile(tfile.parent.name);
    if (!note) {
      console.log("\u9700\u8981\u8981\u5148\u521B\u5EFA\u540C\u540D\u7B14\u8BB0");
      return;
    }
    await this.plugin.editor.set_frontmatter(
      note,
      "FolderPrevNote",
      `[[${anchor.basename}]]+0.5`
    );
  }
  async chain_suggester_tfiles(tfile = this.current_note, mode = "suggester") {
    let notes = this.get_brothers(tfile);
    if (notes.length == 0) {
      return;
    }
    let files = await this.suggester_sort(notes);
    await this.chain_concat_tfiles(files);
  }
  sort_tfiles(files, field) {
    if (typeof field === "string") {
      if (field === "name") {
        return files.sort(
          (a, b) => a.name.localeCompare(b.name)
        );
      } else if (field === "mtime") {
        return files.sort(
          (a, b) => a.stat.mtime - b.stat.mtime
        );
      } else if (field === "ctime") {
        return files.sort(
          (a, b) => a.stat.ctime - b.stat.ctime
        );
      } else if (field === "chain") {
        return this.sort_tfiles_by_chain(files);
      }
      return files;
    } else if (typeof field === "object") {
      if (field instanceof Array) {
        let nfiles = this.sort_tfiles(files, field[0]);
        if (field.length >= 2) {
          if (field[1] === "x") {
            return nfiles.reverse();
          }
        }
        return nfiles;
      }
    }
    return files;
  }
  sort_tfiles_by_chain(tfiles) {
    let notes = tfiles.filter((f) => f instanceof import_obsidian.TFile);
    let res = [];
    while (notes.length > 0) {
      let note = notes[0];
      let xchain = this.get_chain(note, -1, -1);
      for (let x of xchain) {
        if (notes.contains(x)) {
          res.push(x);
          notes.remove(x);
        }
      }
    }
    let folders = tfiles.filter((f) => f instanceof import_obsidian.TFolder);
    if (folders.length > 0) {
      let indexOf = function(f) {
        if (f instanceof import_obsidian.TFile) {
          return res.indexOf(f);
        } else if (f instanceof import_obsidian.TFolder) {
          return idxs[folders.indexOf(f)];
        } else {
          return -1;
        }
      };
      let idxs = folders.map(
        (f) => this.indexOfFolder(f, res)
      );
      res.push(...folders);
      res = res.sort((a, b) => indexOf(a) - indexOf(b));
    }
    return res;
  }
  sort_tfiles_folder_first(tfiles) {
    let A = tfiles.filter((f) => f instanceof import_obsidian.TFolder).sort((a, b) => a.name.localeCompare(b.name));
    let B = tfiles.filter((f) => f instanceof import_obsidian.TFile);
    return this.plugin.utils.concat_array([A, B]);
  }
  sort_tfiles_by_field(tfiles, field) {
    let res = tfiles.sort(
      (a, b) => {
        let av = this.editor.get_frontmatter(a, field);
        let bv = this.editor.get_frontmatter(b, field);
        return av - bv;
      }
    );
    return res;
  }
  async suggester_sort(tfiles) {
    if (!tfiles) {
      return [];
    }
    if (tfiles.length == 0) {
      return [];
    }
    ;
    let kv = {
      "chain": "chain",
      "name": "name",
      "ctime": "ctime",
      "mtime": "mtime",
      "name \u5012\u5E8F": ["name", "x"],
      "ctime \u5012\u5E8F": ["ctime", "x"],
      "mtime \u5012\u5E8F": ["mtime", "x"]
    };
    let field = await this.tp_suggester(
      Object.keys(kv),
      Object.values(kv)
    );
    if (field == null) {
      return [];
    }
    if (field == "chain") {
      tfiles = this.sort_tfiles(tfiles, "name");
    }
    return this.sort_tfiles(tfiles, field);
  }
  view_sort_by_chain() {
    var _a;
    let view = (_a = this.app.workspace.getLeavesOfType(
      "file-explorer"
    )[0]) == null ? void 0 : _a.view;
    if (!view) {
      return;
    }
    view.sort();
    if (view.ready) {
      for (let path in view.fileItems) {
        let item = view.fileItems[path];
        if (item.vChildren) {
          let files = item.vChildren._children.map((f) => f.file);
          files = this.sort_tfiles_by_chain(files);
          let children = item.vChildren._children.sort(
            (a, b) => files.indexOf(a.file) - files.indexOf(b.file)
          );
          item.vChildren.setChildren(children);
        }
      }
      view.tree.infinityScroll.compute();
    }
  }
};

// src/NCFileExplorer.ts
var import_obsidian2 = require("obsidian");
var chain_sort = function(org_sort) {
  let plugin = app.plugins.getPlugin("note-chain");
  return function(...d) {
    if (plugin) {
      if (plugin == null ? void 0 : plugin.settings.isSortFileExplorer) {
        var e = this.file, t = this.view, i = e.children.slice();
        i = i.filter((x) => x);
        if (i.length > 0) {
          let items = plugin.chain.children[i[0].parent.path];
          if (items) {
            let a2 = items.filter((x) => i.contains(x));
            let b = items.filter((x) => !i.contains(x));
            a2.push(...b);
            i = a2;
          }
        }
        if (plugin.settings.isFolderFirst) {
          i = plugin.chain.sort_tfiles_folder_first(i);
        }
        for (var r = [], o = 0, a = i; o < a.length; o++) {
          var s = a[o], l = t.fileItems[s.path];
          l && r.push(l);
        }
        this.vChildren.setChildren(r);
      } else {
        return org_sort.call(this, ...d);
      }
    } else {
      return org_sort.call(this, ...d);
    }
  };
};
var NCFileExplorer = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.chain = plugin.chain;
    this.app = plugin.app;
    this.register();
  }
  register() {
    this.app.workspace.onLayoutReady(() => {
      let folder = new import_obsidian2.TFolder(import_obsidian2.Vault, "");
      let dom = this.file_explorer.createFolderDom(folder).constructor;
      this._FolderDom_ = dom;
      this.org_sort = dom.prototype.sort;
      this.new_sort = chain_sort(this.org_sort);
      this._FolderDom_.prototype.sort = this.new_sort;
      this.sort();
    });
  }
  unregister() {
    if (this.org_sort) {
      console.log("Reset FileExplorer to origin sort function.");
      this._FolderDom_.prototype.sort = this.org_sort;
    }
  }
  get file_explorer() {
    var _a;
    let view = (_a = this.app.workspace.getLeavesOfType(
      "file-explorer"
    )[0]) == null ? void 0 : _a.view;
    return view;
  }
  async sort(nsleep = 0) {
    var _a;
    if ((_a = this.file_explorer) == null ? void 0 : _a.sort) {
      if (nsleep > 0) {
        await this.plugin.utils.sleep(nsleep);
      }
      this.plugin.chain.init_children();
      this.file_explorer.sort();
    }
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  PrevChain: "10",
  NextChain: "10",
  refreshDataView: true,
  refreshTasks: true,
  isSortFileExplorer: true,
  isFolderFirst: true
};
var longform2notechain = (plugin) => ({
  id: "longform2notechain",
  name: "Reset Note Chain by LongForm.",
  callback: () => {
    let curr = plugin.chain.current_note;
    if (curr == null) {
      return;
    }
    app.fileManager.processFrontMatter(
      curr,
      (fm) => {
        if (curr == null) {
          return;
        }
        if (fm["longform"] == null) {
          return;
        }
        let scenes = plugin.utils.concat_array(fm.longform.scenes);
        let ignoredFiles = plugin.utils.concat_array(fm.longform.ignoredFiles);
        ignoredFiles = ignoredFiles.filter((f) => !scenes.contains(f));
        let notes = plugin.utils.concat_array([scenes, ignoredFiles]);
        notes = notes.map((f) => plugin.chain.tp_find_tfile(f));
        if (curr.parent == null) {
          return;
        }
        ;
        let tfiles = plugin.chain.get_tfiles_of_folder(curr.parent).filter((f) => !notes.contains(f));
        notes = plugin.utils.concat_array([tfiles, notes]);
        plugin.chain.chain_concat_tfiles(notes);
      }
    );
  }
});
var longform4notechain = (plugin) => ({
  id: "longform4notechain",
  name: "Reset LongForm Secnes by Note Chain.",
  callback: () => {
    let curr = plugin.chain.current_note;
    if (curr == null) {
      return;
    }
    app.fileManager.processFrontMatter(
      curr,
      (fm) => {
        if (curr == null) {
          return;
        }
        if (curr.parent == null) {
          return;
        }
        ;
        if (fm["longform"] == null) {
          return;
        }
        let notes = plugin.chain.get_tfiles_of_folder(curr.parent);
        notes = plugin.chain.sort_tfiles_by_chain(notes);
        fm.longform.scenes = notes.map((f) => f.basename);
      }
    );
  }
});
var sort_file_explorer = (plugin) => ({
  id: "sort_file_explorer",
  name: "Sort File Explorer by Note Chain.",
  callback: async () => {
    await plugin.explorer.sort();
  }
});
var open_notes_smarter = (plugin) => ({
  id: "open_notes_smarter",
  name: "Open note smarter",
  callback: () => {
    plugin.open_note_smarter();
  }
});
var sugguster_open_note = (plugin) => ({
  id: "sugguster_open_note",
  name: "Open note",
  callback: () => {
    plugin.chain.sugguster_open_note();
  }
});
var open_prev_notes = (plugin) => ({
  id: "open_prev_notes",
  name: "Open prev note",
  callback: () => {
    plugin.chain.open_prev_notes();
  }
});
var open_next_notes = (plugin) => ({
  id: "open_next_notes",
  name: "Open next note",
  callback: () => {
    plugin.chain.open_next_notes();
  }
});
var clear_inlinks = (plugin) => ({
  id: "clear_inlinks",
  name: "Clear inlinks of current file",
  callback: () => {
    plugin.clear_inlinks();
  }
});
var move_file_to_another_folder = (plugin) => ({
  id: "move_file_to_another_folder",
  name: "Move current file to another folder",
  callback: () => {
    plugin.chain.cmd_move_file_to_another_folder();
  }
});
var replace_notes_with_regx = (plugin) => ({
  id: "replace_notes_with_regx",
  name: "Replace by regex",
  callback: () => {
    plugin.replace_notes_with_regx();
  }
});
var chain_insert_node = (plugin) => ({
  id: "chain_insert_node",
  name: "Insert node of chain",
  callback: async () => {
    await plugin.cmd_chain_insert_node();
    await plugin.explorer.sort(500);
  }
});
var chain_set_seq_note = (plugin) => ({
  id: "chain_set_seq_note",
  name: "Reset the chain of current folder!",
  callback: async () => {
    await plugin.chain.chain_suggester_tfiles();
    plugin.explorer.sort();
  }
});
var create_new_note = (plugin) => ({
  id: "create_new_note",
  name: "Create new note.",
  callback: async () => {
    let targets = {
      "\u6DFB\u52A0\u540E\u7F6E\u7B14\u8BB0": "chain_insert_node_after",
      "\u94FE\u5C3E\u6DFB\u52A0\u7B14\u8BB0": "chain_insert_node_as_tail",
      "\u6DFB\u52A0\u524D\u7F6E\u7B14\u8BB0": "chain_insert_node_before",
      "\u94FE\u5934\u6DFB\u52A0\u7B14\u8BB0": "chain_insert_node_as_head",
      "\u65E0\u94FE\u63A5": `null`
    };
    let target = await plugin.chain.tp_suggester(
      plugin.utils.array_prefix_id(Object.keys(targets)),
      Object.values(targets),
      true,
      "\u9009\u62E9\u7B14\u8BB0\u7C7B\u578B."
    );
    if (!target) {
      return;
    }
    let name = await plugin.chain.tp_prompt("\u8BF7\u8F93\u5165\u6587\u4EF6\u540D");
    if (name) {
      let curr = plugin.chain.current_note;
      if (curr && curr.parent) {
        let path = curr.parent.path + "/" + name + ".md";
        let dst = await plugin.chain.get_tfile(path);
        if (dst == null) {
          let func = plugin.utils.get_tp_func(plugin.app, "tp.file.create_new");
          dst = await func(
            "",
            name,
            false,
            curr.parent
          );
          await plugin.utils.sleep(300);
          if (!(target === "null")) {
            await plugin.chain[target](dst, curr);
          }
          await plugin.utils.sleep(300);
          await plugin.chain.open_note(dst);
          await plugin.explorer.sort();
        }
      }
    }
  }
});
var commandBuilders = [
  open_prev_notes,
  open_next_notes,
  open_notes_smarter,
  sugguster_open_note,
  longform2notechain,
  longform4notechain,
  sort_file_explorer,
  clear_inlinks,
  replace_notes_with_regx,
  move_file_to_another_folder,
  chain_insert_node,
  chain_set_seq_note,
  create_new_note
];
function addCommands(plugin) {
  commandBuilders.forEach((c) => {
    plugin.addCommand(c(plugin));
  });
}
var NoteChainPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    this.debug = true;
    await this.loadSettings();
    this.utils = (init_utils(), __toCommonJS(utils_exports));
    this.ob = require("obsidian");
    this.editor = new NCEditor(this.app);
    this.chain = new NoteChain(this, this.editor);
    this.explorer = new NCFileExplorer(this);
    addCommands(this);
    this.addSettingTab(new NCSettingTab(this.app, this));
    console.log("Zig-Holding:regeister ufunc_on_file_open");
    this.registerEvent(
      this.app.workspace.on("file-open", this.ufunc_on_file_open)
    );
    this.registerEvent(this.app.vault.on(
      "delete",
      async (file) => {
        if (this.debug) {
          console.log("delete...");
        }
        await this.chain.chain_pop_node(file);
        await this.explorer.sort();
      }
    ));
    this.registerEvent(this.app.vault.on(
      "create",
      async () => {
        if (this.debug) {
          console.log("create...");
        }
        await this.utils.sleep(500);
        this.explorer.sort();
      }
    ));
    this.registerEvent(this.app.vault.on(
      "rename",
      async (file, oldPath) => {
        if (this.debug) {
          console.log("rename...");
        }
        await this.utils.sleep(500);
        this.explorer.sort();
      }
    ));
  }
  onunload() {
    console.log("Zig-Holding:unregeister ufunc_on_file_open");
    this.app.workspace.off("file-open", this.ufunc_on_file_open);
    this.explorer.unregister();
    this.explorer.sort();
  }
  console_log(...d) {
    if (this.debug) {
      console.log(...d);
    }
  }
  async ufunc_on_file_open(file) {
    let zh = await app.plugins.getPlugin("note-chain");
    if (!zh) {
      return;
    }
    if (zh.settings.refreshDataView) {
      zh.app.commands.executeCommandById(
        "dataview:dataview-force-refresh-views"
      );
    }
    if (zh.settings.refreshTasks) {
      let target = await app.plugins.getPlugin("obsidian-tasks-plugin");
      target.cache.notifySubscribers();
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async clear_inlinks(tfile = this.chain.current_note, mode = "suggester") {
    if (tfile == null) {
      return;
    }
    let notes = this.chain.get_inlinks(tfile);
    if (notes.length) {
      if (mode === "suggester") {
        mode = await this.chain.tp_suggester(
          ["\u5220\u9664\u94FE\u63A5", "\u66FF\u6362\u94FE\u63A5", "\u5220\u9664\u6BB5\u843D"],
          [["link", "del"], ["link", "rep"], ["para", "del"]]
        );
      }
      let reg = this.editor.regexp_link(tfile, mode[0]);
      if (reg) {
        for (let note of notes) {
          let target;
          if (mode[1] === "rep") {
            target = tfile.basename;
          } else {
            target = "";
          }
          this.editor.replace(note, reg, target);
        }
      }
    }
  }
  async replace_notes_with_regx() {
    let notes = await this.chain.suggester_notes();
    if ((notes == null ? void 0 : notes.length) > 0) {
      try {
        let regs = await this.chain.tp_prompt("\u8981\u66FF\u6362\u7684\u6B63\u5219\u8868\u8FBE\u5F0F");
        if (regs == null) {
          return;
        }
        let reg = new RegExp(regs, "g");
        let target = await this.chain.tp_prompt("\u76EE\u6807\u5B57\u7B26\u4E32");
        if (target == null) {
          return;
        }
        target = target.trim().replace(
          /\\n/g,
          "\n"
        );
        console.log(regs, reg, target);
        for (let note of notes) {
          await this.editor.replace(note, reg, target);
        }
      } catch (error) {
        console.log(error);
      }
    }
  }
  async cmd_chain_insert_node() {
    let curr = this.chain.current_note;
    if (curr == null) {
      return;
    }
    let notes = await this.chain.suggester_notes(curr, false);
    if (!notes) {
      return;
    }
    notes = this.chain.sort_tfiles(notes, ["mtime", "x"]);
    notes = this.chain.sort_tfiles_by_chain(notes);
    if (notes.length == 0) {
      return;
    }
    const note = await this.chain.tp_suggester(
      (file) => this.tfile_to_string(file, [], ""),
      notes
    );
    if (!note) {
      return;
    }
    let sitems = [
      "insert_node_after",
      "insert_node_before",
      "insert_node_as_head",
      "insert_node_as_tail",
      "insert_folder_after"
    ];
    let mode = await this.chain.tp_suggester(
      sitems,
      sitems,
      false,
      "Select Node Insert Mode."
    );
    if (!mode) {
      return;
    }
    console.log(typeof mode, mode);
    if (mode === "insert_node_as_head") {
      await this.chain.chain_insert_node_as_head(curr, note);
    } else if (mode === "insert_node_as_tail") {
      await this.chain.chain_insert_node_as_tail(curr, note);
    } else if (mode === "insert_node_before") {
      await this.chain.chain_insert_node_before(curr, note);
    } else if (mode === "insert_node_after") {
      await this.chain.chain_insert_node_after(curr, note);
    } else if (mode === "insert_folder_after") {
      await this.chain.chain_insert_folder_after(curr, note);
    } else {
      return;
    }
  }
  tfile_to_string(tfile, fields, seq) {
    let items = new Array();
    if (tfile == this.chain.current_note) {
      items.push("\u{1F3E0}" + tfile.basename);
    } else {
      items.push(tfile.basename);
    }
    for (let field of fields) {
      try {
        items.push(this.editor.get_frontmatter(tfile, field));
      } catch (error) {
        items.push("-");
      }
    }
    return items.join(seq);
  }
  async open_note_smarter() {
    let curr = this.chain.current_note;
    let notes = await this.chain.suggester_notes(curr, false);
    notes = this.chain.sort_tfiles(notes, ["mtime", "x"]);
    notes = this.chain.sort_tfiles_by_chain(notes);
    if (notes.length > 0) {
      let note = await this.chain.tp_suggester(
        (file) => this.chain.tfile_to_string(file),
        notes
      );
      if (note) {
        await this.chain.open_note(note);
      }
    }
  }
};
var NCSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian3.Setting(containerEl).setName("Sort File Explorer").setDesc("Sort File Explorer by Chain").addToggle(
      (text) => text.setValue(this.plugin.settings.isSortFileExplorer).onChange(async (value) => {
        this.plugin.settings.isSortFileExplorer = value;
        await this.plugin.saveSettings();
        this.plugin.explorer.sort();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Sort Folder First").setDesc("Sort File Explorer Folder First").addToggle(
      (text) => text.setValue(this.plugin.settings.isFolderFirst).onChange(async (value) => {
        this.plugin.settings.isFolderFirst = value;
        await this.plugin.saveSettings();
        this.plugin.explorer.sort();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("PrevChain").setDesc("Number of Prev Notes to show?").addText((text) => text.setValue(this.plugin.settings.PrevChain).onChange(async (value) => {
      this.plugin.settings.PrevChain = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("NextChain").setDesc("Number of Next Notes to show?").addText((text) => text.setValue(this.plugin.settings.NextChain).onChange(async (value) => {
      this.plugin.settings.NextChain = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("refreshDataView").setDesc("Refresh Dataview while open new file?").addToggle(
      (text) => text.setValue(this.plugin.settings.refreshDataView).onChange(async (value) => {
        this.plugin.settings.refreshDataView = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("refreshTasks").setDesc("Refresh Tasks while open new file?").addToggle(
      (text) => text.setValue(this.plugin.settings.refreshTasks).onChange(async (value) => {
        this.plugin.settings.refreshTasks = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3V0aWxzLnRzIiwgIm1haW4udHMiLCAic3JjL05DRWRpdG9yLnRzIiwgInNyYy9Ob3RlQ2hhaW4udHMiLCAic3JjL05DRmlsZUV4cGxvcmVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBnZXQgfSBmcm9tICdodHRwJztcclxuaW1wb3J0IHsgXHJcblx0QXBwXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldF9wbHVnaW5zKGFwcDpBcHAsbmFtZTpzdHJpbmcpe1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5X3ByZWZpeF9pZChpdGVtczpBcnJheTxhbnk+LG9mZnNldD0xKXtcclxuICAgIGxldCByZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgIGZvcihsZXQgaT0wO2k8aXRlbXMubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgcmVzLnB1c2goYCR7aStvZmZzZXR9ICR7aXRlbXNbaV19YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29uY2F0X2FycmF5KGl0ZW1zOkFycmF5PGFueT4pe1xyXG4gICAgaWYoaXRlbXM9PW51bGwpe3JldHVybiBbXTt9XHJcbiAgICBpZih0eXBlb2YgaXRlbXMgPT09ICdzdHJpbmcnKXtyZXR1cm4gW2l0ZW1zXTt9XHJcbiAgICBpZighKGl0ZW1zIGluc3RhbmNlb2YgQXJyYXkpKXtyZXR1cm4gW2l0ZW1zXTt9XHJcblxyXG4gICAgbGV0IHJlcyA9IFtdIGFzIGFueSBbXTtcclxuICAgIGZvcihsZXQgaXRlbSBvZiBpdGVtcyl7XHJcbiAgICAgICAgaWYodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKXtcclxuICAgICAgICAgICAgcmVzLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfWVsc2UgaWYoaXRlbSBpbnN0YW5jZW9mIEFycmF5KXtcclxuICAgICAgICAgICAgcmVzID0gcmVzLmNvbmNhdCh0aGlzLmNvbmNhdF9hcnJheShpdGVtKSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJlcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbn0gIFxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNsZWVwKG1zOm51bWJlcnx1bmRlZmluZWQpe1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tfdmFsdWUodDphbnksazphbnksdjphbnksZHQ6bnVtYmVyLFQ6bnVtYmVyKXtcclxuICAgIGxldCBpID0gMDtcclxuICAgIHdoaWxlKHRba109PW51bGwgfHwgISh0W2tdPT09dikpe1xyXG4gICAgICAgIGF3YWl0IHNsZWVwKGR0KTtcclxuICAgICAgICBpID0gZHQrZHQ7XHJcbiAgICAgICAgaWYoaT5UKXticmVhazt9XHJcbiAgICB9XHJcbiAgICBpZih0W2tdICYmIHRba109PT12KXtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldF90cF9mdW5jKGFwcDpBcHAsdGFyZ2V0OnN0cmluZykge1xyXG5cdC8vIFx1ODNCN1x1NTNENiAgdGVtcGxhdGVyIFx1NTFGRFx1NjU3MFxyXG5cdC8vIGdldF90cF9mdW5jKFwidHAuc3lzdGVtLnByb21wdFwiKVxyXG5cclxuXHRsZXQgdGVtcGxhdGVyID0gKGFwcCBhcyBhbnkpLnBsdWdpbnMuZ2V0UGx1Z2luKFxyXG5cdFx0XCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIlxyXG5cdCk7XHJcblxyXG5cdGxldCBpdGVtcyA9IHRhcmdldC5zcGxpdChcIi5cIik7XHJcblx0aWYoaXRlbXNbMF0ubG9jYWxlQ29tcGFyZShcInRwXCIpIT0wIHx8IGl0ZW1zLmxlbmd0aCE9Myl7cmV0dXJuIHVuZGVmaW5lZDt9XHJcblx0XHJcblx0bGV0IG1vZHVsZXMgPSB0ZW1wbGF0ZXIudGVtcGxhdGVyLmZ1bmN0aW9uc19nZW5lcmF0b3IuXHJcblx0XHRpbnRlcm5hbF9mdW5jdGlvbnMubW9kdWxlc19hcnJheS5maWx0ZXIoXHJcblx0XHRcdChpdGVtOmFueSk9PihpdGVtLm5hbWUubG9jYWxlQ29tcGFyZShpdGVtc1sxXSk9PTApXHJcblx0XHQpO1xyXG5cclxuXHRpZihtb2R1bGVzLmxlbmd0aD09MCl7cmV0dXJuIHVuZGVmaW5lZH1cclxuXHRcclxuXHRyZXR1cm4gbW9kdWxlc1swXS5zdGF0aWNfZnVuY3Rpb25zLmdldChpdGVtc1syXSk7XHJcbn0iLCAiaW1wb3J0IHsgXHJcblx0QXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgXHJcblx0UGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLFxyXG5cdFRGaWxlLFRGb2xkZXJcclxufSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5cclxuaW1wb3J0IHtOQ0VkaXRvcn0gZnJvbSAnLi9zcmMvTkNFZGl0b3InO1xyXG5pbXBvcnQge05vdGVDaGFpbn0gZnJvbSAnLi9zcmMvTm90ZUNoYWluJztcclxuaW1wb3J0IHtOQ0ZpbGVFeHBsb3Jlcn0gZnJvbSAnLi9zcmMvTkNGaWxlRXhwbG9yZXInO1xyXG5pbXBvcnQge2dldF90cF9mdW5jfSBmcm9tICcuL3NyYy91dGlscydcclxuXHJcbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxyXG5cclxuaW50ZXJmYWNlIE5DU2V0dGluZ3Mge1xyXG5cdFByZXZDaGFpbjpzdHJpbmc7XHJcblx0TmV4dENoYWluOnN0cmluZztcclxuXHRyZWZyZXNoRGF0YVZpZXc6Ym9vbGVhbjtcclxuXHRyZWZyZXNoVGFza3M6Ym9vbGVhbixcclxuXHRpc1NvcnRGaWxlRXhwbG9yZXI6Ym9vbGVhbixcclxuXHRpc0ZvbGRlckZpcnN0OmJvb2xlYW4sXHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE5DU2V0dGluZ3MgPSB7XHJcblx0UHJldkNoYWluIDogXCIxMFwiLFxyXG5cdE5leHRDaGFpbiA6IFwiMTBcIixcclxuXHRyZWZyZXNoRGF0YVZpZXcgOiB0cnVlLFxyXG5cdHJlZnJlc2hUYXNrcyA6IHRydWUsXHJcblx0aXNTb3J0RmlsZUV4cGxvcmVyIDogdHJ1ZSxcclxuXHRpc0ZvbGRlckZpcnN0IDogdHJ1ZVxyXG59XHJcblxyXG5jb25zdCBsb25nZm9ybTJub3RlY2hhaW4gPSAocGx1Z2luOk5vdGVDaGFpblBsdWdpbikgPT4gKHtcclxuXHRpZDogXCJsb25nZm9ybTJub3RlY2hhaW5cIixcclxuICAgIG5hbWU6IFwiUmVzZXQgTm90ZSBDaGFpbiBieSBMb25nRm9ybS5cIixcclxuXHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0bGV0IGN1cnIgPSBwbHVnaW4uY2hhaW4uY3VycmVudF9ub3RlO1xyXG5cdFx0aWYoY3VyciA9PSBudWxsKXtyZXR1cm47fVxyXG5cdFx0YXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihcclxuXHRcdFx0Y3VycixcclxuXHRcdFx0Zm0gPT57XHJcblx0XHRcdFx0aWYoY3Vycj09bnVsbCl7cmV0dXJuO31cclxuXHRcdFx0XHRpZihmbVsnbG9uZ2Zvcm0nXT09bnVsbCl7cmV0dXJuO31cclxuXHRcdFx0XHRsZXQgc2NlbmVzID0gcGx1Z2luLnV0aWxzLmNvbmNhdF9hcnJheShmbS5sb25nZm9ybS5zY2VuZXMpO1xyXG5cdFx0XHRcdGxldCBpZ25vcmVkRmlsZXMgPSBwbHVnaW4udXRpbHMuY29uY2F0X2FycmF5KGZtLmxvbmdmb3JtLmlnbm9yZWRGaWxlcyk7XHJcblx0XHRcdFx0aWdub3JlZEZpbGVzID0gaWdub3JlZEZpbGVzLmZpbHRlcigoZjpzdHJpbmcpPT4hc2NlbmVzLmNvbnRhaW5zKGYpKTtcclxuXHRcdFx0XHRsZXQgbm90ZXMgPSBwbHVnaW4udXRpbHMuY29uY2F0X2FycmF5KFtzY2VuZXMsaWdub3JlZEZpbGVzXSk7XHJcblx0XHRcdFx0bm90ZXMgPSBub3Rlcy5tYXAoKGY6c3RyaW5nKT0+cGx1Z2luLmNoYWluLnRwX2ZpbmRfdGZpbGUoZikpO1xyXG5cdFx0XHRcdGlmKGN1cnIucGFyZW50PT1udWxsKXtyZXR1cm59O1xyXG5cdFx0XHRcdGxldCB0ZmlsZXMgPSBwbHVnaW4uY2hhaW4uZ2V0X3RmaWxlc19vZl9mb2xkZXIoY3Vyci5wYXJlbnQpLmZpbHRlcigoZjphbnkpPT4hbm90ZXMuY29udGFpbnMoZikpO1xyXG5cdFx0XHRcdG5vdGVzID0gcGx1Z2luLnV0aWxzLmNvbmNhdF9hcnJheShbdGZpbGVzLG5vdGVzXSk7XHJcblx0XHRcdFx0cGx1Z2luLmNoYWluLmNoYWluX2NvbmNhdF90ZmlsZXMobm90ZXMpO1xyXG5cdFx0XHR9XHJcblx0XHQpXHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGxvbmdmb3JtNG5vdGVjaGFpbiA9IChwbHVnaW46Tm90ZUNoYWluUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiBcImxvbmdmb3JtNG5vdGVjaGFpblwiLFxyXG4gICAgbmFtZTogXCJSZXNldCBMb25nRm9ybSBTZWNuZXMgYnkgTm90ZSBDaGFpbi5cIixcclxuXHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0bGV0IGN1cnIgPSBwbHVnaW4uY2hhaW4uY3VycmVudF9ub3RlO1xyXG5cdFx0aWYoY3Vycj09bnVsbCl7cmV0dXJuO31cclxuXHRcdGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoXHJcblx0XHRcdGN1cnIsXHJcblx0XHRcdGZtID0+e1xyXG5cdFx0XHRcdGlmKGN1cnI9PW51bGwpe3JldHVybjt9XHJcblx0XHRcdFx0aWYoY3Vyci5wYXJlbnQ9PW51bGwpe3JldHVybn07XHJcblxyXG5cdFx0XHRcdGlmKGZtWydsb25nZm9ybSddPT1udWxsKXtyZXR1cm47fVxyXG5cdFx0XHRcdGxldCBub3RlcyA9IHBsdWdpbi5jaGFpbi5nZXRfdGZpbGVzX29mX2ZvbGRlcihjdXJyLnBhcmVudCk7XHJcblx0XHRcdFx0bm90ZXMgPSBwbHVnaW4uY2hhaW4uc29ydF90ZmlsZXNfYnlfY2hhaW4obm90ZXMpO1xyXG5cdFx0XHRcdGZtLmxvbmdmb3JtLnNjZW5lcyA9IG5vdGVzLm1hcCgoZjpURmlsZSk9PmYuYmFzZW5hbWUpO1xyXG5cdFx0XHR9XHJcblx0XHQpXHJcblx0fVxyXG59KTtcclxuXHJcblxyXG5jb25zdCBzb3J0X2ZpbGVfZXhwbG9yZXIgPSAocGx1Z2luOk5vdGVDaGFpblBsdWdpbikgPT4gKHtcclxuXHRpZDogXCJzb3J0X2ZpbGVfZXhwbG9yZXJcIixcclxuICAgIG5hbWU6IFwiU29ydCBGaWxlIEV4cGxvcmVyIGJ5IE5vdGUgQ2hhaW4uXCIsXHJcblx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuXHRcdGF3YWl0IHBsdWdpbi5leHBsb3Jlci5zb3J0KCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IG9wZW5fbm90ZXNfc21hcnRlciA9IChwbHVnaW46Tm90ZUNoYWluUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAnb3Blbl9ub3Rlc19zbWFydGVyJyxcclxuXHRuYW1lOiAnT3BlbiBub3RlIHNtYXJ0ZXInLFxyXG5cdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRwbHVnaW4ub3Blbl9ub3RlX3NtYXJ0ZXIoKTtcclxuXHR9XHJcbn0pXHJcblxyXG5jb25zdCBzdWdndXN0ZXJfb3Blbl9ub3RlID0gKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdzdWdndXN0ZXJfb3Blbl9ub3RlJyxcclxuXHRuYW1lOiAnT3BlbiBub3RlJyxcclxuXHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0cGx1Z2luLmNoYWluLnN1Z2d1c3Rlcl9vcGVuX25vdGUoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuY29uc3Qgb3Blbl9wcmV2X25vdGVzID0gKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdvcGVuX3ByZXZfbm90ZXMnLFxyXG5cdG5hbWU6ICdPcGVuIHByZXYgbm90ZScsXHJcblx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdHBsdWdpbi5jaGFpbi5vcGVuX3ByZXZfbm90ZXMoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuY29uc3Qgb3Blbl9uZXh0X25vdGVzID0gKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdvcGVuX25leHRfbm90ZXMnLFxyXG5cdG5hbWU6ICdPcGVuIG5leHQgbm90ZScsXHJcblx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdHBsdWdpbi5jaGFpbi5vcGVuX25leHRfbm90ZXMoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IGNsZWFyX2lubGlua3MgPSAocGx1Z2luOk5vdGVDaGFpblBsdWdpbikgPT4gKHtcclxuXHRpZDogJ2NsZWFyX2lubGlua3MnLFxyXG5cdG5hbWU6ICdDbGVhciBpbmxpbmtzIG9mIGN1cnJlbnQgZmlsZScsXHJcblx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdHBsdWdpbi5jbGVhcl9pbmxpbmtzKCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IG1vdmVfZmlsZV90b19hbm90aGVyX2ZvbGRlciA9IChwbHVnaW46Tm90ZUNoYWluUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAnbW92ZV9maWxlX3RvX2Fub3RoZXJfZm9sZGVyJyxcclxuXHRuYW1lOiAnTW92ZSBjdXJyZW50IGZpbGUgdG8gYW5vdGhlciBmb2xkZXInLFxyXG5cdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRwbHVnaW4uY2hhaW4uY21kX21vdmVfZmlsZV90b19hbm90aGVyX2ZvbGRlcigpO1xyXG5cdH1cclxufSk7XHJcblxyXG5jb25zdCByZXBsYWNlX25vdGVzX3dpdGhfcmVneCA9IChwbHVnaW46Tm90ZUNoYWluUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAncmVwbGFjZV9ub3Rlc193aXRoX3JlZ3gnLFxyXG5cdG5hbWU6ICdSZXBsYWNlIGJ5IHJlZ2V4JyxcclxuXHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0cGx1Z2luLnJlcGxhY2Vfbm90ZXNfd2l0aF9yZWd4KCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGNoYWluX2luc2VydF9ub2RlID0gKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdjaGFpbl9pbnNlcnRfbm9kZScsXHJcblx0bmFtZTogJ0luc2VydCBub2RlIG9mIGNoYWluJyxcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0YXdhaXQgcGx1Z2luLmNtZF9jaGFpbl9pbnNlcnRfbm9kZSgpO1xyXG5cdFx0YXdhaXQgcGx1Z2luLmV4cGxvcmVyLnNvcnQoNTAwKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuY29uc3QgY2hhaW5fc2V0X3NlcV9ub3RlID0gKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdjaGFpbl9zZXRfc2VxX25vdGUnLFxyXG5cdG5hbWU6ICdSZXNldCB0aGUgY2hhaW4gb2YgY3VycmVudCBmb2xkZXIhJyxcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0YXdhaXQgcGx1Z2luLmNoYWluLmNoYWluX3N1Z2dlc3Rlcl90ZmlsZXMoKTtcclxuXHRcdHBsdWdpbi5leHBsb3Jlci5zb3J0KCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGNyZWF0ZV9uZXdfbm90ZSA9IChwbHVnaW46Tm90ZUNoYWluUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAnY3JlYXRlX25ld19ub3RlJyxcclxuXHRuYW1lOiAnQ3JlYXRlIG5ldyBub3RlLicsXHJcblx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuXHRcdGxldCB0YXJnZXRzID0ge1xyXG5cdFx0XHQnXHU2REZCXHU1MkEwXHU1NDBFXHU3RjZFXHU3QjE0XHU4QkIwJyA6J2NoYWluX2luc2VydF9ub2RlX2FmdGVyJyxcclxuXHRcdFx0J1x1OTRGRVx1NUMzRVx1NkRGQlx1NTJBMFx1N0IxNFx1OEJCMCcgOiAnY2hhaW5faW5zZXJ0X25vZGVfYXNfdGFpbCcsXHJcblx0XHRcdCdcdTZERkJcdTUyQTBcdTUyNERcdTdGNkVcdTdCMTRcdThCQjAnIDogJ2NoYWluX2luc2VydF9ub2RlX2JlZm9yZScsXHJcblx0XHRcdCdcdTk0RkVcdTU5MzRcdTZERkJcdTUyQTBcdTdCMTRcdThCQjAnIDogJ2NoYWluX2luc2VydF9ub2RlX2FzX2hlYWQnLFxyXG5cdFx0XHQnXHU2NUUwXHU5NEZFXHU2M0E1JyA6IGBudWxsYCxcclxuXHRcdH1cclxuXHRcdGxldCB0YXJnZXQgPSBhd2FpdCBwbHVnaW4uY2hhaW4udHBfc3VnZ2VzdGVyKFxyXG5cdFx0XHRwbHVnaW4udXRpbHMuYXJyYXlfcHJlZml4X2lkKE9iamVjdC5rZXlzKHRhcmdldHMpKSwgXHJcblx0XHRcdE9iamVjdC52YWx1ZXModGFyZ2V0cyksIFxyXG5cdFx0XHR0cnVlLCBcclxuXHRcdFx0J1x1OTAwOVx1NjJFOVx1N0IxNFx1OEJCMFx1N0M3Qlx1NTc4Qi4nXHJcblx0XHQpO1xyXG5cdFx0aWYoIXRhcmdldCl7cmV0dXJuO31cclxuXHRcdGxldCBuYW1lID0gYXdhaXQgcGx1Z2luLmNoYWluLnRwX3Byb21wdCgnXHU4QkY3XHU4RjkzXHU1MTY1XHU2NTg3XHU0RUY2XHU1NDBEJyk7XHJcblx0XHRpZihuYW1lKXtcclxuXHRcdFx0bGV0IGN1cnIgPSBwbHVnaW4uY2hhaW4uY3VycmVudF9ub3RlO1xyXG5cdFx0XHRpZihjdXJyICYmIGN1cnIucGFyZW50KXtcclxuXHRcdFx0XHRsZXQgcGF0aCA9IGN1cnIucGFyZW50LnBhdGgrJy8nK25hbWUrJy5tZCc7XHJcblx0XHRcdFx0bGV0IGRzdCA9IGF3YWl0IHBsdWdpbi5jaGFpbi5nZXRfdGZpbGUocGF0aCk7XHJcblx0XHRcdFx0aWYoZHN0PT1udWxsKXtcclxuXHRcdFx0XHRcdGxldCBmdW5jID0gcGx1Z2luLnV0aWxzLmdldF90cF9mdW5jKHBsdWdpbi5hcHAsJ3RwLmZpbGUuY3JlYXRlX25ldycpXHJcblx0XHRcdFx0XHRkc3QgPSBhd2FpdCBmdW5jKFxyXG5cdFx0XHRcdFx0XHQnJyxuYW1lLFxyXG5cdFx0XHRcdFx0XHRmYWxzZSxjdXJyLnBhcmVudFxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdGF3YWl0IHBsdWdpbi51dGlscy5zbGVlcCgzMDApO1xyXG5cdFx0XHRcdFx0aWYoISh0YXJnZXQ9PT0nbnVsbCcpKXtcclxuXHRcdFx0XHRcdFx0YXdhaXQgKHBsdWdpbi5jaGFpbiBhcyBhbnkpW3RhcmdldF0oZHN0LGN1cnIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnV0aWxzLnNsZWVwKDMwMCk7XHJcblx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uY2hhaW4ub3Blbl9ub3RlKGRzdCk7XHJcblx0XHRcdFx0XHRhd2FpdCBwbHVnaW4uZXhwbG9yZXIuc29ydCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVx0XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGNvbW1hbmRCdWlsZGVycyA9IFtcclxuXHRvcGVuX3ByZXZfbm90ZXMsXHJcblx0b3Blbl9uZXh0X25vdGVzLFxyXG5cdG9wZW5fbm90ZXNfc21hcnRlcixcclxuXHRzdWdndXN0ZXJfb3Blbl9ub3RlLFxyXG5cdGxvbmdmb3JtMm5vdGVjaGFpbixcclxuXHRsb25nZm9ybTRub3RlY2hhaW4sXHJcblx0c29ydF9maWxlX2V4cGxvcmVyLFxyXG5cdGNsZWFyX2lubGlua3MsXHJcblx0cmVwbGFjZV9ub3Rlc193aXRoX3JlZ3gsXHJcblx0bW92ZV9maWxlX3RvX2Fub3RoZXJfZm9sZGVyLFxyXG5cdGNoYWluX2luc2VydF9ub2RlLFxyXG5cdGNoYWluX3NldF9zZXFfbm90ZSxcclxuXHRjcmVhdGVfbmV3X25vdGVcclxuXTtcclxuXHJcbmZ1bmN0aW9uIGFkZENvbW1hbmRzKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pIHtcclxuICAgIGNvbW1hbmRCdWlsZGVycy5mb3JFYWNoKChjKSA9PiB7XHJcbiAgICAgICAgcGx1Z2luLmFkZENvbW1hbmQoYyhwbHVnaW4pKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RlQ2hhaW5QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBOQ1NldHRpbmdzO1xyXG5cdGNoYWluIDogTm90ZUNoYWluO1xyXG5cdGVkaXRvciA6IE5DRWRpdG9yOyBcclxuXHRleHBsb3JlciA6IE5DRmlsZUV4cGxvcmVyO1xyXG5cdGRlYnVnOmJvb2xlYW47XHJcblx0dXRpbHM6YW55O1xyXG5cdG9iOmFueTtcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0dGhpcy5kZWJ1Zz10cnVlO1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0dGhpcy51dGlscyA9IHJlcXVpcmUoJy4vc3JjL3V0aWxzJyk7XHJcblx0XHR0aGlzLm9iID0gcmVxdWlyZSgnb2JzaWRpYW4nKTtcclxuXHRcdFxyXG5cdFx0dGhpcy5lZGl0b3IgPSBuZXcgTkNFZGl0b3IodGhpcy5hcHApO1xyXG5cdFx0dGhpcy5jaGFpbiA9IG5ldyBOb3RlQ2hhaW4odGhpcyx0aGlzLmVkaXRvcik7XHJcblx0XHR0aGlzLmV4cGxvcmVyID0gbmV3IE5DRmlsZUV4cGxvcmVyKHRoaXMpO1xyXG5cclxuXHRcdGFkZENvbW1hbmRzKHRoaXMpO1xyXG5cclxuXHRcdC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IE5DU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKCdaaWctSG9sZGluZzpyZWdlaXN0ZXIgdWZ1bmNfb25fZmlsZV9vcGVuJyk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgdGhpcy51ZnVuY19vbl9maWxlX29wZW4pXHJcblx0XHQpO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbihcclxuXHRcdFx0XCJkZWxldGVcIiwgYXN5bmMgKGZpbGU6IFRGaWxlKSA9PiB7XHJcblx0XHRcdFx0aWYodGhpcy5kZWJ1Zyl7Y29uc29sZS5sb2coXCJkZWxldGUuLi5cIik7fVxyXG5cdFx0XHRcdGF3YWl0IHRoaXMuY2hhaW4uY2hhaW5fcG9wX25vZGUoZmlsZSk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5leHBsb3Jlci5zb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdCkpXHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKFxyXG5cdFx0XHRcImNyZWF0ZVwiLCBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0aWYodGhpcy5kZWJ1Zyl7Y29uc29sZS5sb2coXCJjcmVhdGUuLi5cIik7fVxyXG5cdFx0XHRcdGF3YWl0IHRoaXMudXRpbHMuc2xlZXAoNTAwKTtcclxuXHRcdFx0XHR0aGlzLmV4cGxvcmVyLnNvcnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0KSlcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXHJcblx0XHRcdFwicmVuYW1lXCIsIGFzeW5jIChmaWxlOiBURmlsZSxvbGRQYXRoOnN0cmluZykgPT4ge1xyXG5cdFx0XHRcdGlmKHRoaXMuZGVidWcpe2NvbnNvbGUubG9nKFwicmVuYW1lLi4uXCIpO31cclxuXHRcdFx0XHRhd2FpdCB0aGlzLnV0aWxzLnNsZWVwKDUwMCk7XHJcblx0XHRcdFx0dGhpcy5leHBsb3Jlci5zb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdCkpXHJcblx0fVxyXG5cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHRjb25zb2xlLmxvZygnWmlnLUhvbGRpbmc6dW5yZWdlaXN0ZXIgdWZ1bmNfb25fZmlsZV9vcGVuJyk7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub2ZmKCdmaWxlLW9wZW4nLCB0aGlzLnVmdW5jX29uX2ZpbGVfb3Blbik7XHJcblx0XHR0aGlzLmV4cGxvcmVyLnVucmVnaXN0ZXIoKTtcclxuXHRcdHRoaXMuZXhwbG9yZXIuc29ydCgpO1xyXG5cdH1cclxuXHJcblxyXG5cdGNvbnNvbGVfbG9nKC4uLmQ6YW55KXtcclxuXHRcdGlmKHRoaXMuZGVidWcpe1xyXG5cdFx0XHRjb25zb2xlLmxvZyguLi5kKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHVmdW5jX29uX2ZpbGVfb3BlbihmaWxlOlRGaWxlKXtcclxuXHRcdGxldCB6aCA9IGF3YWl0IChhcHAgYXMgYW55KS5wbHVnaW5zLmdldFBsdWdpbihcIm5vdGUtY2hhaW5cIik7XHJcblx0XHRpZighemgpe3JldHVybjt9XHJcblx0XHRpZih6aC5zZXR0aW5ncy5yZWZyZXNoRGF0YVZpZXcpe1xyXG5cdFx0XHR6aC5hcHAuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKFxyXG5cdFx0XHRcdFwiZGF0YXZpZXc6ZGF0YXZpZXctZm9yY2UtcmVmcmVzaC12aWV3c1wiXHJcblx0XHRcdClcclxuXHRcdH1cclxuXHRcdGlmKHpoLnNldHRpbmdzLnJlZnJlc2hUYXNrcyl7XHJcblx0XHRcdGxldCB0YXJnZXQgPSBhd2FpdCAoYXBwIGFzIGFueSkucGx1Z2lucy5nZXRQbHVnaW4oXCJvYnNpZGlhbi10YXNrcy1wbHVnaW5cIik7XHJcblx0XHRcdHRhcmdldC5jYWNoZS5ub3RpZnlTdWJzY3JpYmVycygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjbGVhcl9pbmxpbmtzKHRmaWxlPXRoaXMuY2hhaW4uY3VycmVudF9ub3RlLG1vZGU9J3N1Z2dlc3Rlcicpe1xyXG5cdFx0aWYodGZpbGU9PW51bGwpe3JldHVybjt9XHJcblx0XHRsZXQgbm90ZXMgPSB0aGlzLmNoYWluLmdldF9pbmxpbmtzKHRmaWxlKTtcclxuXHRcdGlmKG5vdGVzLmxlbmd0aCl7XHJcblx0XHRcdGlmKG1vZGU9PT0nc3VnZ2VzdGVyJyl7XHJcblx0XHRcdFx0bW9kZSA9IGF3YWl0IHRoaXMuY2hhaW4udHBfc3VnZ2VzdGVyKFxyXG5cdFx0XHRcdFx0W1wiXHU1MjIwXHU5NjY0XHU5NEZFXHU2M0E1XCIsJ1x1NjZGRlx1NjM2Mlx1OTRGRVx1NjNBNScsXCJcdTUyMjBcdTk2NjRcdTZCQjVcdTg0M0RcIixdLFxyXG5cdFx0XHRcdFx0W1snbGluaycsJ2RlbCddLFsnbGluaycsJ3JlcCddLFsncGFyYScsJ2RlbCddXVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdFx0bGV0IHJlZyA9IHRoaXMuZWRpdG9yLnJlZ2V4cF9saW5rKHRmaWxlLG1vZGVbMF0pO1xyXG5cdFx0XHRpZihyZWcpe1xyXG5cdFx0XHRcdGZvcihsZXQgbm90ZSBvZiBub3Rlcyl7XHJcblx0XHRcdFx0XHRsZXQgdGFyZ2V0O1xyXG5cdFx0XHRcdFx0aWYobW9kZVsxXT09PSdyZXAnKXtcclxuXHRcdFx0XHRcdFx0dGFyZ2V0PXRmaWxlLmJhc2VuYW1lO1xyXG5cdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdHRhcmdldD0nJ1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dGhpcy5lZGl0b3IucmVwbGFjZShub3RlLHJlZyx0YXJnZXQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgcmVwbGFjZV9ub3Rlc193aXRoX3JlZ3goKXtcclxuXHRcdGxldCBub3RlcyA9IGF3YWl0IHRoaXMuY2hhaW4uc3VnZ2VzdGVyX25vdGVzKCk7XHJcblx0XHRpZihub3Rlcz8ubGVuZ3RoPjApe1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGxldCByZWdzID0gYXdhaXQgdGhpcy5jaGFpbi50cF9wcm9tcHQoJ1x1ODk4MVx1NjZGRlx1NjM2Mlx1NzY4NFx1NkI2M1x1NTIxOVx1ODg2OFx1OEZCRVx1NUYwRicpO1xyXG5cdFx0XHRcdGlmKHJlZ3M9PW51bGwpe1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRsZXQgcmVnID0gbmV3IFJlZ0V4cChyZWdzLCdnJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0bGV0IHRhcmdldCA9IGF3YWl0IHRoaXMuY2hhaW4udHBfcHJvbXB0KCdcdTc2RUVcdTY4MDdcdTVCNTdcdTdCMjZcdTRFMzInKTtcclxuXHRcdFx0XHRpZih0YXJnZXQ9PW51bGwpe1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0YXJnZXQgPSB0YXJnZXQudHJpbSgpLnJlcGxhY2UoXHJcblx0XHRcdFx0XHQvXFxcXG4vZywnXFxuJ1xyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2cocmVncyxyZWcsdGFyZ2V0KTtcclxuXHRcdFx0XHRmb3IobGV0IG5vdGUgb2Ygbm90ZXMpe1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5lZGl0b3IucmVwbGFjZShub3RlLHJlZyx0YXJnZXQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGFzeW5jIGNtZF9jaGFpbl9pbnNlcnRfbm9kZSgpe1xyXG5cdFx0bGV0IGN1cnIgPSB0aGlzLmNoYWluLmN1cnJlbnRfbm90ZTtcclxuXHRcdGlmKGN1cnI9PW51bGwpe3JldHVybjt9XHJcblx0XHRsZXQgbm90ZXMgPSBhd2FpdCB0aGlzLmNoYWluLnN1Z2dlc3Rlcl9ub3RlcyhjdXJyLGZhbHNlKTtcclxuXHRcdGlmKCFub3Rlcyl7cmV0dXJufVxyXG5cdFx0bm90ZXMgPSB0aGlzLmNoYWluLnNvcnRfdGZpbGVzKG5vdGVzLFsnbXRpbWUnLCd4J10pO1xyXG5cdFx0bm90ZXMgPSB0aGlzLmNoYWluLnNvcnRfdGZpbGVzX2J5X2NoYWluKG5vdGVzKTtcclxuXHRcdC8vbm90ZXMgPSBub3Rlcy5maWx0ZXIoZj0+ZiE9Y3Vycik7XHJcblx0XHRpZihub3Rlcy5sZW5ndGg9PTApe3JldHVybjt9XHJcblx0XHRjb25zdCBub3RlID0gYXdhaXQgdGhpcy5jaGFpbi50cF9zdWdnZXN0ZXIoXHJcblx0XHRcdChmaWxlOlRGaWxlKSA9PiB0aGlzLnRmaWxlX3RvX3N0cmluZyhmaWxlLFtdLFwiXCIpLCBcclxuXHRcdFx0bm90ZXNcclxuXHRcdCk7IFxyXG5cdFx0XHJcblx0XHRpZighbm90ZSl7cmV0dXJuO31cclxuXHRcdFxyXG5cdFx0bGV0IHNpdGVtcyA9IFtcclxuXHRcdFx0XCJpbnNlcnRfbm9kZV9hZnRlclwiLFxyXG5cdFx0XHRcImluc2VydF9ub2RlX2JlZm9yZVwiLFxyXG5cdFx0XHRcImluc2VydF9ub2RlX2FzX2hlYWRcIixcclxuXHRcdFx0XCJpbnNlcnRfbm9kZV9hc190YWlsXCIsXHJcblx0XHRcdFwiaW5zZXJ0X2ZvbGRlcl9hZnRlclwiLFxyXG5cdFx0XTtcclxuXHRcdGxldCBtb2RlID0gYXdhaXQgdGhpcy5jaGFpbi50cF9zdWdnZXN0ZXIoXHJcblx0XHRcdHNpdGVtcyxzaXRlbXMsZmFsc2UsXCJTZWxlY3QgTm9kZSBJbnNlcnQgTW9kZS5cIlxyXG5cdFx0KTtcclxuXHRcdFxyXG5cdFx0aWYoIW1vZGUpe3JldHVybjt9XHJcblxyXG5cdFx0Y29uc29sZS5sb2codHlwZW9mKG1vZGUpLG1vZGUpO1xyXG5cclxuXHRcdGlmKG1vZGU9PT0naW5zZXJ0X25vZGVfYXNfaGVhZCcpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNoYWluLmNoYWluX2luc2VydF9ub2RlX2FzX2hlYWQoY3Vycixub3RlKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0naW5zZXJ0X25vZGVfYXNfdGFpbCcpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNoYWluLmNoYWluX2luc2VydF9ub2RlX2FzX3RhaWwoY3Vycixub3RlKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0naW5zZXJ0X25vZGVfYmVmb3JlJyl7XHJcblx0XHRcdGF3YWl0IHRoaXMuY2hhaW4uY2hhaW5faW5zZXJ0X25vZGVfYmVmb3JlKGN1cnIsbm90ZSk7XHJcblx0XHR9ZWxzZSBpZihtb2RlPT09J2luc2VydF9ub2RlX2FmdGVyJyl7XHJcblx0XHRcdGF3YWl0IHRoaXMuY2hhaW4uY2hhaW5faW5zZXJ0X25vZGVfYWZ0ZXIoY3Vycixub3RlKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0naW5zZXJ0X2ZvbGRlcl9hZnRlcicpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNoYWluLmNoYWluX2luc2VydF9mb2xkZXJfYWZ0ZXIoY3Vycixub3RlKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHRcclxuXHR0ZmlsZV90b19zdHJpbmcodGZpbGU6VEZpbGUsZmllbGRzOkFycmF5PHN0cmluZz4sc2VxOnN0cmluZyl7XHJcblx0XHRsZXQgaXRlbXMgPSBuZXcgQXJyYXkoKTtcclxuXHRcdGlmKHRmaWxlPT10aGlzLmNoYWluLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRcdGl0ZW1zLnB1c2goJ1x1RDgzQ1x1REZFMCcgKyB0ZmlsZS5iYXNlbmFtZSlcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRpdGVtcy5wdXNoKHRmaWxlLmJhc2VuYW1lKVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmb3IobGV0IGZpZWxkIG9mIGZpZWxkcyl7XHJcblx0XHRcdHRyeXtcclxuXHRcdFx0XHRpdGVtcy5wdXNoKHRoaXMuZWRpdG9yLmdldF9mcm9udG1hdHRlcih0ZmlsZSxmaWVsZCkpO1xyXG5cdFx0XHR9Y2F0Y2goZXJyb3Ipe1xyXG5cdFx0XHRcdGl0ZW1zLnB1c2goXCItXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gaXRlbXMuam9pbihzZXEpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb3Blbl9ub3RlX3NtYXJ0ZXIoKXtcclxuXHRcdC8vIFx1OTRGRVx1NUYwRlx1OEMwM1x1NzUyOFxyXG5cdFx0bGV0IGN1cnIgPSB0aGlzLmNoYWluLmN1cnJlbnRfbm90ZTtcclxuXHRcdGxldCBub3RlcyA9IGF3YWl0IHRoaXMuY2hhaW4uc3VnZ2VzdGVyX25vdGVzKGN1cnIsZmFsc2UpXHJcblx0XHRcclxuXHRcdG5vdGVzID0gdGhpcy5jaGFpbi5zb3J0X3RmaWxlcyhub3RlcyxbJ210aW1lJywneCddKTtcclxuXHRcdG5vdGVzID0gdGhpcy5jaGFpbi5zb3J0X3RmaWxlc19ieV9jaGFpbihub3Rlcyk7XHJcblx0XHRpZihub3Rlcy5sZW5ndGg+MCl7XHJcblx0XHRcdGxldCBub3RlID0gYXdhaXQgdGhpcy5jaGFpbi50cF9zdWdnZXN0ZXIoXHJcblx0XHRcdFx0KGZpbGU6VEZpbGUpID0+IHRoaXMuY2hhaW4udGZpbGVfdG9fc3RyaW5nKGZpbGUpLCBcclxuXHRcdFx0XHRub3Rlc1xyXG5cdFx0XHQpXHJcblx0XHRcdGlmKG5vdGUpe1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuY2hhaW4ub3Blbl9ub3RlKG5vdGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG5cclxuY2xhc3MgTkNTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBOb3RlQ2hhaW5QbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE5vdGVDaGFpblBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgnU29ydCBGaWxlIEV4cGxvcmVyJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU29ydCBGaWxlIEV4cGxvcmVyIGJ5IENoYWluJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmlzU29ydEZpbGVFeHBsb3JlcilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNTb3J0RmlsZUV4cGxvcmVyID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlci5zb3J0KCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgnU29ydCBGb2xkZXIgRmlyc3QnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTb3J0IEZpbGUgRXhwbG9yZXIgRm9sZGVyIEZpcnN0JylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmlzRm9sZGVyRmlyc3QpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmlzRm9sZGVyRmlyc3QgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyLnNvcnQoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUHJldkNoYWluJylcclxuXHRcdFx0LnNldERlc2MoJ051bWJlciBvZiBQcmV2IE5vdGVzIHRvIHNob3c/JylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLlByZXZDaGFpbilcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5QcmV2Q2hhaW4gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ05leHRDaGFpbicpXHJcblx0XHRcdC5zZXREZXNjKCdOdW1iZXIgb2YgTmV4dCBOb3RlcyB0byBzaG93PycpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5OZXh0Q2hhaW4pXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuTmV4dENoYWluID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbCkgIFxyXG5cdFx0XHRcdC5zZXROYW1lKCdyZWZyZXNoRGF0YVZpZXcnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdSZWZyZXNoIERhdGF2aWV3IHdoaWxlIG9wZW4gbmV3IGZpbGU/JylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlZnJlc2hEYXRhVmlldylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVmcmVzaERhdGFWaWV3ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUoJ3JlZnJlc2hUYXNrcycpXHJcblx0XHRcdFx0LnNldERlc2MoJ1JlZnJlc2ggVGFza3Mgd2hpbGUgb3BlbiBuZXcgZmlsZT8nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVmcmVzaFRhc2tzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWZyZXNoVGFza3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBcclxuXHRBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBcclxuXHRQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsXHJcblx0VEZpbGUsVEZvbGRlclxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgTkNFZGl0b3J7XHJcblx0YXBwOkFwcDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOkFwcCl7XHJcblx0XHR0aGlzLmFwcCA9IGFwcDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNldF9mcm9udG1hdHRlcih0ZmlsZTpURmlsZSxrZXk6c3RyaW5nLHZhbHVlOmFueSl7XHJcblx0XHRsZXQgcHJldiA9IHRoaXMuZ2V0X2Zyb250bWF0dGVyKHRmaWxlLGtleSk7XHJcblx0XHRpZihwcmV2PT09dmFsdWUpe3JldHVybjt9XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKHRmaWxlLGZtID0+e1xyXG5cdFx0XHRjb25zb2xlLmxvZyhgJHt0ZmlsZS5iYXNlbmFtZX0tLS0ke2tleX0tLS0ke3ZhbHVlfWApO1xyXG5cdFx0XHRmbVtrZXldID0gdmFsdWU7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGdldF9mcm9udG1hdHRlcih0ZmlsZTpURmlsZSxrZXk6YW55KXtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGlmKCF0ZmlsZSl7cmV0dXJuIG51bGw7fVxyXG5cdFx0XHRsZXQgbWV0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRmaWxlKTtcclxuXHRcdFx0aWYobWV0YT8uZnJvbnRtYXR0ZXIpe1xyXG5cdFx0XHRcdHJldHVybiBtZXRhLmZyb250bWF0dGVyW2tleV07XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdnZXRfZnJvbnRtYXR0ZXInKTtcclxuXHRcdFx0Y29uc29sZS5sb2codGZpbGUpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRyZWdleHBfbGluayh0ZmlsZTpURmlsZSxtb2RlOnN0cmluZyl7XHJcblx0XHQvL1tbbm90ZXx8YWxpYXNdXVxyXG5cdFx0aWYobW9kZT09PSdsaW5rJyl7XHJcblx0XHRcdHJldHVybiBuZXcgUmVnRXhwKGBcXFxcW1xcXFxbJHt0ZmlsZS5iYXNlbmFtZX1cXFxcfD8uKlxcXFxdXFxcXF1gLCdnJyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vcGFyYWdyYXBoXHJcblx0XHRpZihtb2RlPT09J3BhcmEnKXtcclxuXHRcdFx0cmV0dXJuIG5ldyBSZWdFeHAoYC4qXFxcXFtcXFxcWyR7dGZpbGUuYmFzZW5hbWV9XFxcXHw/LipcXFxcXVxcXFxdLipgLCdnJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyByZXBsYWNlKHRmaWxlOlRGaWxlLHJlZ2V4OmFueSx0YXJnZXQ6c3RyaW5nKXtcclxuXHRcdGlmKHR5cGVvZiByZWdleCA9PT0gJ3N0cmluZycpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5wcm9jZXNzKHRmaWxlLChkYXRhKT0+e1xyXG5cdFx0XHRcdGlmKGRhdGEuaW5kZXhPZihyZWdleCk+LTEpe1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ1JlcGxhY2U6ICcsdGZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gZGF0YS5yZXBsYWNlKHJlZ2V4LCB0YXJnZXQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdFx0fSlcclxuXHRcdH1lbHNlIGlmKHJlZ2V4IGluc3RhbmNlb2YgUmVnRXhwKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQucHJvY2Vzcyh0ZmlsZSwoZGF0YSk9PntcclxuXHRcdFx0XHRpZihkYXRhLm1hdGNoKHJlZ2V4KSl7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnUmVwbGFjZTogJyx0ZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcdHJldHVybiBkYXRhLnJlcGxhY2UocmVnZXgsIHRhcmdldCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0XHR9KVxyXG5cdFx0fVxyXG5cdH1cclxufSIsICJcclxuaW1wb3J0IHsgXHJcblx0QXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgXHJcblx0UGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLFxyXG5cdFRBYnN0cmFjdEZpbGUsXHJcblx0VEZpbGUsVEZvbGRlclxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCBOb3RlQ2hhaW5QbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcclxuaW1wb3J0IHtOQ0VkaXRvcn0gZnJvbSAnLi9OQ0VkaXRvcic7XHJcbmltcG9ydCB7Z2V0X3RwX2Z1bmN9IGZyb20gJy4vdXRpbHMnXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIE5vdGVDaGFpbntcclxuXHRwbHVnaW46Tm90ZUNoYWluUGx1Z2luO1xyXG5cdGFwcDpBcHA7XHJcblx0cHJldjpzdHJpbmc7XHJcblx0bmV4dDpzdHJpbmc7XHJcblx0ZWRpdG9yOk5DRWRpdG9yO1xyXG5cdGNoaWxkcmVuOnt9O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46Tm90ZUNoYWluUGx1Z2luLGVkaXRvcjpOQ0VkaXRvcixwcmV2PVwiUHJldk5vdGVcIixuZXh0PVwiTmV4dE5vdGVcIikge1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XHJcblx0XHR0aGlzLmVkaXRvciA9IG5ldyBOQ0VkaXRvcih0aGlzLmFwcCk7XHJcblx0XHRcclxuXHRcdHRoaXMucHJldiA9IHByZXY7XHJcblx0XHR0aGlzLm5leHQgPSBuZXh0O1xyXG5cdFx0dGhpcy5pbml0X2NoaWxkcmVuKCk7XHJcblx0fVxyXG4gICAgXHJcblx0aW5pdF9jaGlsZHJlbigpe1xyXG5cdFx0dGhpcy5jaGlsZHJlbiA9IHt9O1xyXG5cdFx0Zm9yKGxldCBmIG9mIHRoaXMuZ2V0X2FsbF9mb2xkZXJzKCkpe1xyXG5cdFx0XHR0aGlzLmNoaWxkcmVuW2YucGF0aF0gPSB0aGlzLnNvcnRfdGZpbGVzX2J5X2NoYWluKGYuY2hpbGRyZW4pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0IHRwX2ZpbmRfdGZpbGUoKXtcclxuXHRcdHJldHVybiBnZXRfdHBfZnVuYyh0aGlzLmFwcCwndHAuZmlsZS5maW5kX3RmaWxlJyk7XHJcblx0fVxyXG5cclxuXHRnZXQgdHBfc3VnZ2VzdGVyKCl7XHJcblx0XHRyZXR1cm4gZ2V0X3RwX2Z1bmModGhpcy5hcHAsJ3RwLnN5c3RlbS5zdWdnZXN0ZXInKTtcclxuXHR9XHJcblxyXG5cdGdldCB0cF9wcm9tcHQoKXtcclxuXHRcdHJldHVybiBnZXRfdHBfZnVuYyh0aGlzLmFwcCwndHAuc3lzdGVtLnByb21wdCcpO1xyXG5cdH1cclxuXHJcblx0Z2V0X2FsbF9mb2xkZXJzKHNvcnRfbW9kZT0nJyl7XHJcblx0XHRyZXR1cm4gKHRoaXMuYXBwLnZhdWx0IGFzIGFueSkuZ2V0QWxsRm9sZGVycygpO1xyXG5cdH1cclxuXHJcblx0Z2V0X2FsbF90ZmlsZXMoc29ydF9tb2RlPScnKXtcclxuXHRcdGxldCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdGlmKCEoc29ydF9tb2RlPT09JycpKXtcclxuXHRcdFx0dGhpcy5zb3J0X3RmaWxlcyhmaWxlcyxzb3J0X21vZGU9c29ydF9tb2RlKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBmaWxlcztcclxuXHR9XHJcblx0XHJcblx0c29ydF9mb2xkZXJzX2J5X210aW1lKGZvbGRlcnM6QXJyYXk8VEZvbGRlcj4scmV2ZXJzZT10cnVlKXtcclxuXHRcdGZ1bmN0aW9uIHVmdW5jKGY6VEZvbGRlcil7XHJcblx0XHRcdHJldHVybiBNYXRoLm1heChcclxuXHRcdFx0XHQuLi5mLmNoaWxkcmVuLmZpbHRlcigoZjpURmlsZSk9PmYuYmFzZW5hbWUpLm1hcCgoZjpURmlsZSk9PmYuc3RhdFxyXG5cdFx0XHRcdC5tdGltZSlcclxuXHRcdFx0KVxyXG5cdFx0fVxyXG5cdFx0bGV0IHJlcyA9IGZvbGRlcnMuc29ydCgoYSxiKT0+dWZ1bmMoYSktdWZ1bmMoYikpO1xyXG5cdFx0aWYocmV2ZXJzZSl7XHJcblx0XHRcdHJlcyA9IHJlcy5yZXZlcnNlKCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY21kX21vdmVfZmlsZV90b19hbm90aGVyX2ZvbGRlcih0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRpZih0ZmlsZT09bnVsbCl7cmV0dXJuO31cclxuXHJcblx0XHRsZXQgZm9sZGVycyA9IHRoaXMuZ2V0X2FsbF9mb2xkZXJzKCk7XHJcblx0XHRmb2xkZXJzID0gdGhpcy5zb3J0X2ZvbGRlcnNfYnlfbXRpbWUoZm9sZGVyc1xyXG5cdFx0KS5maWx0ZXIoZj0+ZiE9dGZpbGUucGFyZW50KTtcclxuXHJcblx0XHRpZih0ZmlsZS5leHRlbnNpb249PT0nbWQnKXtcclxuXHRcdFx0Zm9sZGVycyA9IGZvbGRlcnMuZmlsdGVyKChmOlRGaWxlKT0+dGhpcy5maWx0ZXJfdXNlcl9pZ25vcmUoZikpO1xyXG5cdFx0fVxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0bGV0IGZvbGRlciA9IGF3YWl0IHRoaXMudHBfc3VnZ2VzdGVyKChmOlRGaWxlKT0+Zi5wYXRoLGZvbGRlcnMpO1xyXG5cdFx0XHQvLyBcdTc5RkJcdTUyQThcdTdCMTRcdThCQjBcclxuXHRcdFx0bGV0IGRzdCA9IGZvbGRlci5wYXRoK1wiL1wiK3RmaWxlLmJhc2VuYW1lK1wiLlwiK3RmaWxlLmV4dGVuc2lvbjtcclxuXHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZSh0ZmlsZSxkc3QpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGZpbHRlcl91c2VyX2lnbm9yZShub3RlOlRGaWxlKXtcclxuXHRcdGlmKCEoKHRoaXMuYXBwLnZhdWx0IGFzIGFueSkuY29uZmlnLmF0dGFjaG1lbnRGb2xkZXJQYXRoPT09Jy4vJykpe1xyXG5cdFx0XHRpZihub3RlLnBhdGguc3RhcnRzV2l0aChcclxuXHRcdFx0XHQodGhpcy5hcHAudmF1bHQgYXMgYW55KS5jb25maWcuYXR0YWNobWVudEZvbGRlclBhdGgpXHJcblx0XHRcdCl7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZigodGhpcy5hcHAudmF1bHQgYXMgYW55KS51c2VySWdub3JlRmlsdGVycyl7XHJcblx0XHRcdGZvcihsZXQgeCBvZiAodGhpcy5hcHAudmF1bHQgYXMgYW55KS51c2VySWdub3JlRmlsdGVycyl7XHJcblx0XHRcdFx0aWYobm90ZS5wYXRoLnN0YXJ0c1dpdGgoeCkpe1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzdWdndXN0ZXJfbm90ZSgpe1xyXG5cdFx0Ly8gXHU0RUNFXHU1RTkzXHU0RTJEXHU5MDA5XHU2MkU5XHU0RTAwXHU0RTJBXHU3QjE0XHU4QkIwXHJcblx0XHRsZXQgbm90ZXMgPSB0aGlzLnNvcnRfdGZpbGVzKFxyXG5cdFx0XHR0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLFxyXG5cdFx0XHRbJ210aW1lJywneCddXHJcblx0XHQpLmZpbHRlcigoZjpURmlsZSk9PnRoaXMuZmlsdGVyX3VzZXJfaWdub3JlKGYpKTtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGxldCBub3RlID0gYXdhaXQgdGhpcy50cF9zdWdnZXN0ZXIoKGY6VEZpbGUpPT5mLnBhdGgsbm90ZXMpO1xyXG5cdFx0XHRyZXR1cm4gbm90ZTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b3Blbl9ub3RlKHRmaWxlOlRGaWxlLG5ld190YWI9ZmFsc2UscmV2ZWFsRm9sZGVyPXRydWUpe1xyXG5cdFx0aWYodGZpbGUpe1xyXG5cdFx0XHRpZih0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZi5waW5uZWQgfHwgbmV3X3RhYil7XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSkub3BlbkZpbGUodGZpbGUpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZi5vcGVuRmlsZSh0ZmlsZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYocmV2ZWFsRm9sZGVyKXtcclxuXHRcdFx0XHQodGhpcy5wbHVnaW4uZXhwbG9yZXIuZmlsZV9leHBsb3JlciBhcyBhbnkpLnJldmVhbEluRm9sZGVyKHRmaWxlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgc3VnZ3VzdGVyX29wZW5fbm90ZSgpe1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0bGV0IG5vdGUgPSBhd2FpdCB0aGlzLnN1Z2d1c3Rlcl9ub3RlKCk7XHJcblx0XHRcdHRoaXMub3Blbl9ub3RlKG5vdGUpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cclxuXHRnZXRfdGZpbGUocGF0aDpzdHJpbmcpe1xyXG5cdFx0bGV0IG5hbWUgPSBwYXRoLnNwbGl0KCd8JylbMF0ucmVwbGFjZSgnW1snLCcnKS5yZXBsYWNlKCddXScsJycpO1xyXG5cdFx0cmV0dXJuIHRoaXMudHBfZmluZF90ZmlsZShuYW1lKTtcclxuXHR9XHJcblxyXG5cdGdldCBjdXJyZW50X25vdGUoKXtcclxuXHRcdHJldHVybiB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdH1cclxuXHJcblx0Z2V0X2lubGlua3ModGZpbGU9dGhpcy5jdXJyZW50X25vdGUpe1xyXG5cdFx0aWYodGZpbGU9PW51bGwpe3JldHVybiBbXTt9XHJcblxyXG5cdFx0bGV0IHJlcyA9IG5ldyBBcnJheSgpO1xyXG5cclxuXHRcdGxldCBkdl9hcGkgPSAodGhpcy5hcHAgYXMgYW55KS5wbHVnaW5zLmdldFBsdWdpbihcImRhdGF2aWV3XCIpO1xyXG5cclxuXHRcdGxldCBpbmxpbmtzID0gZHZfYXBpLmluZGV4LmxpbmtzLmludk1hcC5nZXQodGZpbGUucGF0aCk7XHJcblx0XHRpZihpbmxpbmtzPT11bmRlZmluZWQpe1xyXG5cdFx0XHRyZXR1cm4gW107XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIEFycmF5LmZyb20oaW5saW5rcykubWFwKFxyXG5cdFx0XHRcdChwYXRoOnN0cmluZyk9PigodGhpcy5hcHAudmF1bHQgYXMgYW55KS5maWxlTWFwW3BhdGhdKVxyXG5cdFx0XHQpLmZpbHRlcihcclxuXHRcdFx0XHQoaXRlbTpzdHJpbmcpPT4oaXRlbSlcclxuXHRcdFx0KVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0X291dGxpbmtzKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdGlmKHRmaWxlPT1udWxsKXtyZXR1cm4gW107fVxyXG5cdFx0bGV0IGR2X2FwaSA9ICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMuZ2V0UGx1Z2luKFwiZGF0YXZpZXdcIik7XHJcblx0XHRsZXQgaW5saW5rcyA9IGR2X2FwaS5pbmRleC5saW5rcy5tYXAuZ2V0KHRmaWxlLnBhdGgpO1xyXG5cdFx0aWYoaW5saW5rcz09dW5kZWZpbmVkKXtcclxuXHRcdFx0cmV0dXJuIFtdO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHJldHVybiBBcnJheS5mcm9tKGlubGlua3MpLm1hcChcclxuXHRcdFx0XHQocGF0aDpzdHJpbmcpPT4oKHRoaXMuYXBwLnZhdWx0IGFzIGFueSkuZmlsZU1hcFtwYXRoXSlcclxuXHRcdFx0KS5maWx0ZXIoXHJcblx0XHRcdFx0KGl0ZW06c3RyaW5nKT0+KGl0ZW0pXHJcblx0XHRcdClcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGdldF9saW5rcyh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRsZXQgaW5saW5rcyA9IHRoaXMuZ2V0X2lubGlua3ModGZpbGUpO1xyXG5cdFx0bGV0IG91dGxpbmtzID0gdGhpcy5nZXRfb3V0bGlua3ModGZpbGUpO1xyXG5cdFx0Zm9yKGxldCBsaW5rIG9mIGlubGlua3Mpe1xyXG5cdFx0XHRpZighb3V0bGlua3MuaW5jbHVkZXMobGluaykpe1xyXG5cdFx0XHRcdG91dGxpbmtzLnB1c2gobGluaylcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG91dGxpbmtzO1xyXG5cdH1cclxuXHJcblx0Z2V0X2Jyb3RoZXJzKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdGlmKHRmaWxlJiZ0ZmlsZS5wYXJlbnQpe1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRfdGZpbGVzX29mX2ZvbGRlcih0ZmlsZS5wYXJlbnQsZmFsc2UpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHJldHVybiBbXTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdH1cclxuXHJcblx0Z2V0X3VuY2xlcyh0ZmlsZTpURmlsZSl7XHJcblx0XHRpZih0ZmlsZSAmJiB0ZmlsZS5wYXJlbnQgJiYgdGZpbGUucGFyZW50LnBhcmVudCl7XHJcblx0XHRcdGxldCBmb2xkZXIgPSB0ZmlsZS5wYXJlbnQucGFyZW50O1xyXG5cdFx0XHRyZXR1cm4gZm9sZGVyLmNoaWxkcmVuLmZpbHRlcihcclxuXHRcdFx0XHQoeDpUQWJzdHJhY3RGaWxlKT0+eCBpbnN0YW5jZW9mIFRGaWxlXHJcblx0XHRcdClcclxuXHRcdH1cclxuXHRcdHJldHVybiBbXVxyXG5cdH1cclxuXHJcblx0Z2V0X3RmaWxlc19vZl9mb2xkZXIodGZvbGRlcjpURm9sZGVyfG51bGwsd2l0aF9jaGlsZHJlbj1mYWxzZSk6YW55e1xyXG5cdFx0aWYodGZvbGRlcj09bnVsbCl7cmV0dXJuIFtdO31cclxuXHRcdGxldCBub3RlcyA9IFtdO1xyXG5cdFx0Zm9yKGxldCBjIG9mIHRmb2xkZXIuY2hpbGRyZW4pe1xyXG5cdFx0XHRpZihjIGluc3RhbmNlb2YgVEZpbGUgJiYgYy5leHRlbnNpb249PT0nbWQnKXtcclxuXHRcdFx0XHRub3Rlcy5wdXNoKGMpO1xyXG5cdFx0XHR9ZWxzZSBpZihjIGluc3RhbmNlb2YgVEZvbGRlciAmJiB3aXRoX2NoaWxkcmVuKXtcclxuXHRcdFx0XHRsZXQgdG1wID0gdGhpcy5nZXRfdGZpbGVzX29mX2ZvbGRlcihjKTtcclxuXHRcdFx0XHRmb3IobGV0IHggb2YgdG1wKXtcclxuXHRcdFx0XHRcdG5vdGVzLnB1c2goeCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbm90ZXM7XHJcblxyXG5cdH1cclxuXHJcblx0aW5kZXhPZkZvbGRlcih0ZmlsZTpURm9sZGVyLHRmaWxlczpBcnJheTxURmlsZT4pe1xyXG5cdFx0bGV0IGZub3RlID0gdGhpcy50cF9maW5kX3RmaWxlKHRmaWxlLm5hbWUrJy5tZCcpO1xyXG5cdFx0aWYoIWZub3RlKXtyZXR1cm4gLTE7fVxyXG5cdFx0bGV0IG1zZyA9IHRoaXMucGx1Z2luLmVkaXRvci5nZXRfZnJvbnRtYXR0ZXIoXHJcblx0XHRcdGZub3RlLFwiRm9sZGVyUHJldk5vdGVcIlxyXG5cdFx0KTtcclxuXHRcdGlmKCFtc2cpe3JldHVybiAtMTt9XHJcblx0XHRsZXQgaXRlbXMgPSBtc2cuc3BsaXQoXCJdXStcIik7XHJcblx0XHRsZXQgYW5jaG9yID0gdGhpcy5nZXRfdGZpbGUoaXRlbXNbMF0uc2xpY2UoMikpO1xyXG5cdFx0aWYoIWFuY2hvcil7cmV0dXJuIC0xO31cclxuXHRcdGxldCBpZHggPSB0ZmlsZXMuaW5kZXhPZihhbmNob3IpO1xyXG5cdFx0aWYoaXRlbXMubGVuZ3RoPT0yKXtcclxuXHRcdFx0aWR4ID0gaWR4ICsgcGFyc2VGbG9hdChpdGVtc1sxXSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gaWR4O1xyXG5cdH1cclxuXHJcblx0dGZpbGVfdG9fc3RyaW5nKHRmaWxlOlRGaWxlKXtcclxuXHRcdGxldCBjdXJyID0gdGhpcy5jdXJyZW50X25vdGU7XHJcblx0XHRsZXQgbXNnID0gJyc7XHJcblx0XHRpZih0ZmlsZS5wYXJlbnQ9PWN1cnI/LnBhcmVudCl7XHJcblx0XHRcdG1zZyA9IHRmaWxlLmJhc2VuYW1lO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdG1zZyA9IHRmaWxlLnBhdGg7XHJcblx0XHR9XHJcblx0XHRpZih0ZmlsZT09dGhpcy5jdXJyZW50X25vdGUpe1xyXG5cdFx0XHRyZXR1cm4gYFx1RDgzQ1x1REZFMCAke21zZ31gXHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIG1zZztcclxuXHRcdH1cclxuXHRcdFxyXG5cdH1cclxuXHJcblx0YXN5bmMgc3VnZ2VzdGVyX25vdGVzKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlLGN1cnJfZmlyc3Q9dHJ1ZSxzbW9kZT0nJyl7XHJcblx0XHRpZih0ZmlsZSl7dGZpbGU9PXRoaXMuY3VycmVudF9ub3RlO31cclxuXHRcdGxldCBrdiA9IFtcdFx0XHRcclxuXHRcdFx0J1x1NTQwQ1x1N0VBN1x1N0IxNFx1OEJCMCcsXHJcblx0XHRcdCdcdTdCMTRcdThCQjBcdTk0RkVcdTY3NjEnLFxyXG5cdFx0XHQnXHU0RTBBXHU3RUE3XHU3QjE0XHU4QkIwJyxcclxuXHRcdFx0J1x1NTQwQ1x1N0VBN1x1N0IxNFx1OEJCMCtcdTVCNTBcdTc2RUVcdTVGNTUnLFxyXG5cdFx0XHQnXHU1MUZBXHU5NEZFK1x1NTE2NVx1OTRGRScsXHJcblx0XHRcdCdcdTUxNjVcdTk0RkUnLFxyXG5cdFx0XHQnXHU1MUZBXHU5NEZFJyxcclxuXHRcdFx0J1x1NjI0MFx1NjcwOVx1N0IxNFx1OEJCMCcsXHJcblx0XHRcdCdyZWNlbnQtZmlsZXMtb2JzaWRpYW4nXHJcblx0XHRdXHJcblx0XHRcclxuXHRcdGlmKGN1cnJfZmlyc3Qpe1xyXG5cdFx0XHRrdi51bnNoaWZ0KCdcdTVGNTNcdTUyNERcdTdCMTRcdThCQjAnKVxyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGt2LnB1c2goJ1x1NUY1M1x1NTI0RFx1N0IxNFx1OEJCMCcpXHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGxldCBrdnMgPSBbXVxyXG5cdFx0bGV0IGkgPSAxO1xyXG5cdFx0Zm9yKGxldCB4IG9mIGt2KXtcclxuXHRcdFx0a3ZzLnB1c2goYCR7aSsrfSAke3h9YCk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IG1vZGUgPSAnJztcclxuXHRcdGlmKGt2LmNvbnRhaW5zKHNtb2RlKSl7XHJcblx0XHRcdG1vZGUgPSBzbW9kZTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRtb2RlID0gYXdhaXQgdGhpcy50cF9zdWdnZXN0ZXIoa3ZzLGt2KTtcclxuXHRcdH1cclxuXHRcdGlmKG1vZGU9PT0nXHU1RjUzXHU1MjREXHU3QjE0XHU4QkIwJyl7XHJcblx0XHRcdHJldHVybiBbdGZpbGVdO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdcdTU0MENcdTdFQTdcdTdCMTRcdThCQjAnKXtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0X2Jyb3RoZXJzKHRmaWxlKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0nXHU1NDBDXHU3RUE3XHU3QjE0XHU4QkIwK1x1NUI1MFx1NzZFRVx1NUY1NScpe1xyXG5cdFx0XHRpZih0ZmlsZT8ucGFyZW50KXtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5nZXRfdGZpbGVzX29mX2ZvbGRlcih0ZmlsZS5wYXJlbnQsdHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0nXHU1MUZBXHU5NEZFK1x1NTE2NVx1OTRGRScpe1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRfbGlua3ModGZpbGUpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdcdTUxNjVcdTk0RkUnKXtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0X2lubGlua3ModGZpbGUpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdcdTUxRkFcdTk0RkUnKXtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0X291dGxpbmtzKHRmaWxlKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0nXHU2MjQwXHU2NzA5XHU3QjE0XHU4QkIwJyl7XHJcblx0XHRcdHJldHVybiB0aGlzLmdldF9hbGxfdGZpbGVzKCk7XHJcblx0XHR9ZWxzZSBpZihtb2RlPT09J3JlY2VudC1maWxlcy1vYnNpZGlhbicpe1xyXG5cdFx0XHRsZXQgciA9ICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnMuZ2V0UGx1Z2luKFwicmVjZW50LWZpbGVzLW9ic2lkaWFuXCIpO1xyXG5cdFx0XHRpZighcil7cmV0dXJuIFtdO31cclxuXHRcdFx0cmV0dXJuIE9iamVjdC52YWx1ZXMoXHJcblx0XHRcdFx0ci5kYXRhLnJlY2VudEZpbGVzKS5tYXAoKGY6VEFic3RyYWN0RmlsZSk9Pih0aGlzLmFwcC52YXVsdCBhcyBhbnkpLmZpbGVNYXBbZi5wYXRoXVxyXG5cdFx0XHQpLmZpbHRlcihmPT5mKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0nXHU0RTBBXHU3RUE3XHU3QjE0XHU4QkIwJyl7XHJcblx0XHRcdGlmKHRmaWxlKXtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5nZXRfdW5jbGVzKHRmaWxlKTtcclxuXHRcdFx0fVxyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdcdTdCMTRcdThCQjBcdTk0RkVcdTY3NjEnKXtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0X2NoYWluKFxyXG5cdFx0XHRcdHRmaWxlLFxyXG5cdFx0XHRcdE51bWJlcih0aGlzLnBsdWdpbi5zZXR0aW5ncy5QcmV2Q2hhaW4pLFxyXG5cdFx0XHRcdE51bWJlcih0aGlzLnBsdWdpbi5zZXR0aW5ncy5OZXh0Q2hhaW4pXHJcblx0XHRcdCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIFtdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdC8vIENoYWluXHJcblx0Z2V0X3ByZXZfbm90ZSh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRpZighdGZpbGUpe3JldHVybjt9XHJcblx0XHRpZigodGZpbGUgYXMgYW55KS5kZWxldGVkKXtcclxuXHRcdFx0bGV0IHRmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdFx0XHJcblx0XHRcdHRmaWxlcy5maWx0ZXIoZj0+YFtbJHt0ZmlsZS5iYXNlbmFtZX1dXWA9PT10aGlzLnBsdWdpbi5lZGl0b3IuZ2V0X2Zyb250bWF0dGVyKGYsXCJOZXh0Tm90ZVwiKSlcclxuXHRcdFx0dGZpbGVzID0gdGZpbGVzLmZpbHRlcihmPT5gW1ske3RmaWxlLmJhc2VuYW1lfV1dYD09PXRoaXMuZWRpdG9yLmdldF9mcm9udG1hdHRlcihmLHRoaXMubmV4dCkpO1xyXG5cdFx0XHRpZih0ZmlsZXMubGVuZ3RoPjApe1xyXG5cdFx0XHRcdHJldHVybiB0ZmlsZXNbMF07XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bGV0IG5hbWUgPSB0aGlzLmVkaXRvci5nZXRfZnJvbnRtYXR0ZXIodGZpbGUsdGhpcy5wcmV2KTtcclxuXHRcdFx0aWYoIW5hbWUpe3JldHVybiBudWxsO31cclxuXHJcblx0XHRcdGxldCBub3RlID0gdGhpcy5nZXRfdGZpbGUobmFtZSk7XHJcblx0XHRcdHJldHVybiBub3RlP25vdGU6bnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdH1cclxuXHJcblx0b3Blbl9wcmV2X25vdGVzKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdGxldCBub3RlID0gdGhpcy5nZXRfcHJldl9ub3RlKHRmaWxlKTtcclxuXHRcdHRoaXMub3Blbl9ub3RlKG5vdGUpO1xyXG5cdH1cclxuXHJcblx0Z2V0X25leHRfbm90ZSh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRpZighdGZpbGUpe3JldHVybiBudWxsO31cclxuXHRcdGlmKCh0ZmlsZSBhcyBhbnkpLmRlbGV0ZWQpe1xyXG5cdFx0XHRsZXQgdGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xyXG5cdFx0XHR0ZmlsZXMgPSB0ZmlsZXMuZmlsdGVyKGY9PmBbWyR7dGZpbGUuYmFzZW5hbWV9XV1gPT09dGhpcy5lZGl0b3IuZ2V0X2Zyb250bWF0dGVyKGYsdGhpcy5wcmV2KSk7XHJcblx0XHRcdGlmKHRmaWxlcy5sZW5ndGg+MCl7XHJcblx0XHRcdFx0cmV0dXJuIHRmaWxlc1swXTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH1lbHNle1xyXG5cdFx0XHRsZXQgbmFtZSA9IHRoaXMuZWRpdG9yLmdldF9mcm9udG1hdHRlcih0ZmlsZSx0aGlzLm5leHQpO1xyXG5cdFx0XHRpZighbmFtZSl7cmV0dXJuIG51bGw7fVxyXG5cclxuXHRcdFx0bGV0IG5vdGUgPSB0aGlzLmdldF90ZmlsZShuYW1lKTtcclxuXHRcdFx0cmV0dXJuIG5vdGU/bm90ZTpudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b3Blbl9uZXh0X25vdGVzKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdGxldCBub3RlID0gdGhpcy5nZXRfbmV4dF9ub3RlKHRmaWxlKTtcclxuXHRcdHRoaXMub3Blbl9ub3RlKG5vdGUpO1xyXG5cdH1cclxuXHJcblx0Z2V0X2NoYWluKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlLHByZXY9MTAsbmV4dD0xMCx3aXRoX3NlbGY9dHJ1ZSl7XHJcblx0XHRpZih0ZmlsZT09bnVsbCl7cmV0dXJuIFtdO31cclxuXHRcdFxyXG5cdFx0bGV0IHJlcyA9IG5ldyBBcnJheSgpO1xyXG5cdFx0aWYod2l0aF9zZWxmKXtcclxuXHRcdFx0cmVzLnB1c2godGZpbGUpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRsZXQgdG1wID0gdGZpbGU7XHJcblx0XHRmb3IobGV0IGk9cHJldjtpIT0wO2ktLSl7XHRcclxuXHRcdFx0bGV0IG5vdGUgPSB0aGlzLmdldF9wcmV2X25vdGUodG1wKTtcclxuXHRcdFx0aWYoIW5vdGUpe1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9ZWxzZSBpZihyZXMuaW5jbHVkZXMobm90ZSkpe1xyXG5cdFx0XHRcdC8vIFx1NkJDRlx1NkIyMVx1ODFFQVx1NTJBOFx1NTIyMFx1OTY2NFx1NUZBQVx1NzNBRlx1OTRGRVx1NjNBNVxyXG5cdFx0XHRcdHRoaXMuZWRpdG9yLnNldF9mcm9udG1hdHRlcihub3RlLHRoaXMubmV4dCxcIlwiKTtcclxuXHRcdFx0XHR0aGlzLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIodG1wLHRoaXMucHJldixcIlwiKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0cmVzLnVuc2hpZnQobm90ZSk7XHJcblx0XHRcdFx0dG1wID0gbm90ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFxyXG5cdFx0dG1wID0gdGZpbGU7XHJcblx0XHRmb3IobGV0IGk9bmV4dDtpIT0wO2ktLSl7XHJcblx0XHRcdGxldCBub3RlID0gdGhpcy5nZXRfbmV4dF9ub3RlKHRtcCk7XHJcblx0XHRcdGlmKCFub3RlKXtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fWVsc2UgaWYocmVzLmluY2x1ZGVzKG5vdGUpKXtcclxuXHRcdFx0XHQvLyBcdTZCQ0ZcdTZCMjFcdTgxRUFcdTUyQThcdTUyMjBcdTk2NjRcdTVGQUFcdTczQUZcdTk0RkVcdTYzQTVcclxuXHRcdFx0XHR0aGlzLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIobm90ZSx0aGlzLnByZXYsXCJcIik7XHJcblx0XHRcdFx0dGhpcy5lZGl0b3Iuc2V0X2Zyb250bWF0dGVyKHRtcCx0aGlzLm5leHQsXCJcIik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHJlcy5wdXNoKG5vdGUpO1xyXG5cdFx0XHRcdHRtcCA9IG5vdGU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXM7XHJcblx0fVxyXG5cclxuXHRnZXRfZmlyc3Rfbm90ZSh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRsZXQgbm90ZXMgPSB0aGlzLmdldF9jaGFpbih0ZmlsZSwtMSwwLGZhbHNlKTtcclxuXHRcdGlmKG5vdGVzLmxlbmd0aD4wKXtcclxuXHRcdFx0cmV0dXJuIG5vdGVzWzBdO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0X2xhc3Rfbm90ZSh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRsZXQgbm90ZXMgPSB0aGlzLmdldF9jaGFpbih0ZmlsZSwwLC0xLGZhbHNlKTtcclxuXHRcdGlmKG5vdGVzLmxlbmd0aD4wKXtcclxuXHRcdFx0cmV0dXJuIG5vdGVzW25vdGVzLmxlbmd0aC0xXTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGdldF9uZWlnaGJvcnModGZpbGU9dGhpcy5jdXJyZW50X25vdGUpe1xyXG5cdFx0cmV0dXJuIFtcclxuXHRcdFx0dGhpcy5nZXRfcHJldl9ub3RlKHRmaWxlKSxcclxuXHRcdFx0dGhpcy5nZXRfbmV4dF9ub3RlKHRmaWxlKSxcclxuXHRcdF1cclxuXHR9XHJcblx0XHJcblx0YXN5bmMgY2hhaW5fc2V0X3ByZXYodGZpbGU6VEZpbGUscHJldjpURmlsZXxudWxsKXtcclxuXHRcdGlmKHRmaWxlPT1udWxsIHx8IHRmaWxlPT1wcmV2KXtyZXR1cm47fVxyXG5cdFx0dGhpcy5wbHVnaW4uY29uc29sZV9sb2coJ2NoYWluX3NldF9wcmV2OicsdGZpbGUuYmFzZW5hbWUscHJldj8uYmFzZW5hbWUpO1xyXG5cdFx0aWYocHJldj09bnVsbCApe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIoXHJcblx0XHRcdFx0dGZpbGUsdGhpcy5wcmV2LCcnXHJcblx0XHRcdCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0YXdhaXQgdGhpcy5lZGl0b3Iuc2V0X2Zyb250bWF0dGVyKFxyXG5cdFx0XHRcdHRmaWxlLHRoaXMucHJldixgW1ske3ByZXYuYmFzZW5hbWV9XV1gXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBjaGFpbl9zZXRfbmV4dCh0ZmlsZTpURmlsZSxuZXh0OlRGaWxlfG51bGwpe1xyXG5cdFx0aWYodGZpbGU9PW51bGwgfHwgdGZpbGU9PW5leHQpe3JldHVybjt9XHJcblx0XHR0aGlzLnBsdWdpbi5jb25zb2xlX2xvZygnY2hhaW5fc2V0X25leHQ6Jyx0ZmlsZS5iYXNlbmFtZSxuZXh0Py5iYXNlbmFtZSk7XHJcblx0XHRpZihuZXh0PT1udWxsICl7XHJcblx0XHRcdGF3YWl0IHRoaXMuZWRpdG9yLnNldF9mcm9udG1hdHRlcihcclxuXHRcdFx0XHR0ZmlsZSx0aGlzLm5leHQsJydcclxuXHRcdFx0KTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRhd2FpdCB0aGlzLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIoXHJcblx0XHRcdFx0dGZpbGUsdGhpcy5uZXh0LGBbWyR7bmV4dC5iYXNlbmFtZX1dXWBcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX3NldF9wcmV2X25leHQocHJldjpURmlsZSxuZXh0OlRGaWxlKXtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X3ByZXYobmV4dCxwcmV2KTtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X25leHQocHJldixuZXh0KTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX2NvbmNhdF90ZmlsZXModGZpbGVzOkFycmF5PFRGaWxlPil7XHJcblx0XHQvLyBcdTZFMDVcdTk2NjRcdTgxRUFcdTk1RURcdTczQUZcclxuXHRcdGxldCBwcmV2ID0gdGhpcy5nZXRfcHJldl9ub3RlKHRmaWxlc1swXSk7XHJcblx0XHRpZih0ZmlsZXMuY29udGFpbnMocHJldikpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNoYWluX3NldF9wcmV2KHRmaWxlc1swXSxudWxsKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBcdTZFMDVcdTk2NjRcdTgxRUFcdTk1RURcdTczQUZcclxuXHRcdGxldCBuZXh0ID0gdGhpcy5nZXRfbmV4dF9ub3RlKHRmaWxlc1t0ZmlsZXMubGVuZ3RoLTFdKTtcclxuXHRcdGlmKHRmaWxlcy5jb250YWlucyhuZXh0KSl7XHJcblx0XHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X25leHQodGZpbGVzW3RmaWxlcy5sZW5ndGgtMV0sbnVsbCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZvcihsZXQgaT0wO2k8dGZpbGVzLmxlbmd0aC0xO2krKyl7XHJcblx0XHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X3ByZXZfbmV4dCh0ZmlsZXNbaV0sdGZpbGVzW2krMV0pXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBjaGFpbl9wb3Bfbm9kZSh0ZmlsZTpURmlsZSl7XHJcblx0XHRsZXQgbm90ZXMgPSB0aGlzLmdldF9uZWlnaGJvcnModGZpbGUpO1xyXG5cdFx0YXdhaXQgdGhpcy5jaGFpbl9zZXRfcHJldl9uZXh0KG5vdGVzWzBdLG5vdGVzWzFdKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX2luc2VydF9ub2RlX2FzX2hlYWQodGZpbGU6VEZpbGUsYW5jaG9yOlRGaWxlKXtcclxuXHRcdGxldCBoZWFkID0gdGhpcy5nZXRfZmlyc3Rfbm90ZShhbmNob3IpO1xyXG5cdFx0YXdhaXQgdGhpcy5jaGFpbl9zZXRfcHJldl9uZXh0KHRmaWxlLGhlYWQpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY2hhaW5faW5zZXJ0X25vZGVfYXNfdGFpbCh0ZmlsZTpURmlsZSxhbmNob3I6VEZpbGUpe1xyXG5cdFx0bGV0IHRhaWwgPSB0aGlzLmdldF9sYXN0X25vdGUoYW5jaG9yKTtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X3ByZXZfbmV4dCh0YWlsLHRmaWxlKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX2luc2VydF9ub2RlX2FmdGVyKHRmaWxlOlRGaWxlLGFuY2hvcjpURmlsZSl7XHJcblx0XHRsZXQgdCA9IHRoaXM7XHJcblx0XHRjb25zb2xlLmxvZyh0aGlzKTtcclxuXHRcdHQucGx1Z2luLmNvbnNvbGVfbG9nKHQpO1xyXG5cdFx0YXdhaXQgdC5jaGFpbl9wb3Bfbm9kZSh0ZmlsZSk7XHJcblx0XHRsZXQgbmV4dCA9IHRoaXMuZ2V0X25leHRfbm90ZShhbmNob3IpO1xyXG5cdFx0YXdhaXQgdGhpcy5jaGFpbl9jb25jYXRfdGZpbGVzKFthbmNob3IsdGZpbGUsbmV4dF0pO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY2hhaW5faW5zZXJ0X25vZGVfYmVmb3JlKHRmaWxlOlRGaWxlLGFuY2hvcjpURmlsZSl7XHJcblx0XHRhd2FpdCB0aGlzLmNoYWluX3BvcF9ub2RlKHRmaWxlKTtcclxuXHRcdGxldCBwcmV2ID0gdGhpcy5nZXRfcHJldl9ub3RlKGFuY2hvcik7XHJcblx0XHRhd2FpdCB0aGlzLmNoYWluX2NvbmNhdF90ZmlsZXMoW3ByZXYsdGZpbGUsYW5jaG9yXSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjaGFpbl9pbnNlcnRfZm9sZGVyX2FmdGVyKHRmaWxlOlRGaWxlLGFuY2hvcjpURmlsZSl7XHJcblx0XHRpZighdGZpbGUucGFyZW50IHx8IHRmaWxlLnBhcmVudC5wYXJlbnQhPWFuY2hvci5wYXJlbnQpe1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRsZXQgbm90ZSA9IHRoaXMuZ2V0X3RmaWxlKHRmaWxlLnBhcmVudC5uYW1lKTtcclxuXHRcdGlmKCFub3RlKXtcclxuXHRcdFx0Y29uc29sZS5sb2coJ1x1OTcwMFx1ODk4MVx1ODk4MVx1NTE0OFx1NTIxQlx1NUVGQVx1NTQwQ1x1NTQwRFx1N0IxNFx1OEJCMCcpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5lZGl0b3Iuc2V0X2Zyb250bWF0dGVyKFxyXG5cdFx0XHRub3RlLFwiRm9sZGVyUHJldk5vdGVcIixgW1ske2FuY2hvci5iYXNlbmFtZX1dXSswLjVgXHJcblx0XHQpXHJcblx0fVxyXG5cdFxyXG5cdGFzeW5jIGNoYWluX3N1Z2dlc3Rlcl90ZmlsZXModGZpbGU9dGhpcy5jdXJyZW50X25vdGUsbW9kZT0nc3VnZ2VzdGVyJyl7XHJcblx0XHRsZXQgbm90ZXMgPSB0aGlzLmdldF9icm90aGVycyh0ZmlsZSk7XHJcblx0XHRpZihub3Rlcy5sZW5ndGg9PTApe3JldHVybjt9XHJcblxyXG5cdFx0bGV0IGZpbGVzID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXJfc29ydChub3Rlcyk7XHJcblx0XHRhd2FpdCB0aGlzLmNoYWluX2NvbmNhdF90ZmlsZXMoZmlsZXMpO1xyXG5cdH1cclxuXHJcblx0c29ydF90ZmlsZXMoZmlsZXM6QXJyYXk8VEZpbGU+LGZpZWxkOmFueSk6YW55e1xyXG5cdFx0aWYodHlwZW9mIGZpZWxkID09PSAnc3RyaW5nJyl7XHJcblx0XHRcdGlmKGZpZWxkPT09J25hbWUnKXtcclxuXHRcdFx0XHRyZXR1cm4gZmlsZXMuc29ydChcclxuXHRcdFx0XHRcdChhLGIpPT4oYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9ZWxzZSBpZihmaWVsZD09PSdtdGltZScpe1xyXG5cdFx0XHRcdHJldHVybiBmaWxlcy5zb3J0KFxyXG5cdFx0XHRcdFx0KGEsYik9PihhLnN0YXQubXRpbWUtYi5zdGF0Lm10aW1lKVxyXG5cdFx0XHRcdClcclxuXHRcdFx0fWVsc2UgaWYoZmllbGQ9PT0nY3RpbWUnKXtcclxuXHRcdFx0XHRyZXR1cm4gZmlsZXMuc29ydChcclxuXHRcdFx0XHRcdChhLGIpPT4oYS5zdGF0LmN0aW1lLWIuc3RhdC5jdGltZSlcclxuXHRcdFx0XHQpXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZihmaWVsZD09PSdjaGFpbicpe1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLnNvcnRfdGZpbGVzX2J5X2NoYWluKGZpbGVzKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZmlsZXM7XHJcblx0XHR9ZWxzZSBpZih0eXBlb2YgZmllbGQgPT09ICdvYmplY3QnKXtcclxuXHRcdFx0aWYoZmllbGQgaW5zdGFuY2VvZiBBcnJheSl7XHJcblx0XHRcdFx0bGV0IG5maWxlcyA9IHRoaXMuc29ydF90ZmlsZXMoZmlsZXMsZmllbGRbMF0pO1xyXG5cdFx0XHRcdGlmKGZpZWxkLmxlbmd0aD49Mil7XHJcblx0XHRcdFx0XHRpZihmaWVsZFsxXT09PSd4Jyl7XHJcblx0XHRcdFx0XHRcdHJldHVybiBuZmlsZXMucmV2ZXJzZSgpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBuZmlsZXM7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBmaWxlcztcclxuXHR9XHJcblx0XHJcblx0c29ydF90ZmlsZXNfYnlfY2hhaW4odGZpbGVzOkFycmF5PFRBYnN0cmFjdEZpbGU+KXtcclxuXHRcdGxldCBub3RlcyA9IHRmaWxlcy5maWx0ZXIoZj0+ZiBpbnN0YW5jZW9mIFRGaWxlKSBhcyBURmlsZVtdO1xyXG5cdFx0bGV0IHJlcyA9IFtdIGFzIFRBYnN0cmFjdEZpbGVbXTtcclxuXHRcdHdoaWxlKG5vdGVzLmxlbmd0aD4wKXtcclxuXHRcdFx0bGV0IG5vdGUgPSBub3Rlc1swXTtcclxuXHRcdFx0bGV0IHhjaGFpbiA9IHRoaXMuZ2V0X2NoYWluKG5vdGUsLTEsLTEpO1xyXG5cdFx0XHRmb3IobGV0IHggb2YgeGNoYWluKXtcclxuXHRcdFx0XHRpZihub3Rlcy5jb250YWlucyh4KSl7XHJcblx0XHRcdFx0XHRyZXMucHVzaCh4KTtcclxuXHRcdFx0XHRcdG5vdGVzLnJlbW92ZSh4KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGxldCBmb2xkZXJzID0gdGZpbGVzLmZpbHRlcihmPT5mIGluc3RhbmNlb2YgVEZvbGRlcikgYXMgVEZvbGRlcltdO1xyXG5cdFx0aWYoZm9sZGVycy5sZW5ndGg+MCl7XHJcblx0XHRcdGxldCBpZHhzID0gZm9sZGVycy5tYXAoXHJcblx0XHRcdFx0KGY6VEZvbGRlcik9PnRoaXMuaW5kZXhPZkZvbGRlcihmLHJlcyBhcyBURmlsZVtdKVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRyZXMucHVzaCguLi5mb2xkZXJzKTtcclxuXHRcdFx0ZnVuY3Rpb24gaW5kZXhPZihmOlRBYnN0cmFjdEZpbGUpe1xyXG5cdFx0XHRcdGlmKGYgaW5zdGFuY2VvZiBURmlsZSl7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzLmluZGV4T2YoZik7XHJcblx0XHRcdFx0fWVsc2UgaWYoZiBpbnN0YW5jZW9mIFRGb2xkZXIpe1xyXG5cdFx0XHRcdFx0cmV0dXJuIGlkeHNbZm9sZGVycy5pbmRleE9mKGYpXTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdHJldHVybiAtMTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmVzID0gcmVzLnNvcnQoKGEsYik9PmluZGV4T2YoYSktaW5kZXhPZihiKSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzO1xyXG5cdH1cclxuXHJcblx0c29ydF90ZmlsZXNfZm9sZGVyX2ZpcnN0KHRmaWxlczpBcnJheTxURmlsZT4pe1xyXG5cdFx0bGV0IEEgPSB0ZmlsZXMuZmlsdGVyKGY9PmYgaW5zdGFuY2VvZiBURm9sZGVyKS5zb3J0KChhLGIpPT4oYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpO1xyXG5cdFx0bGV0IEIgPSB0ZmlsZXMuZmlsdGVyKGY9PmYgaW5zdGFuY2VvZiBURmlsZSk7XHJcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4udXRpbHMuY29uY2F0X2FycmF5KFtBLEJdKTtcclxuXHR9XHJcblxyXG5cdHNvcnRfdGZpbGVzX2J5X2ZpZWxkKHRmaWxlczpBcnJheTxURmlsZT4sZmllbGQ6c3RyaW5nKXtcclxuXHRcdGxldCByZXMgPSB0ZmlsZXMuc29ydChcclxuXHRcdFx0KGEsYik9PntcclxuXHRcdFx0XHRsZXQgYXYgPSB0aGlzLmVkaXRvci5nZXRfZnJvbnRtYXR0ZXIoYSxmaWVsZCk7XHJcblx0XHRcdFx0bGV0IGJ2ID0gdGhpcy5lZGl0b3IuZ2V0X2Zyb250bWF0dGVyKGIsZmllbGQpO1xyXG5cdFx0XHRcdHJldHVybiBhdiAtIGJ2O1xyXG5cdFx0XHR9XHJcblx0XHQpXHJcblx0XHRyZXR1cm4gcmVzO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc3VnZ2VzdGVyX3NvcnQodGZpbGVzOkFycmF5PFRGaWxlPil7XHJcblx0XHRpZighdGZpbGVzKXtyZXR1cm4gW107fVxyXG5cdFx0aWYodGZpbGVzLmxlbmd0aD09MCl7cmV0dXJuIFtdfTtcclxuXHRcdGxldCBrdiA9IHtcclxuXHRcdFx0J2NoYWluJzonY2hhaW4nLFxyXG5cdFx0XHQnbmFtZSc6J25hbWUnLFxyXG5cdFx0XHQnY3RpbWUnOidjdGltZScsXHJcblx0XHRcdCdtdGltZSc6J210aW1lJyxcclxuXHRcdFx0J25hbWUgXHU1MDEyXHU1RThGJzpbJ25hbWUnLCd4J10sXHJcblx0XHRcdCdjdGltZSBcdTUwMTJcdTVFOEYnOlsnY3RpbWUnLCd4J10sXHJcblx0XHRcdCdtdGltZSBcdTUwMTJcdTVFOEYnOlsnbXRpbWUnLCd4J10sXHJcblx0XHR9XHJcblx0XHRsZXQgZmllbGQgPSBhd2FpdCB0aGlzLnRwX3N1Z2dlc3RlcihcclxuXHRcdFx0T2JqZWN0LmtleXMoa3YpLFxyXG5cdFx0XHRPYmplY3QudmFsdWVzKGt2KVxyXG5cdFx0KTtcclxuXHRcdGlmKGZpZWxkPT1udWxsKXtyZXR1cm4gW107fVxyXG5cdFx0aWYoZmllbGQ9PSdjaGFpbicpe1xyXG5cdFx0XHR0ZmlsZXMgPSB0aGlzLnNvcnRfdGZpbGVzKHRmaWxlcywnbmFtZScpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRoaXMuc29ydF90ZmlsZXModGZpbGVzLGZpZWxkKTtcclxuXHR9XHJcblxyXG5cdHZpZXdfc29ydF9ieV9jaGFpbigpe1xyXG5cdFx0bGV0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFxyXG5cdFx0XHRcImZpbGUtZXhwbG9yZXJcIlxyXG5cdFx0KVswXT8udmlldyBhcyBhbnk7XHJcblx0XHRpZighdmlldyl7cmV0dXJuO31cclxuXHRcdHZpZXcuc29ydCgpO1xyXG5cdFx0aWYodmlldy5yZWFkeSl7XHJcblx0XHRcdGZvcihsZXQgcGF0aCBpbiB2aWV3LmZpbGVJdGVtcyl7XHJcblx0XHRcdFx0bGV0IGl0ZW0gPSB2aWV3LmZpbGVJdGVtc1twYXRoXTtcclxuXHRcdFx0XHRpZihpdGVtLnZDaGlsZHJlbil7XHJcblx0XHRcdFx0XHRsZXQgZmlsZXMgPSBpdGVtLnZDaGlsZHJlbi5fY2hpbGRyZW4ubWFwKChmOmFueSk9PmYuZmlsZSk7XHJcblx0XHRcdFx0XHRmaWxlcyA9IHRoaXMuc29ydF90ZmlsZXNfYnlfY2hhaW4oZmlsZXMpO1xyXG5cdFx0XHRcdFx0bGV0IGNoaWxkcmVuID0gaXRlbS52Q2hpbGRyZW4uX2NoaWxkcmVuLnNvcnQoXHJcblx0XHRcdFx0XHRcdChhOmFueSxiOmFueSk9PmZpbGVzLmluZGV4T2YoYS5maWxlKS1maWxlcy5pbmRleE9mKGIuZmlsZSlcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHRcdGl0ZW0udkNoaWxkcmVuLnNldENoaWxkcmVuKGNoaWxkcmVuKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dmlldy50cmVlLmluZmluaXR5U2Nyb2xsLmNvbXB1dGUoKVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcbn0iLCAiaW1wb3J0IHsgXHJcblx0QXBwLFRBYnN0cmFjdEZpbGUsVEZpbGUsVEZvbGRlcixWYXVsdFxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCBOb3RlQ2hhaW5QbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcclxuaW1wb3J0IHtOb3RlQ2hhaW59IGZyb20gXCIuL05vdGVDaGFpblwiO1xyXG5cclxuXHJcbmxldCBjaGFpbl9zb3J0ID0gZnVuY3Rpb24ob3JnX3NvcnQ6RnVuY3Rpb24pIHtcclxuXHRsZXQgcGx1Z2luID0gKGFwcCBhcyBhbnkpLnBsdWdpbnMuZ2V0UGx1Z2luKCdub3RlLWNoYWluJyk7XHJcblx0cmV0dXJuIGZ1bmN0aW9uKC4uLmQ6YW55KXtcclxuXHRcdGlmKHBsdWdpbil7XHJcblx0XHRcdGlmKHBsdWdpbj8uc2V0dGluZ3MuaXNTb3J0RmlsZUV4cGxvcmVyKXtcclxuXHRcdFx0XHR2YXIgZSA9IHRoaXMuZmlsZVxyXG5cdFx0XHRcdCwgdCA9IHRoaXMudmlld1xyXG5cdFx0XHRcdCwgaSA9IGUuY2hpbGRyZW4uc2xpY2UoKTtcclxuXHRcdFx0XHRpID0gaS5maWx0ZXIoKHg6VEFic3RyYWN0RmlsZSk9PngpO1xyXG5cdFx0XHRcdGlmKGkubGVuZ3RoPjApe1xyXG5cdFx0XHRcdFx0bGV0IGl0ZW1zID0gcGx1Z2luLmNoYWluLmNoaWxkcmVuW2lbMF0ucGFyZW50LnBhdGhdO1xyXG5cdFx0XHRcdFx0aWYoaXRlbXMpe1xyXG5cdFx0XHRcdFx0XHRsZXQgYSA9IGl0ZW1zLmZpbHRlcigoeDpUQWJzdHJhY3RGaWxlKT0+aS5jb250YWlucyh4KSk7XHJcblx0XHRcdFx0XHRcdGxldCBiID0gaXRlbXMuZmlsdGVyKCh4OlRBYnN0cmFjdEZpbGUpPT4haS5jb250YWlucyh4KSk7XHJcblx0XHRcdFx0XHRcdGEucHVzaCguLi5iKTtcclxuXHRcdFx0XHRcdFx0aSA9IGE7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmKHBsdWdpbi5zZXR0aW5ncy5pc0ZvbGRlckZpcnN0KXtcclxuXHRcdFx0XHRcdGkgPSBwbHVnaW4uY2hhaW4uc29ydF90ZmlsZXNfZm9sZGVyX2ZpcnN0KGkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRmb3IgKHZhciByID0gW10sIG8gPSAwLCBhID0gaTsgbyA8IGEubGVuZ3RoOyBvKyspIHtcclxuXHRcdFx0XHRcdHZhciBzID0gYVtvXVxyXG5cdFx0XHRcdFx0LCBsID0gdC5maWxlSXRlbXNbcy5wYXRoXTtcclxuXHRcdFx0XHRcdGwgJiYgci5wdXNoKGwpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMudkNoaWxkcmVuLnNldENoaWxkcmVuKHIpXHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHJldHVybiBvcmdfc29ydC5jYWxsKHRoaXMsLi4uZCk7XHJcblx0XHRcdH1cclxuXHRcdH1lbHNle1xyXG5cdFx0XHRyZXR1cm4gb3JnX3NvcnQuY2FsbCh0aGlzLC4uLmQpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE5DRmlsZUV4cGxvcmVye1xyXG5cdHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW47XHJcblx0YXBwOkFwcDtcclxuXHRjaGFpbjpOb3RlQ2hhaW47XHJcblx0b3JnX3NvcnQ6RnVuY3Rpb247XHJcblx0bmV3X3NvcnQ6RnVuY3Rpb247XHJcblx0X0ZvbGRlckRvbV86YW55O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46Tm90ZUNoYWluUGx1Z2luKXtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5jaGFpbiA9IHBsdWdpbi5jaGFpbjtcclxuXHRcdHRoaXMuYXBwID0gcGx1Z2luLmFwcDtcclxuXHRcdHRoaXMucmVnaXN0ZXIoKTtcclxuXHR9XHJcblxyXG5cclxuXHRyZWdpc3Rlcigpe1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCk9PntcclxuXHRcdFx0bGV0IGZvbGRlciA9IG5ldyBURm9sZGVyKFZhdWx0LFwiXCIpO1xyXG5cdFx0XHRsZXQgZG9tID0gKHRoaXMuZmlsZV9leHBsb3JlciBhcyBhbnkpLmNyZWF0ZUZvbGRlckRvbShmb2xkZXIpLmNvbnN0cnVjdG9yO1xyXG5cdFx0XHR0aGlzLl9Gb2xkZXJEb21fID0gZG9tO1xyXG5cdFx0XHR0aGlzLm9yZ19zb3J0ID0gZG9tLnByb3RvdHlwZS5zb3J0O1xyXG5cdFx0XHR0aGlzLm5ld19zb3J0ID0gY2hhaW5fc29ydCh0aGlzLm9yZ19zb3J0KTtcclxuXHRcdFx0dGhpcy5fRm9sZGVyRG9tXy5wcm90b3R5cGUuc29ydCA9IHRoaXMubmV3X3NvcnQ7XHJcblx0XHRcdHRoaXMuc29ydCgpO1xyXG5cdFx0fSlcclxuXHR9XHJcblxyXG5cdHVucmVnaXN0ZXIoKXtcclxuXHRcdGlmKHRoaXMub3JnX3NvcnQpe1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIlJlc2V0IEZpbGVFeHBsb3JlciB0byBvcmlnaW4gc29ydCBmdW5jdGlvbi5cIik7XHJcblx0XHRcdHRoaXMuX0ZvbGRlckRvbV8ucHJvdG90eXBlLnNvcnQgPSB0aGlzLm9yZ19zb3J0O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0IGZpbGVfZXhwbG9yZXIoKXtcclxuXHRcdGxldCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcclxuXHRcdFx0XCJmaWxlLWV4cGxvcmVyXCJcclxuXHRcdClbMF0/LnZpZXc7XHJcblx0XHRyZXR1cm4gdmlldztcclxuXHR9XHJcblx0XHJcblx0YXN5bmMgc29ydChuc2xlZXA9MCl7XHJcblx0XHRpZigodGhpcy5maWxlX2V4cGxvcmVyIGFzIGFueSk/LnNvcnQpe1xyXG5cdFx0XHRpZihuc2xlZXA+MCl7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udXRpbHMuc2xlZXAobnNsZWVwKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnBsdWdpbi5jaGFpbi5pbml0X2NoaWxkcmVuKCk7XHJcblx0XHRcdCh0aGlzLmZpbGVfZXhwbG9yZXIgYXMgYW55KS5zb3J0KCk7XHJcblx0XHR9XHRcclxuXHR9XHJcbn1cclxuXHJcblxyXG5cdCJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FB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QUFXLEVBQ3JCLFFBQVEsV0FBVyxFQUNuQixRQUFRLCtCQUErQixFQUN2QyxRQUFRLFVBQVEsS0FDZixTQUFTLEtBQUssT0FBTyxTQUFTLFNBQVMsRUFDdkMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxPQUFPLFNBQVMsWUFBWTtBQUNqQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDaEMsQ0FBQyxDQUFDO0FBR0osUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsaUJBQWlCLEVBQ3pCLFFBQVEsdUNBQXVDLEVBQy9DO0FBQUEsTUFBVSxVQUFRLEtBQ2pCLFNBQVMsS0FBSyxPQUFPLFNBQVMsZUFBZSxFQUM3QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixhQUFLLE9BQU8sU0FBUyxrQkFBa0I7QUFDdkMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2hDLENBQUM7QUFBQSxJQUNGO0FBQ0YsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsY0FBYyxFQUN0QixRQUFRLG9DQUFvQyxFQUM1QztBQUFBLE1BQVUsVUFBUSxLQUNqQixTQUFTLEtBQUssT0FBTyxTQUFTLFlBQVksRUFDMUMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsZUFBZTtBQUNwQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsQ0FBQztBQUFBLElBQ0Y7QUFBQSxFQUNIO0FBQ0Q7IiwKICAibmFtZXMiOiBbImFwcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgImYiLCAiaW1wb3J0X29ic2lkaWFuIiwgImEiLCAiYXBwIl0KfQo=
