/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => NoteChainPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/NCEditor.ts
var NCEditor = class {
  constructor(app2) {
    this.app = app2;
  }
  async set_frontmatter(tfile, key, value) {
    let prev = this.get_frontmatter(tfile, key);
    if (prev === value) {
      return;
    }
    await this.app.fileManager.processFrontMatter(tfile, (fm) => {
      console.log(`${tfile.basename}---${key}---${value}`);
      fm[key] = value;
    });
  }
  get_frontmatter(tfile, key) {
    let meta = this.app.metadataCache.getFileCache(tfile);
    if (meta == null ? void 0 : meta.frontmatter) {
      return meta.frontmatter[key];
    }
  }
  regexp_link(tfile, mode) {
    if (mode === "link") {
      return new RegExp(`\\[\\[${tfile.basename}\\|?.*\\]\\]`, "g");
    }
    if (mode === "para") {
      return new RegExp(`.*\\[\\[${tfile.basename}\\|?.*\\]\\].*`, "g");
    }
  }
  sleep(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  concat_array(items) {
    if (items == null) {
      return [];
    }
    if (typeof items === "string") {
      return [items];
    }
    if (!(items instanceof Array)) {
      return [items];
    }
    let res = [];
    for (let item of items) {
      if (typeof item === "string") {
        res.push(item);
      } else if (item instanceof Array) {
        res = res.concat(this.concat_array(item));
      } else {
        res.push(item);
      }
    }
    return res;
  }
  async replace(tfile, regex, target) {
    if (typeof regex === "string") {
      await this.app.vault.process(tfile, (data) => {
        if (data.indexOf(regex) > -1) {
          console.log("Replace: ", tfile.path);
          return data.replace(regex, target);
        }
        return data;
      });
    } else if (regex instanceof RegExp) {
      await this.app.vault.process(tfile, (data) => {
        if (data.match(regex)) {
          console.log("Replace: ", tfile.path);
          return data.replace(regex, target);
        }
        return data;
      });
    }
  }
};

// src/NoteChain.ts
var import_obsidian = require("obsidian");

// src/utils.ts
function get_tp_func(app2, target) {
  let templater = app2.plugins.getPlugin(
    "templater-obsidian"
  );
  let items = target.split(".");
  if (items[0].localeCompare("tp") != 0 || items.length != 3) {
    return void 0;
  }
  let modules = templater.templater.functions_generator.internal_functions.modules_array.filter(
    (item) => item.name.localeCompare(items[1]) == 0
  );
  if (modules.length == 0) {
    return void 0;
  }
  return modules[0].static_functions.get(items[2]);
}

// src/NoteChain.ts
var DBChain = class {
  constructor(nc) {
    this.nc = nc;
    this.init_chains();
  }
  init_chains() {
    let tfiles = this.nc.MDFiles;
    this.CHAINS = this.nc.sort_tfiles_by_chain(tfiles);
  }
  indexOf(tfile, debug = false) {
    if (tfile instanceof import_obsidian.TFile) {
      let idx = this.CHAINS.indexOf(tfile);
      return idx;
    } else if (tfile instanceof import_obsidian.TFolder) {
      if (debug) {
        console.log("abc");
      }
      ;
      let fnote = this.nc.find_tfile(tfile.name + ".md");
      if (debug) {
        console.log(fnote);
      }
      ;
      let msg = this.nc.plugin.editor.get_frontmatter(
        fnote,
        "FolderPrevNote"
      );
      if (debug) {
        console.log(msg);
      }
      ;
      if (!msg) {
        return -1;
      }
      let items = msg.split("+");
      let anchor = this.nc.get_tfile(items[0]);
      if (debug) {
        console.log(anchor);
      }
      ;
      if (!anchor) {
        return -1;
      }
      let idx = this.CHAINS.indexOf(anchor);
      if (items.length == 2) {
        idx = idx + parseFloat(items[1]);
      }
      return idx;
    }
    return -1;
  }
  sort_tfiles_by_chain(tfiles) {
    let res = tfiles.sort((a, b) => {
      return this.indexOf(a) - this.indexOf(b);
    });
    return res;
  }
  async chain_insert_node_after(tfile, anchor) {
    this.CHAINS.remove(tfile);
    let idx = this.CHAINS.indexOf(anchor);
    if (idx < 0) {
      this.init_chains();
      idx = this.CHAINS.indexOf(anchor);
    }
    if (idx < 0) {
      return;
    }
    {
      this.CHAINS.splice(idx + 1, 0, tfile);
    }
  }
  async chain_insert_node_before(tfile, anchor) {
    this.CHAINS.remove(tfile);
    let idx = this.CHAINS.indexOf(anchor);
    if (idx < 0) {
      this.init_chains();
      idx = this.CHAINS.indexOf(anchor);
    }
    if (idx < 0) {
      return;
    }
    {
      this.CHAINS.splice(idx, 0, tfile);
    }
  }
};
var NoteChain = class {
  constructor(plugin, prev = "PrevNote", next = "NextNote") {
    this.plugin = plugin;
    this.app = plugin.app;
    this.editor = new NCEditor(this.app);
    this.prev = prev;
    this.next = next;
    this.dbchain = new DBChain(this);
    this.dv_api = this.app.plugins.getPlugin("dataview");
    this.ob = require("obsidian");
    this.app.nc = this.plugin;
  }
  get find_tfile() {
    return get_tp_func(this.app, "tp.file.find_tfile");
  }
  get suggester() {
    return get_tp_func(this.app, "tp.system.suggester");
  }
  get_all_folders(sort_mode = "") {
    return this.app.vault.getAllFolders();
  }
  get_all_tfiles(sort_mode = "") {
    let files = this.app.vault.getMarkdownFiles();
    if (!(sort_mode === "")) {
      this.sort_tfiles(files, sort_mode = sort_mode);
    }
    return files;
  }
  sort_folders_by_mtime(folders, reverse = true) {
    function ufunc(f) {
      return Math.max(
        ...f.children.filter((f2) => f2.basename).map((f2) => f2.stat.mtime)
      );
    }
    let res = folders.sort((a, b) => ufunc(a) - ufunc(b));
    if (reverse) {
      res = res.reverse();
    }
    return res;
  }
  async move_file_to_another_folder(tfile = this.current_note) {
    if (tfile == null) {
      return;
    }
    let folders = this.get_all_folders();
    folders = this.sort_folders_by_mtime(
      folders
    ).filter((f) => f != tfile.parent);
    if (tfile.extension === "md") {
      folders = folders.filter((f) => this.filter_user_ignore(f));
    }
    try {
      let folder = await this.suggester((f) => f.path, folders);
      let dst = folder.path + "/" + tfile.basename + "." + tfile.extension;
      await app.fileManager.renameFile(tfile, dst);
    } catch (error) {
    }
  }
  filter_user_ignore(note) {
    if (!(this.app.vault.config.attachmentFolderPath === "./")) {
      if (note.path.startsWith(
        this.app.vault.config.attachmentFolderPath
      )) {
        return false;
      }
    }
    if (this.app.vault.config.userIgnoreFilters) {
      for (let x of this.app.vault.config.userIgnoreFilters) {
        if (note.path.startsWith(x)) {
          return false;
        }
      }
    }
    return true;
  }
  async sugguster_note() {
    let notes = this.sort_tfiles(
      this.app.vault.getFiles(),
      ["mtime", "x"]
    ).filter((f) => this.filter_user_ignore(f));
    try {
      let note = await this.suggester((f) => f.path, notes);
      return note;
    } catch (error) {
    }
  }
  open_note(tfile, new_tab = false) {
    if (tfile) {
      if (this.app.workspace.activeLeaf.pinned || new_tab) {
        return this.app.workspace.getLeaf(true).openFile(tfile);
      } else {
        return this.app.workspace.activeLeaf.openFile(tfile);
      }
    }
  }
  async sugguster_open_note() {
    try {
      let note = await this.sugguster_note();
      console.log(note);
      this.open_note(note);
    } catch (error) {
    }
  }
  get_tfile(path) {
    let name = path.split("|")[0].replace("[[", "").replace("]]", "");
    return this.find_tfile(name);
  }
  get MDFiles() {
    return app.vault.getMarkdownFiles();
  }
  get current_note() {
    return this.app.workspace.getActiveFile();
  }
  get_inlinks(tfile = this.current_note) {
    if (tfile == null) {
      return [];
    }
    let res = new Array();
    let dv_api = this.app.plugins.getPlugin("dataview");
    let inlinks = dv_api.index.links.invMap.get(tfile.path);
    if (inlinks == void 0) {
      return [];
    } else {
      return Array.from(inlinks).map(
        (path) => this.app.vault.fileMap[path]
      ).filter(
        (item) => item
      );
    }
  }
  get_outlinks(tfile = this.current_note) {
    if (tfile == null) {
      return [];
    }
    let res = new Array();
    let dv_api = this.app.plugins.getPlugin("dataview");
    let inlinks = dv_api.index.links.map.get(tfile.path);
    if (inlinks == void 0) {
      return [];
    } else {
      return Array.from(inlinks).map(
        (path) => this.app.vault.fileMap[path]
      ).filter(
        (item) => item
      );
    }
  }
  get_links(tfile = this.current_note) {
    let inlinks = this.get_inlinks(tfile);
    let outlinks = this.get_outlinks(tfile);
    for (let link of inlinks) {
      if (!outlinks.includes(link)) {
        outlinks.push(link);
      }
    }
    return outlinks;
  }
  get_same_parent(tfile = this.current_note) {
    return this.get_tfiles_of_folder(tfile == null ? void 0 : tfile.parent, false);
  }
  get_tfiles_of_folder(tfolder, with_children = true) {
    if (tfolder == null) {
      return [];
    }
    let notes = [];
    for (let c of tfolder.children) {
      if (c instanceof import_obsidian.TFile && c.extension === "md") {
        notes.push(c);
      } else if (c instanceof import_obsidian.TFolder && with_children) {
        let tmp = this.get_tfiles_of_folder(c);
        for (let x of tmp) {
          notes.push(x);
        }
      }
    }
    return notes;
  }
  parse_item(item) {
    var args = [].slice.call(arguments).slice(1);
    let kwargs = {};
    if (args.length == 1) {
      kwargs = args[0];
    }
    let seq = kwargs["seq"];
    if (seq != null) {
      return `${seq} -> ${item}`;
    }
    return item;
  }
  tfile_to_string(tfile) {
    let curr = this.current_note;
    let msg = "";
    if (tfile.parent == curr.parent) {
      msg = tfile.basename;
    } else {
      msg = tfile.path;
    }
    if (tfile == this.current_note) {
      return `\u{1F3E0} ${msg}`;
    } else {
      return msg;
    }
  }
  parse_items(items) {
    var args = [].slice.call(arguments).slice(1);
    let kwargs = {};
    if (args.length == 1) {
      kwargs = args[0];
    }
    let res = [];
    let i = 0;
    while (i < items.length) {
      if (kwargs["seq"]) {
        res.push(this.parse_item(items[i], { "seq": i + 1 }));
      } else {
        res.push(this.parse_item(items[i]));
      }
      i++;
    }
    return res;
  }
  async suggester_notes(tfile = this.current_note, curr_first = true, smode = "") {
    let kv = [
      "\u540C\u7EA7\u76EE\u5F55",
      "\u7B14\u8BB0\u94FE\u6761",
      "\u540C\u7EA7\u76EE\u5F55+\u5B50\u76EE\u5F55",
      "\u51FA\u94FE+\u5165\u94FE",
      "\u5165\u94FE",
      "\u51FA\u94FE",
      "\u6240\u6709\u7B14\u8BB0",
      "recent-files-obsidian"
    ];
    if (curr_first) {
      kv.unshift("\u5F53\u524D\u7B14\u8BB0");
    } else {
      kv.push("\u5F53\u524D\u7B14\u8BB0");
    }
    let kvs = [];
    let i = 1;
    for (let x of kv) {
      kvs.push(`${i++} ${x}`);
    }
    let mode = "";
    if (kv.contains(smode)) {
      mode = smode;
    } else {
      mode = await this.suggester(kvs, kv);
    }
    if (mode === "\u5F53\u524D\u7B14\u8BB0") {
      return [tfile];
    } else if (mode === "\u540C\u7EA7\u76EE\u5F55") {
      return this.get_same_parent(tfile);
    } else if (mode === "\u540C\u7EA7\u76EE\u5F55+\u5B50\u76EE\u5F55") {
      return this.get_tfiles_of_folder(tfile == null ? void 0 : tfile.parent, true);
    } else if (mode === "\u51FA\u94FE+\u5165\u94FE") {
      return this.get_links(tfile);
    } else if (mode === "\u5165\u94FE") {
      return this.get_inlinks(tfile);
    } else if (mode === "\u51FA\u94FE") {
      return this.get_outlinks(tfile);
    } else if (mode === "\u6240\u6709\u7B14\u8BB0") {
      return this.MDFiles;
    } else if (mode === "recent-files-obsidian") {
      let r = this.app.plugins.getPlugin("recent-files-obsidian");
      if (!r) {
        return [];
      }
      return Object.values(
        r.data.recentFiles
      ).map(
        (f) => this.app.vault.fileMap[f.path]
      ).filter((f) => f);
    } else if (mode === "\u7B14\u8BB0\u94FE\u6761") {
      return this.get_chain(
        tfile,
        Number(this.plugin.settings.PrevChain),
        Number(this.plugin.settings.NextChain)
      );
    } else {
      return [];
    }
  }
  // Chain
  get_prev_note(tfile = this.current_note) {
    if (tfile.deleted) {
      let tfiles = this.app.vault.getMarkdownFiles();
      tfiles = tfiles.filter((f) => `[[${tfile.basename}]]` === this.editor.get_frontmatter(f, this.next));
      if (tfiles.length > 0) {
        return tfile[0];
      } else {
        return null;
      }
    } else {
      let name = this.editor.get_frontmatter(tfile, this.prev);
      if (!name) {
        return null;
      }
      let note = this.get_tfile(name);
      return note ? note : null;
    }
  }
  open_prev_notes(tfile = this.current_note) {
    let note = this.get_prev_note(tfile);
    this.open_note(note);
  }
  get_next_note(tfile = this.current_note) {
    if (tfile.deleted) {
      let tfiles = this.app.vault.getMarkdownFiles();
      tfiles = tfiles.filter((f) => `[[${tfile.basename}]]` === this.editor.get_frontmatter(f, this.prev));
      if (tfiles.length > 0) {
        return tfiles[0];
      } else {
        return null;
      }
    } else {
      let name = this.editor.get_frontmatter(tfile, this.next);
      if (!name) {
        return null;
      }
      let note = this.get_tfile(name);
      return note ? note : null;
    }
  }
  open_next_notes(tfile = this.current_note) {
    let note = this.get_next_note(tfile);
    this.open_note(note);
  }
  get_chain(tfile = this.current_note, prev = 10, next = 10, with_self = true) {
    if (tfile == null) {
      return [];
    }
    let res = new Array();
    if (with_self) {
      res.push(tfile);
    }
    let tmp = tfile;
    for (let i = prev; i != 0; i--) {
      let note = this.get_prev_note(tmp);
      if (!note) {
        break;
      } else if (res.includes(note)) {
        this.editor.set_frontmatter(note, this.next, "");
        this.editor.set_frontmatter(tmp, this.prev, "");
        break;
      } else {
        res.unshift(note);
        tmp = note;
      }
    }
    tmp = tfile;
    for (let i = next; i != 0; i--) {
      let note = this.get_next_note(tmp);
      if (!note) {
        break;
      } else if (res.includes(note)) {
        this.editor.set_frontmatter(note, this.prev, "");
        this.editor.set_frontmatter(tmp, this.next, "");
        break;
      } else {
        res.push(note);
        tmp = note;
      }
    }
    return res;
  }
  get_first_note(tfile = this.current_note) {
    let notes = this.get_chain(tfile, -1, 0, false);
    if (notes.length > 0) {
      return notes[0];
    } else {
      return null;
    }
  }
  get_last_note(tfile = this.current_note) {
    let notes = this.get_chain(tfile, 0, -1, false);
    if (notes.length > 0) {
      return notes[notes.length - 1];
    } else {
      return null;
    }
  }
  get_neighbors(tfile = this.current_note) {
    return [
      this.get_prev_note(tfile),
      this.get_next_note(tfile)
    ];
  }
  async chain_set_prev(tfile, prev) {
    if (tfile == null || tfile == prev) {
      return;
    }
    if (prev == null) {
      await this.editor.set_frontmatter(
        tfile,
        this.prev,
        ""
      );
    } else {
      await this.editor.set_frontmatter(
        tfile,
        this.prev,
        `[[${prev.basename}]]`
      );
    }
  }
  async chain_set_next(tfile, next) {
    if (tfile == null || tfile == next) {
      return;
    }
    if (next == null) {
      await this.editor.set_frontmatter(
        tfile,
        this.next,
        ""
      );
    } else {
      await this.editor.set_frontmatter(
        tfile,
        this.next,
        `[[${next.basename}]]`
      );
    }
  }
  async chain_set_prev_next(prev, next) {
    await this.chain_set_prev(next, prev);
    await this.chain_set_next(prev, next);
  }
  async chain_pop_node(tfile) {
    let notes = this.get_neighbors(tfile);
    await this.chain_set_prev_next(notes[0], notes[1]);
  }
  async chain_insert_node_as_head(tfile, anchor) {
    let head = this.get_first_note(anchor);
    await this.chain_set_prev_next(tfile, head);
  }
  async chain_insert_node_as_tail(tfile, anchor) {
    let tail = this.get_last_note(anchor);
    await this.chain_set_prev_next(tail, tfile);
  }
  async chain_insert_node_after(tfile, anchor) {
    this.chain_pop_node(tfile);
    let next = this.get_next_note(anchor);
    await this.chain_set_prev_next(anchor, tfile);
    await this.chain_set_prev_next(tfile, next);
  }
  async chain_insert_node_before(tfile, anchor) {
    this.chain_pop_node(tfile);
    let prev = this.get_prev_note(anchor);
    await this.chain_set_prev_next(tfile, anchor);
    await this.chain_set_prev_next(prev, tfile);
  }
  async chain_insert_folder_after(tfile, anchor) {
    if (!tfile.parent || tfile.parent.parent != anchor.parent) {
      return;
    }
    let note = this.get_tfile(tfile.parent.name);
    if (!note) {
      console.log("\u9700\u8981\u8981\u5148\u521B\u5EFA\u540C\u540D\u7B14\u8BB0");
      return;
    }
    await this.plugin.editor.set_frontmatter(
      note,
      "FolderPrevNote",
      `[[${anchor.basename}]]+0.5`
    );
  }
  async chain_link_tfiles(tfiles) {
    let prev = this.get_prev_note(tfiles[0]);
    if (tfiles.contains(prev)) {
      await this.chain_set_prev(tfiles[0], null);
    }
    let next = this.get_next_note(tfiles[tfiles.length - 1]);
    if (tfiles.contains(next)) {
      await this.chain_set_next(tfiles[tfiles.length - 1], null);
    }
    for (let i = 0; i < tfiles.length - 1; i++) {
      await this.chain_set_prev_next(tfiles[i], tfiles[i + 1]);
    }
  }
  async chain_suggester_tfiles(tfile = this.current_note, mode = "suggester") {
    let notes = this.get_same_parent(tfile);
    if (notes.length == 0) {
      return;
    }
    let files = await this.suggester_sort(notes);
    await this.chain_link_tfiles(files);
  }
  sort_tfiles(files, field) {
    if (typeof field === "string") {
      if (field === "name") {
        return files.sort(
          (a, b) => a.name.localeCompare(b.name)
        );
      } else if (field === "mtime") {
        return files.sort(
          (a, b) => a.stat.mtime - b.stat.mtime
        );
      } else if (field === "ctime") {
        return files.sort(
          (a, b) => a.stat.ctime - b.stat.ctime
        );
      } else if (field === "chain") {
        return this.sort_tfiles_by_chain(files);
      }
      return files;
    } else if (typeof field === "object") {
      if (field instanceof Array) {
        let nfiles = this.sort_tfiles(files, field[0]);
        if (field.length >= 2) {
          if (field[1] === "x") {
            return nfiles.reverse();
          }
        }
        return nfiles;
      }
    }
    return files;
  }
  sort_tfiles_by_chain(tfiles) {
    let notes = tfiles.map((f) => f);
    let res = [];
    while (notes.length > 0) {
      let note = notes[0];
      let xchain = this.get_chain(note, -1, -1);
      for (let x of xchain) {
        if (notes.contains(x)) {
          res.push(x);
          notes.remove(x);
        }
      }
    }
    return res;
  }
  sort_tfiles_folder_first(tfiles) {
    let A = tfiles.filter((f) => f instanceof import_obsidian.TFolder).sort((a, b) => a.name.localeCompare(b.name));
    let B = tfiles.filter((f) => f instanceof import_obsidian.TFile);
    return this.plugin.editor.concat_array([A, B]);
  }
  sort_tfiles_by_field(tfiles, field) {
    let res = tfiles.sort(
      (a, b) => {
        let av = this.editor.get_frontmatter(a, field);
        let bv = this.editor.get_frontmatter(b, field);
        return av - bv;
      }
    );
    return res;
  }
  async suggester_sort(tfiles) {
    if (!tfiles) {
      return [];
    }
    if (tfiles.length == 0) {
      return [];
    }
    ;
    let kv = {
      "chain": "chain",
      "name": "name",
      "ctime": "ctime",
      "mtime": "mtime",
      "name \u5012\u5E8F": ["name", "x"],
      "ctime \u5012\u5E8F": ["ctime", "x"],
      "mtime \u5012\u5E8F": ["mtime", "x"]
    };
    let field = await this.suggester(
      Object.keys(kv),
      Object.values(kv)
    );
    if (field == null) {
      return [];
    }
    return this.sort_tfiles(tfiles, field);
  }
  view_sort_by_chain() {
    var _a;
    let view = (_a = this.app.workspace.getLeavesOfType(
      "file-explorer"
    )[0]) == null ? void 0 : _a.view;
    if (!view) {
      return;
    }
    view.sort();
    if (view.ready) {
      for (let path in view.fileItems) {
        let item = view.fileItems[path];
        if (item.vChildren) {
          let files = item.vChildren._children.map((f) => f.file);
          files = this.sort_tfiles_by_chain(files);
          let children = item.vChildren._children.sort(
            (a, b) => files.indexOf(a.file) - files.indexOf(b.file)
          );
          item.vChildren.setChildren(children);
        }
      }
      view.tree.infinityScroll.compute();
    }
  }
};

// src/NCFileExplorer.ts
var import_obsidian2 = require("obsidian");
chain_sort = function(org_sort) {
  let plugin = app.plugins.getPlugin("note-chain");
  return function(...d) {
    if (plugin) {
      if (plugin == null ? void 0 : plugin.settings.isSortFileExplorer) {
        var e = this.file, t = this.view, i = e.children.slice();
        i = i.filter((x) => x);
        i = plugin.chain.dbchain.sort_tfiles_by_chain(i);
        if (plugin.settings.isFolderFirst) {
          i = plugin.chain.sort_tfiles_folder_first(i);
        }
        for (var r = [], o = 0, a = i; o < a.length; o++) {
          var s = a[o], l = t.fileItems[s.path];
          l && r.push(l);
        }
        this.vChildren.setChildren(r);
      } else {
        return org_sort.call(this, ...d);
      }
    } else {
      return org_sort.call(this, ...d);
    }
  };
};
chain_sort_v1 = function(org_sort) {
  let plugin = app.plugins.getPlugin("note-chain");
  return function(...d) {
    if (plugin) {
      if (plugin == null ? void 0 : plugin.settings.isSortFileExplorer) {
        var e = this.file, t = this.view, i = e.children.slice();
        i = i.filter((x) => x);
        i = plugin.chain.sort_tfiles_by_chain(i);
        i = plugin.chain.sort_tfiles_folder_first(i);
        for (var r = [], o = 0, a = i; o < a.length; o++) {
          var s = a[o], l = t.fileItems[s.path];
          l && r.push(l);
        }
        this.vChildren.setChildren(r);
      } else {
        return org_sort.call(this, ...d);
      }
    } else {
      return org_sort.call(this, ...d);
    }
  };
};
var NCFileExplorer = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
    this.ob = require("obsidian");
    this.register();
  }
  register() {
    this.app.workspace.onLayoutReady(() => {
      let folder = new import_obsidian2.TFolder(import_obsidian2.Vault, "");
      let dom = this.file_explorer.createFolderDom(folder).constructor;
      this._FolderDom_ = dom;
      this.org_sort = dom.prototype.sort;
      this.new_sort = chain_sort(this.org_sort);
      this._FolderDom_.prototype.sort = this.new_sort;
      this.file_explorer.sort();
    });
  }
  unregister() {
    if (this.org_sort) {
      console.log("Reset FileExplorer to origin sort function.");
      this._FolderDom_.prototype.sort = this.org_sort;
    }
  }
  get file_explorer() {
    var _a;
    let view = (_a = this.app.workspace.getLeavesOfType(
      "file-explorer"
    )[0]) == null ? void 0 : _a.view;
    return view;
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  PrevChain: "10",
  NextChain: "10",
  refreshDataView: true,
  refreshTasks: true,
  isSortFileExplorer: true,
  isFolderFirst: true
};
var longform2notechain = (plugin) => ({
  id: "longform2notechain",
  name: "Reset Note Chain by LongForm.",
  callback: () => {
    let curr = plugin.chain.current_note;
    if (curr == null) {
      return;
    }
    app.fileManager.processFrontMatter(
      curr,
      (fm) => {
        if (curr == null) {
          return;
        }
        if (fm["longform"] == null) {
          return;
        }
        let scenes = plugin.editor.concat_array(fm.longform.scenes);
        let ignoredFiles = plugin.editor.concat_array(fm.longform.ignoredFiles);
        ignoredFiles = ignoredFiles.filter((f) => !scenes.contains(f));
        let notes = plugin.editor.concat_array([scenes, ignoredFiles]);
        notes = notes.map((f) => plugin.chain.find_tfile(f));
        if (curr.parent == null) {
          return;
        }
        ;
        let tfiles = plugin.chain.get_tfiles_of_folder(curr.parent).filter((f) => !notes.contains(f));
        notes = plugin.editor.concat_array([tfiles, notes]);
        plugin.chain.chain_link_tfiles(notes);
      }
    );
  }
});
var longform4notechain = (plugin) => ({
  id: "longform4notechain",
  name: "Reset LongForm Secnes by Note Chain.",
  callback: () => {
    let curr = plugin.chain.current_note;
    if (curr == null) {
      return;
    }
    app.fileManager.processFrontMatter(
      curr,
      (fm) => {
        if (curr == null) {
          return;
        }
        if (curr.parent == null) {
          return;
        }
        ;
        if (fm["longform"] == null) {
          return;
        }
        let notes = plugin.chain.get_tfiles_of_folder(curr.parent);
        notes = plugin.chain.sort_tfiles_by_chain(notes);
        fm.longform.scenes = notes.map((f) => f.basename);
      }
    );
  }
});
var sort_file_explorer = (plugin) => ({
  id: "sort_file_explorer",
  name: "Sort File Explorer by Note Chain.",
  callback: () => {
    plugin.chain.dbchain.indexOf();
    plugin.explorer.file_explorer.sort();
  }
});
var commandBuilders = [
  longform2notechain,
  longform4notechain,
  sort_file_explorer
  // suggester_reveal_folder,
];
function addCommands(plugin) {
  commandBuilders.forEach((c) => {
    plugin.addCommand(c(plugin));
  });
}
var NoteChainPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    this.editor = new NCEditor(this.app);
    this.chain = new NoteChain(this);
    this.explorer = new NCFileExplorer(this);
    addCommands(this);
    this.addCommand({
      id: "chain_insert_node",
      name: "Insert node of chain",
      callback: async () => {
        await this.chain_insert_node();
        await this.editor.sleep(300);
        this.explorer.file_explorer.sort();
      }
    });
    this.addCommand({
      id: "chain_set_seq_note",
      name: "Reset the chain of current folder! Warning: It will reset your chain",
      callback: () => {
        this.chain.chain_suggester_tfiles().then(
          () => {
            this.explorer.file_explorer.sort();
          }
        );
      }
    });
    this.addCommand({
      id: "open_notes_smarter",
      name: "Open note smarter",
      callback: () => {
        this.open_note_smarter();
      }
    });
    this.addCommand({
      id: "sugguster_open_note",
      name: "Open note",
      callback: () => {
        this.chain.sugguster_open_note();
      }
    });
    this.addCommand({
      id: "open_prev_notes",
      name: "Open prev note",
      callback: () => {
        this.chain.open_prev_notes();
      }
    });
    this.addCommand({
      id: "open_next_notes",
      name: "Open next note",
      callback: () => {
        this.chain.open_next_notes();
      }
    });
    this.addCommand({
      id: "clear_inlinks",
      name: "Clear inlinks of current file",
      callback: () => {
        this.clear_inlinks();
      }
    });
    this.addCommand({
      id: "move_file_to_another_folder",
      name: "Move current file to another folder",
      callback: () => {
        this.chain.move_file_to_another_folder();
      }
    });
    this.addCommand({
      id: "replace_notes_with_regx",
      name: "Replace by regex",
      callback: () => {
        this.replace_notes_with_regx();
      }
    });
    this.addSettingTab(new NCSettingTab(this.app, this));
    console.log("Zig-Holding:regeister ufunc_on_file_open");
    this.registerEvent(
      this.app.workspace.on("file-open", this.ufunc_on_file_open)
    );
    this.registerEvent(this.app.workspace.on("file-menu", (menu, file) => {
      menu.addItem((item) => {
        item.setTitle("NoteChain: sort by chain").onClick(() => {
          this.chain.dbchain.init_chains();
          this.chain.view_sort_by_chain();
        });
      });
    }));
    this.registerEvent(this.app.vault.on(
      "delete",
      (file) => {
        this.chain.chain_pop_node(file);
        this.chain.dbchain.init_chains();
        this.explorer.file_explorer.sort();
      }
    ));
    this.registerEvent(this.app.vault.on(
      "create",
      () => {
        console.log("create");
        this.chain.dbchain.init_chains();
        this.explorer.file_explorer.sort();
      }
    ));
    this.registerEvent(this.app.vault.on(
      "rename",
      (file, oldPath) => {
        console.log(file, oldPath);
        this.chain.dbchain.init_chains();
        this.explorer.file_explorer.sort();
      }
    ));
  }
  onunload() {
    console.log("Zig-Holding:unregeister ufunc_on_file_open");
    this.app.workspace.off("file-open", this.ufunc_on_file_open);
    this.explorer.unregister();
    this.explorer.file_explorer.sort();
  }
  async ufunc_on_file_open(file) {
    let zh = await app.plugins.getPlugin("note-chain");
    if (!zh) {
      return;
    }
    if (zh.settings.refreshDataView) {
      zh.app.commands.executeCommandById(
        "dataview:dataview-force-refresh-views"
      );
    }
    if (zh.settings.refreshTasks) {
      let target = await app.plugins.getPlugin("obsidian-tasks-plugin");
      target.cache.notifySubscribers();
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async clear_inlinks(tfile = this.chain.current_note, mode = "suggester") {
    let notes = this.chain.get_inlinks(tfile);
    if (notes.length) {
      if (mode === "suggester") {
        mode = await this.chain.suggester(
          ["\u5220\u9664\u94FE\u63A5", "\u66FF\u6362\u94FE\u63A5", "\u5220\u9664\u6BB5\u843D"],
          [["link", "del"], ["link", "rep"], ["para", "del"]]
        );
      }
      let reg = this.editor.regexp_link(tfile, mode[0]);
      if (reg) {
        for (let note of notes) {
          let target;
          if (mode[1] === "rep") {
            target = tfile.basename;
          } else {
            target = "";
          }
          this.editor.replace(note, reg, target);
        }
      }
    }
  }
  get prompt() {
    return get_tp_func(this.app, "tp.system.prompt");
  }
  async replace_notes_with_regx() {
    let notes = await this.chain.suggester_notes();
    if ((notes == null ? void 0 : notes.length) > 0) {
      try {
        let regs = await this.prompt("\u8981\u66FF\u6362\u7684\u6B63\u5219\u8868\u8FBE\u5F0F");
        if (regs == null) {
          return;
        }
        let reg = new RegExp(regs, "g");
        let target = await this.prompt("\u76EE\u6807\u5B57\u7B26\u4E32");
        if (target == null) {
          return;
        }
        target = target.trim().replace(
          /\\n/g,
          "\n"
        );
        console.log(regs, reg, target);
        for (let note of notes) {
          await this.editor.replace(note, reg, target);
        }
      } catch (error) {
        console.log(error);
      }
    }
  }
  async chain_insert_node() {
    let curr = this.chain.current_note;
    if (curr == null) {
      return;
    }
    let notes = await this.chain.suggester_notes(curr, false);
    if (!notes) {
      return;
    }
    notes = this.chain.sort_tfiles(notes, ["mtime", "x"]);
    notes = this.chain.sort_tfiles_by_chain(notes);
    const note = await this.chain.suggester(
      (file) => this.tfile_to_string(file, [], ""),
      notes
    );
    if (!note) {
      return;
    }
    let sitems = [
      "insert_node_after",
      "insert_node_before",
      "insert_node_as_head",
      "insert_node_as_tail",
      "insert_folder_after"
    ];
    let mode = await this.chain.suggester(
      sitems,
      sitems,
      false,
      "Select Node Insert Mode."
    );
    if (!mode) {
      return;
    }
    console.log(typeof mode, mode);
    if (mode === "insert_node_as_head") {
      await this.chain.chain_insert_node_as_head(curr, note);
    } else if (mode === "insert_node_as_tail") {
      await this.chain.chain_insert_node_as_tail(curr, note);
    } else if (mode === "insert_node_before") {
      await this.chain.chain_insert_node_before(curr, note);
    } else if (mode === "insert_node_after") {
      await this.chain.chain_insert_node_after(curr, note);
    } else if (mode === "insert_folder_after") {
      await this.chain.chain_insert_folder_after(curr, note);
    } else {
      return;
    }
  }
  tfile_to_string(tfile, fields, seq) {
    let meta = this.app.metadataCache.getFileCache(tfile);
    let items = new Array();
    if (tfile == this.chain.current_note) {
      items.push("\u{1F3E0}" + tfile.basename);
    } else {
      items.push(tfile.basename);
    }
    for (let field of fields) {
      try {
        items.push(meta.frontmatter[field]);
      } catch (error) {
        items.push("-");
      }
    }
    return items.join(seq);
  }
  open_note_smarter() {
    let curr = this.chain.current_note;
    return this.chain.suggester_notes(curr, false).then((notes) => {
      notes = this.chain.sort_tfiles(notes, ["mtime", "x"]);
      notes = this.chain.sort_tfiles_by_chain(notes);
      return this.chain.suggester(
        (file) => this.chain.tfile_to_string(file),
        notes
      ).then((note) => {
        return this.chain.open_note(note);
      });
    });
  }
};
var NCSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian3.Setting(containerEl).setName("Sort File Explorer").setDesc("Sort File Explorer by Chain").addToggle(
      (text) => text.setValue(this.plugin.settings.isSortFileExplorer).onChange(async (value) => {
        this.plugin.settings.isSortFileExplorer = value;
        await this.plugin.saveSettings();
        this.plugin.explorer.file_explorer.sort();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Sort Folder First").setDesc("Sort File Explorer Folder First").addToggle(
      (text) => text.setValue(this.plugin.settings.isFolderFirst).onChange(async (value) => {
        this.plugin.settings.isFolderFirst = value;
        await this.plugin.saveSettings();
        this.plugin.explorer.file_explorer.sort();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("PrevChain").setDesc("Number of Prev Notes to show?").addText((text) => text.setValue(this.plugin.settings.PrevChain).onChange(async (value) => {
      this.plugin.settings.PrevChain = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("NextChain").setDesc("Number of Next Notes to show?").addText((text) => text.setValue(this.plugin.settings.NextChain).onChange(async (value) => {
      this.plugin.settings.NextChain = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("refreshDataView").setDesc("Refresh Dataview while open new file?").addToggle(
      (text) => text.setValue(this.plugin.settings.refreshDataView).onChange(async (value) => {
        this.plugin.settings.refreshDataView = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("refreshTasks").setDesc("Refresh Tasks while open new file?").addToggle(
      (text) => text.setValue(this.plugin.settings.refreshTasks).onChange(async (value) => {
        this.plugin.settings.refreshTasks = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvTkNFZGl0b3IudHMiLCAic3JjL05vdGVDaGFpbi50cyIsICJzcmMvdXRpbHMudHMiLCAic3JjL05DRmlsZUV4cGxvcmVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBcclxuXHRBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBcclxuXHRQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsXHJcblx0VEZpbGUsVEZvbGRlclxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuXHJcblxyXG5pbXBvcnQge05DRWRpdG9yfSBmcm9tICcuL3NyYy9OQ0VkaXRvcic7XHJcbmltcG9ydCB7Tm90ZUNoYWlufSBmcm9tICcuL3NyYy9Ob3RlQ2hhaW4nO1xyXG5pbXBvcnQge05DRmlsZUV4cGxvcmVyfSBmcm9tICcuL3NyYy9OQ0ZpbGVFeHBsb3Jlcic7XHJcbmltcG9ydCB7Z2V0X3RwX2Z1bmN9IGZyb20gJy4vc3JjL3V0aWxzJ1xyXG5cclxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXHJcblxyXG5pbnRlcmZhY2UgTkNTZXR0aW5ncyB7XHJcblx0UHJldkNoYWluOnN0cmluZztcclxuXHROZXh0Q2hhaW46c3RyaW5nO1xyXG5cdHJlZnJlc2hEYXRhVmlldzpib29sZWFuO1xyXG5cdHJlZnJlc2hUYXNrczpib29sZWFuLFxyXG5cdGlzU29ydEZpbGVFeHBsb3Jlcjpib29sZWFuLFxyXG5cdGlzRm9sZGVyRmlyc3Q6Ym9vbGVhbixcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTkNTZXR0aW5ncyA9IHtcclxuXHRQcmV2Q2hhaW4gOiBcIjEwXCIsXHJcblx0TmV4dENoYWluIDogXCIxMFwiLFxyXG5cdHJlZnJlc2hEYXRhVmlldyA6IHRydWUsXHJcblx0cmVmcmVzaFRhc2tzIDogdHJ1ZSxcclxuXHRpc1NvcnRGaWxlRXhwbG9yZXIgOiB0cnVlLFxyXG5cdGlzRm9sZGVyRmlyc3QgOiB0cnVlXHJcbn1cclxuXHJcbmNvbnN0IGxvbmdmb3JtMm5vdGVjaGFpbiA9IChwbHVnaW46Tm90ZUNoYWluUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiBcImxvbmdmb3JtMm5vdGVjaGFpblwiLFxyXG4gICAgbmFtZTogXCJSZXNldCBOb3RlIENoYWluIGJ5IExvbmdGb3JtLlwiLFxyXG5cdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRsZXQgY3VyciA9IHBsdWdpbi5jaGFpbi5jdXJyZW50X25vdGU7XHJcblx0XHRpZihjdXJyID09IG51bGwpe3JldHVybjt9XHJcblx0XHRhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKFxyXG5cdFx0XHRjdXJyLFxyXG5cdFx0XHRmbSA9PntcclxuXHRcdFx0XHRpZihjdXJyPT1udWxsKXtyZXR1cm47fVxyXG5cdFx0XHRcdGlmKGZtWydsb25nZm9ybSddPT1udWxsKXtyZXR1cm47fVxyXG5cdFx0XHRcdGxldCBzY2VuZXMgPSBwbHVnaW4uZWRpdG9yLmNvbmNhdF9hcnJheShmbS5sb25nZm9ybS5zY2VuZXMpO1xyXG5cdFx0XHRcdGxldCBpZ25vcmVkRmlsZXMgPSBwbHVnaW4uZWRpdG9yLmNvbmNhdF9hcnJheShmbS5sb25nZm9ybS5pZ25vcmVkRmlsZXMpO1xyXG5cdFx0XHRcdGlnbm9yZWRGaWxlcyA9IGlnbm9yZWRGaWxlcy5maWx0ZXIoKGY6c3RyaW5nKT0+IXNjZW5lcy5jb250YWlucyhmKSk7XHJcblx0XHRcdFx0bGV0IG5vdGVzID0gcGx1Z2luLmVkaXRvci5jb25jYXRfYXJyYXkoW3NjZW5lcyxpZ25vcmVkRmlsZXNdKTtcclxuXHRcdFx0XHRub3RlcyA9IG5vdGVzLm1hcCgoZjpzdHJpbmcpPT5wbHVnaW4uY2hhaW4uZmluZF90ZmlsZShmKSk7XHJcblx0XHRcdFx0aWYoY3Vyci5wYXJlbnQ9PW51bGwpe3JldHVybn07XHJcblx0XHRcdFx0bGV0IHRmaWxlcyA9IHBsdWdpbi5jaGFpbi5nZXRfdGZpbGVzX29mX2ZvbGRlcihjdXJyLnBhcmVudCkuZmlsdGVyKChmOmFueSk9PiFub3Rlcy5jb250YWlucyhmKSk7XHJcblx0XHRcdFx0bm90ZXMgPSBwbHVnaW4uZWRpdG9yLmNvbmNhdF9hcnJheShbdGZpbGVzLG5vdGVzXSk7XHJcblx0XHRcdFx0cGx1Z2luLmNoYWluLmNoYWluX2xpbmtfdGZpbGVzKG5vdGVzKTtcclxuXHRcdFx0fVxyXG5cdFx0KVxyXG5cdH1cclxufSk7XHJcblxyXG5jb25zdCBsb25nZm9ybTRub3RlY2hhaW4gPSAocGx1Z2luOk5vdGVDaGFpblBsdWdpbikgPT4gKHtcclxuXHRpZDogXCJsb25nZm9ybTRub3RlY2hhaW5cIixcclxuICAgIG5hbWU6IFwiUmVzZXQgTG9uZ0Zvcm0gU2VjbmVzIGJ5IE5vdGUgQ2hhaW4uXCIsXHJcblx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdGxldCBjdXJyID0gcGx1Z2luLmNoYWluLmN1cnJlbnRfbm90ZTtcclxuXHRcdGlmKGN1cnI9PW51bGwpe3JldHVybjt9XHJcblx0XHRhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKFxyXG5cdFx0XHRjdXJyLFxyXG5cdFx0XHRmbSA9PntcclxuXHRcdFx0XHRpZihjdXJyPT1udWxsKXtyZXR1cm47fVxyXG5cdFx0XHRcdGlmKGN1cnIucGFyZW50PT1udWxsKXtyZXR1cm59O1xyXG5cclxuXHRcdFx0XHRpZihmbVsnbG9uZ2Zvcm0nXT09bnVsbCl7cmV0dXJuO31cclxuXHRcdFx0XHRsZXQgbm90ZXMgPSBwbHVnaW4uY2hhaW4uZ2V0X3RmaWxlc19vZl9mb2xkZXIoY3Vyci5wYXJlbnQpO1xyXG5cdFx0XHRcdG5vdGVzID0gcGx1Z2luLmNoYWluLnNvcnRfdGZpbGVzX2J5X2NoYWluKG5vdGVzKTtcclxuXHRcdFx0XHRmbS5sb25nZm9ybS5zY2VuZXMgPSBub3Rlcy5tYXAoKGY6VEZpbGUpPT5mLmJhc2VuYW1lKTtcclxuXHRcdFx0fVxyXG5cdFx0KVxyXG5cdH1cclxufSk7XHJcblxyXG5cclxuY29uc3Qgc29ydF9maWxlX2V4cGxvcmVyID0gKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pID0+ICh7XHJcblx0aWQ6IFwic29ydF9maWxlX2V4cGxvcmVyXCIsXHJcbiAgICBuYW1lOiBcIlNvcnQgRmlsZSBFeHBsb3JlciBieSBOb3RlIENoYWluLlwiLFxyXG5cdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRwbHVnaW4uY2hhaW4uZGJjaGFpbi5pbmRleE9mKCk7XHJcblx0XHRwbHVnaW4uZXhwbG9yZXIuZmlsZV9leHBsb3Jlci5zb3J0KCk7XHJcblx0fVxyXG59KTtcclxuXHJcblxyXG5jb25zdCBzdWdnZXN0ZXJfcmV2ZWFsX2ZvbGRlciA9IChwbHVnaW46Tm90ZUNoYWluUGx1Z2luKSA9PiAoe1xyXG4gICAgaWQ6IFwicmV2ZWFsX2ZvbGRlclwiLFxyXG4gICAgbmFtZTogXCJSZXZlYWwgRm9sZGVyXCIsXHJcbiAgICBjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0bGV0IGZvbGRlcnMgPSBwbHVnaW4uY2hhaW4uZ2V0X2FsbF9mb2xkZXJzKCk7XHJcblx0XHRsZXQgZm9sZGVyID0gcGx1Z2luLmNoYWluLnN1Z2dlc3RlcihcclxuXHRcdFx0KGY6VEZvbGRlcik9PmYucGF0aCxcclxuXHRcdFx0Zm9sZGVycyxcclxuXHRcdFx0ZmFsc2UsXHJcblx0XHRcdCdDaG9vc2UgZm9sZGVyIHRvIHJldmVhbC4nXHJcblx0XHQpLnRoZW4oXHJcblx0XHRcdChmb2xkZXI6VEZvbGRlcik9PntcclxuXHRcdFx0XHRwbHVnaW4uYXBwLmludGVybmFsUGx1Z2lucy5wbHVnaW5zW1wiZmlsZS1leHBsb3JlclwiXS5pbnN0YW5jZS5yZXZlYWxJbkZvbGRlcihmb2xkZXIpO1xyXG5cdFx0XHR9XHJcblx0XHQpXHJcbiAgICB9LFxyXG59KTtcclxuXHJcblxyXG5jb25zdCBjb21tYW5kQnVpbGRlcnMgPSBbXHJcblx0bG9uZ2Zvcm0ybm90ZWNoYWluLFxyXG5cdGxvbmdmb3JtNG5vdGVjaGFpbixcclxuXHRzb3J0X2ZpbGVfZXhwbG9yZXJcclxuXHQvLyBzdWdnZXN0ZXJfcmV2ZWFsX2ZvbGRlcixcclxuXTtcclxuXHJcbmZ1bmN0aW9uIGFkZENvbW1hbmRzKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pIHtcclxuICAgIGNvbW1hbmRCdWlsZGVycy5mb3JFYWNoKChjKSA9PiB7XHJcbiAgICAgICAgcGx1Z2luLmFkZENvbW1hbmQoYyhwbHVnaW4pKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RlQ2hhaW5QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBOQ1NldHRpbmdzO1xyXG5cdGNoYWluIDogTm90ZUNoYWluO1xyXG5cdGVkaXRvciA6IE5DRWRpdG9yOyBcclxuXHRleHBsb3JlciA6IE5DRmlsZUV4cGxvcmVyO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdHRoaXMuZWRpdG9yID0gbmV3IE5DRWRpdG9yKHRoaXMuYXBwKTtcclxuXHRcdHRoaXMuY2hhaW4gPSBuZXcgTm90ZUNoYWluKHRoaXMpO1xyXG5cdFx0dGhpcy5leHBsb3JlciA9IG5ldyBOQ0ZpbGVFeHBsb3Jlcih0aGlzKTtcclxuXHJcblx0XHRhZGRDb21tYW5kcyh0aGlzKTtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ2NoYWluX2luc2VydF9ub2RlJyxcclxuXHRcdFx0bmFtZTogJ0luc2VydCBub2RlIG9mIGNoYWluJyxcclxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLmNoYWluX2luc2VydF9ub2RlKCk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5lZGl0b3Iuc2xlZXAoMzAwKTtcclxuXHRcdFx0XHR0aGlzLmV4cGxvcmVyLmZpbGVfZXhwbG9yZXIuc29ydCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdjaGFpbl9zZXRfc2VxX25vdGUnLFxyXG5cdFx0XHRuYW1lOiAnUmVzZXQgdGhlIGNoYWluIG9mIGN1cnJlbnQgZm9sZGVyISBXYXJuaW5nOiBJdCB3aWxsIHJlc2V0IHlvdXIgY2hhaW4nLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuY2hhaW4uY2hhaW5fc3VnZ2VzdGVyX3RmaWxlcygpLnRoZW4oXHJcblx0XHRcdFx0XHQoKT0+e3RoaXMuZXhwbG9yZXIuZmlsZV9leHBsb3Jlci5zb3J0KCk7fVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnb3Blbl9ub3Rlc19zbWFydGVyJyxcclxuXHRcdFx0bmFtZTogJ09wZW4gbm90ZSBzbWFydGVyJyxcclxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLm9wZW5fbm90ZV9zbWFydGVyKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnc3VnZ3VzdGVyX29wZW5fbm90ZScsXHJcblx0XHRcdG5hbWU6ICdPcGVuIG5vdGUnLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuY2hhaW4uc3VnZ3VzdGVyX29wZW5fbm90ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ29wZW5fcHJldl9ub3RlcycsXHJcblx0XHRcdG5hbWU6ICdPcGVuIHByZXYgbm90ZScsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5jaGFpbi5vcGVuX3ByZXZfbm90ZXMoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdvcGVuX25leHRfbm90ZXMnLFxyXG5cdFx0XHRuYW1lOiAnT3BlbiBuZXh0IG5vdGUnLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuY2hhaW4ub3Blbl9uZXh0X25vdGVzKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ2NsZWFyX2lubGlua3MnLFxyXG5cdFx0XHRuYW1lOiAnQ2xlYXIgaW5saW5rcyBvZiBjdXJyZW50IGZpbGUnLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuY2xlYXJfaW5saW5rcygpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ21vdmVfZmlsZV90b19hbm90aGVyX2ZvbGRlcicsXHJcblx0XHRcdG5hbWU6ICdNb3ZlIGN1cnJlbnQgZmlsZSB0byBhbm90aGVyIGZvbGRlcicsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5jaGFpbi5tb3ZlX2ZpbGVfdG9fYW5vdGhlcl9mb2xkZXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAncmVwbGFjZV9ub3Rlc193aXRoX3JlZ3gnLFxyXG5cdFx0XHRuYW1lOiAnUmVwbGFjZSBieSByZWdleCcsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5yZXBsYWNlX25vdGVzX3dpdGhfcmVneCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBOQ1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcblx0XHRjb25zb2xlLmxvZygnWmlnLUhvbGRpbmc6cmVnZWlzdGVyIHVmdW5jX29uX2ZpbGVfb3BlbicpO1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsIHRoaXMudWZ1bmNfb25fZmlsZV9vcGVuKVxyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1tZW51XCIsIChtZW51LCBmaWxlKSA9PiB7XHJcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdGl0ZW1cclxuXHRcdFx0XHRcdC5zZXRUaXRsZShcIk5vdGVDaGFpbjogc29ydCBieSBjaGFpblwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNoYWluLmRiY2hhaW4uaW5pdF9jaGFpbnMoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5jaGFpbi52aWV3X3NvcnRfYnlfY2hhaW4oKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KSk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKFxyXG5cdFx0XHRcImRlbGV0ZVwiLCAoZmlsZTogVEZpbGUpID0+IHtcclxuXHRcdFx0XHR0aGlzLmNoYWluLmNoYWluX3BvcF9ub2RlKGZpbGUpO1xyXG5cdFx0XHRcdHRoaXMuY2hhaW4uZGJjaGFpbi5pbml0X2NoYWlucygpO1xyXG5cdFx0XHRcdHRoaXMuZXhwbG9yZXIuZmlsZV9leHBsb3Jlci5zb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdCkpXHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKFxyXG5cdFx0XHRcImNyZWF0ZVwiLCAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2NyZWF0ZScpO1xyXG5cdFx0XHRcdHRoaXMuY2hhaW4uZGJjaGFpbi5pbml0X2NoYWlucygpO1xyXG5cdFx0XHRcdHRoaXMuZXhwbG9yZXIuZmlsZV9leHBsb3Jlci5zb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdCkpXHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKFxyXG5cdFx0XHRcInJlbmFtZVwiLCAoZmlsZTogVEZpbGUsb2xkUGF0aDpzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhmaWxlLG9sZFBhdGgpO1xyXG5cdFx0XHRcdHRoaXMuY2hhaW4uZGJjaGFpbi5pbml0X2NoYWlucygpO1xyXG5cdFx0XHRcdHRoaXMuZXhwbG9yZXIuZmlsZV9leHBsb3Jlci5zb3J0KCk7XHJcblx0XHRcdH1cclxuXHRcdCkpXHJcblx0fVxyXG5cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHRjb25zb2xlLmxvZygnWmlnLUhvbGRpbmc6dW5yZWdlaXN0ZXIgdWZ1bmNfb25fZmlsZV9vcGVuJyk7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub2ZmKCdmaWxlLW9wZW4nLCB0aGlzLnVmdW5jX29uX2ZpbGVfb3Blbik7XHJcblx0XHR0aGlzLmV4cGxvcmVyLnVucmVnaXN0ZXIoKTtcclxuXHRcdHRoaXMuZXhwbG9yZXIuZmlsZV9leHBsb3Jlci5zb3J0KCk7XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdGFzeW5jIHVmdW5jX29uX2ZpbGVfb3BlbihmaWxlKXtcclxuXHRcdGxldCB6aCA9IGF3YWl0IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcIm5vdGUtY2hhaW5cIik7XHJcblx0XHRpZighemgpe3JldHVybjt9XHJcblx0XHRpZih6aC5zZXR0aW5ncy5yZWZyZXNoRGF0YVZpZXcpe1xyXG5cdFx0XHR6aC5hcHAuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKFxyXG5cdFx0XHRcdFwiZGF0YXZpZXc6ZGF0YXZpZXctZm9yY2UtcmVmcmVzaC12aWV3c1wiXHJcblx0XHRcdClcclxuXHRcdH1cclxuXHRcdGlmKHpoLnNldHRpbmdzLnJlZnJlc2hUYXNrcyl7XHJcblx0XHRcdGxldCB0YXJnZXQgPSBhd2FpdCBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJvYnNpZGlhbi10YXNrcy1wbHVnaW5cIik7XHJcblx0XHRcdHRhcmdldC5jYWNoZS5ub3RpZnlTdWJzY3JpYmVycygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjbGVhcl9pbmxpbmtzKHRmaWxlPXRoaXMuY2hhaW4uY3VycmVudF9ub3RlLG1vZGU9J3N1Z2dlc3Rlcicpe1xyXG5cdFx0bGV0IG5vdGVzID0gdGhpcy5jaGFpbi5nZXRfaW5saW5rcyh0ZmlsZSk7XHJcblx0XHRpZihub3Rlcy5sZW5ndGgpe1xyXG5cdFx0XHRpZihtb2RlPT09J3N1Z2dlc3Rlcicpe1xyXG5cdFx0XHRcdG1vZGUgPSBhd2FpdCB0aGlzLmNoYWluLnN1Z2dlc3RlcihcclxuXHRcdFx0XHRcdFtcIlx1NTIyMFx1OTY2NFx1OTRGRVx1NjNBNVwiLCdcdTY2RkZcdTYzNjJcdTk0RkVcdTYzQTUnLFwiXHU1MjIwXHU5NjY0XHU2QkI1XHU4NDNEXCIsXSxcclxuXHRcdFx0XHRcdFtbJ2xpbmsnLCdkZWwnXSxbJ2xpbmsnLCdyZXAnXSxbJ3BhcmEnLCdkZWwnXV1cclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGxldCByZWcgPSB0aGlzLmVkaXRvci5yZWdleHBfbGluayh0ZmlsZSxtb2RlWzBdKTtcclxuXHRcdFx0aWYocmVnKXtcclxuXHRcdFx0XHRmb3IobGV0IG5vdGUgb2Ygbm90ZXMpe1xyXG5cdFx0XHRcdFx0bGV0IHRhcmdldDtcclxuXHRcdFx0XHRcdGlmKG1vZGVbMV09PT0ncmVwJyl7XHJcblx0XHRcdFx0XHRcdHRhcmdldD10ZmlsZS5iYXNlbmFtZTtcclxuXHRcdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0XHR0YXJnZXQ9JydcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRoaXMuZWRpdG9yLnJlcGxhY2Uobm90ZSxyZWcsdGFyZ2V0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGdldCBwcm9tcHQoKXtcclxuXHRcdHJldHVybiBnZXRfdHBfZnVuYyh0aGlzLmFwcCwndHAuc3lzdGVtLnByb21wdCcpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgcmVwbGFjZV9ub3Rlc193aXRoX3JlZ3goKXtcclxuXHRcdGxldCBub3RlcyA9IGF3YWl0IHRoaXMuY2hhaW4uc3VnZ2VzdGVyX25vdGVzKCk7XHJcblx0XHRpZihub3Rlcz8ubGVuZ3RoPjApe1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGxldCByZWdzID0gYXdhaXQgdGhpcy5wcm9tcHQoJ1x1ODk4MVx1NjZGRlx1NjM2Mlx1NzY4NFx1NkI2M1x1NTIxOVx1ODg2OFx1OEZCRVx1NUYwRicpO1xyXG5cdFx0XHRcdGlmKHJlZ3M9PW51bGwpe1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRsZXQgcmVnID0gbmV3IFJlZ0V4cChyZWdzLCdnJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0bGV0IHRhcmdldCA9IGF3YWl0IHRoaXMucHJvbXB0KCdcdTc2RUVcdTY4MDdcdTVCNTdcdTdCMjZcdTRFMzInKTtcclxuXHRcdFx0XHRpZih0YXJnZXQ9PW51bGwpe1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0YXJnZXQgPSB0YXJnZXQudHJpbSgpLnJlcGxhY2UoXHJcblx0XHRcdFx0XHQvXFxcXG4vZywnXFxuJ1xyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2cocmVncyxyZWcsdGFyZ2V0KTtcclxuXHRcdFx0XHRmb3IobGV0IG5vdGUgb2Ygbm90ZXMpe1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5lZGl0b3IucmVwbGFjZShub3RlLHJlZyx0YXJnZXQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGFzeW5jIGNoYWluX2luc2VydF9ub2RlKCl7XHJcblxyXG5cdFx0bGV0IGN1cnIgPSB0aGlzLmNoYWluLmN1cnJlbnRfbm90ZTtcclxuXHRcdGlmKGN1cnI9PW51bGwpe3JldHVybjt9XHJcblx0XHRsZXQgbm90ZXMgPSBhd2FpdCB0aGlzLmNoYWluLnN1Z2dlc3Rlcl9ub3RlcyhjdXJyLGZhbHNlKTtcclxuXHRcdGlmKCFub3Rlcyl7cmV0dXJufVxyXG5cdFx0bm90ZXMgPSB0aGlzLmNoYWluLnNvcnRfdGZpbGVzKG5vdGVzLFsnbXRpbWUnLCd4J10pO1xyXG5cdFx0bm90ZXMgPSB0aGlzLmNoYWluLnNvcnRfdGZpbGVzX2J5X2NoYWluKG5vdGVzKTtcclxuXHRcdC8vbm90ZXMgPSBub3Rlcy5maWx0ZXIoZj0+ZiE9Y3Vycik7XHJcblxyXG5cdFx0Y29uc3Qgbm90ZSA9IGF3YWl0IHRoaXMuY2hhaW4uc3VnZ2VzdGVyKFxyXG5cdFx0XHQoZmlsZSkgPT4gdGhpcy50ZmlsZV90b19zdHJpbmcoZmlsZSxbXSxcIlwiKSwgXHJcblx0XHRcdG5vdGVzXHJcblx0XHQpOyBcclxuXHRcdFxyXG5cdFx0aWYoIW5vdGUpe3JldHVybjt9XHJcblx0XHRcclxuXHRcdGxldCBzaXRlbXMgPSBbXHJcblx0XHRcdFwiaW5zZXJ0X25vZGVfYWZ0ZXJcIixcclxuXHRcdFx0XCJpbnNlcnRfbm9kZV9iZWZvcmVcIixcclxuXHRcdFx0XCJpbnNlcnRfbm9kZV9hc19oZWFkXCIsXHJcblx0XHRcdFwiaW5zZXJ0X25vZGVfYXNfdGFpbFwiLFxyXG5cdFx0XHRcImluc2VydF9mb2xkZXJfYWZ0ZXJcIixcclxuXHRcdF07XHJcblx0XHRsZXQgbW9kZSA9IGF3YWl0IHRoaXMuY2hhaW4uc3VnZ2VzdGVyKFxyXG5cdFx0XHRzaXRlbXMsc2l0ZW1zLGZhbHNlLFwiU2VsZWN0IE5vZGUgSW5zZXJ0IE1vZGUuXCJcclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGlmKCFtb2RlKXtyZXR1cm47fVxyXG5cclxuXHRcdGNvbnNvbGUubG9nKHR5cGVvZihtb2RlKSxtb2RlKTtcclxuXHJcblx0XHRpZihtb2RlPT09J2luc2VydF9ub2RlX2FzX2hlYWQnKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5jaGFpbi5jaGFpbl9pbnNlcnRfbm9kZV9hc19oZWFkKGN1cnIsbm90ZSk7XHJcblx0XHR9ZWxzZSBpZihtb2RlPT09J2luc2VydF9ub2RlX2FzX3RhaWwnKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5jaGFpbi5jaGFpbl9pbnNlcnRfbm9kZV9hc190YWlsKGN1cnIsbm90ZSk7XHJcblx0XHR9ZWxzZSBpZihtb2RlPT09J2luc2VydF9ub2RlX2JlZm9yZScpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNoYWluLmNoYWluX2luc2VydF9ub2RlX2JlZm9yZShjdXJyLG5vdGUpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdpbnNlcnRfbm9kZV9hZnRlcicpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNoYWluLmNoYWluX2luc2VydF9ub2RlX2FmdGVyKGN1cnIsbm90ZSk7XHJcblx0XHR9ZWxzZSBpZihtb2RlPT09J2luc2VydF9mb2xkZXJfYWZ0ZXInKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5jaGFpbi5jaGFpbl9pbnNlcnRfZm9sZGVyX2FmdGVyKGN1cnIsbm90ZSk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHR9XHJcblx0XHJcblx0dGZpbGVfdG9fc3RyaW5nKHRmaWxlLGZpZWxkcyxzZXEpe1xyXG5cdFx0bGV0IG1ldGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0ZmlsZSk7XHJcblx0XHRsZXQgaXRlbXMgPSBuZXcgQXJyYXkoKTtcclxuXHRcdGlmKHRmaWxlPT10aGlzLmNoYWluLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRcdGl0ZW1zLnB1c2goJ1x1RDgzQ1x1REZFMCcgKyB0ZmlsZS5iYXNlbmFtZSlcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRpdGVtcy5wdXNoKHRmaWxlLmJhc2VuYW1lKVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmb3IobGV0IGZpZWxkIG9mIGZpZWxkcyl7XHJcblx0XHRcdHRyeXtcclxuXHRcdFx0XHRpdGVtcy5wdXNoKG1ldGEuZnJvbnRtYXR0ZXJbZmllbGRdKTtcclxuXHRcdFx0fWNhdGNoKGVycm9yKXtcclxuXHRcdFx0XHRpdGVtcy5wdXNoKFwiLVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGl0ZW1zLmpvaW4oc2VxKTtcclxuXHR9XHJcblxyXG5cdG9wZW5fbm90ZV9zbWFydGVyKCl7XHJcblx0XHQvLyBcdTk0RkVcdTVGMEZcdThDMDNcdTc1MjhcclxuXHRcdGxldCBjdXJyID0gdGhpcy5jaGFpbi5jdXJyZW50X25vdGU7XHJcblx0XHRyZXR1cm4gdGhpcy5jaGFpbi5zdWdnZXN0ZXJfbm90ZXMoY3VycixmYWxzZSkudGhlbigobm90ZXMpPT57XHJcblx0XHRcdG5vdGVzID0gdGhpcy5jaGFpbi5zb3J0X3RmaWxlcyhub3RlcyxbJ210aW1lJywneCddKTtcclxuXHRcdFx0bm90ZXMgPSB0aGlzLmNoYWluLnNvcnRfdGZpbGVzX2J5X2NoYWluKG5vdGVzKTtcclxuXHRcdFx0cmV0dXJuIHRoaXMuY2hhaW4uc3VnZ2VzdGVyKFxyXG5cdFx0XHRcdChmaWxlKSA9PiB0aGlzLmNoYWluLnRmaWxlX3RvX3N0cmluZyhmaWxlKSwgXHJcblx0XHRcdFx0bm90ZXNcclxuXHRcdFx0KS50aGVuKChub3RlKT0+e1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmNoYWluLm9wZW5fbm90ZShub3RlKTtcclxuXHRcdFx0fSlcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmNsYXNzIE5DU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogTm90ZUNoYWluUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBOb3RlQ2hhaW5QbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUoJ1NvcnQgRmlsZSBFeHBsb3JlcicpXHJcblx0XHRcdFx0LnNldERlc2MoJ1NvcnQgRmlsZSBFeHBsb3JlciBieSBDaGFpbicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc1NvcnRGaWxlRXhwbG9yZXIpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmlzU29ydEZpbGVFeHBsb3JlciA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXIuZmlsZV9leHBsb3Jlci5zb3J0KCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgnU29ydCBGb2xkZXIgRmlyc3QnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTb3J0IEZpbGUgRXhwbG9yZXIgRm9sZGVyIEZpcnN0JylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmlzRm9sZGVyRmlyc3QpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmlzRm9sZGVyRmlyc3QgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyLmZpbGVfZXhwbG9yZXIuc29ydCgpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdQcmV2Q2hhaW4nKVxyXG5cdFx0XHQuc2V0RGVzYygnTnVtYmVyIG9mIFByZXYgTm90ZXMgdG8gc2hvdz8nKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuUHJldkNoYWluKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlByZXZDaGFpbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnTmV4dENoYWluJylcclxuXHRcdFx0LnNldERlc2MoJ051bWJlciBvZiBOZXh0IE5vdGVzIHRvIHNob3c/JylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLk5leHRDaGFpbilcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5OZXh0Q2hhaW4gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKSAgXHJcblx0XHRcdFx0LnNldE5hbWUoJ3JlZnJlc2hEYXRhVmlldycpXHJcblx0XHRcdFx0LnNldERlc2MoJ1JlZnJlc2ggRGF0YXZpZXcgd2hpbGUgb3BlbiBuZXcgZmlsZT8nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVmcmVzaERhdGFWaWV3KVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWZyZXNoRGF0YVZpZXcgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgncmVmcmVzaFRhc2tzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnUmVmcmVzaCBUYXNrcyB3aGlsZSBvcGVuIG5ldyBmaWxlPycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWZyZXNoVGFza3MpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJlZnJlc2hUYXNrcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IFxyXG5cdEFwcCwgRWRpdG9yLCBNYXJrZG93blZpZXcsIE1vZGFsLCBOb3RpY2UsIFxyXG5cdFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyxcclxuXHRURmlsZSxURm9sZGVyXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgTkNFZGl0b3J7XHJcblx0YXBwOkFwcDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOkFwcCl7XHJcblx0XHR0aGlzLmFwcCA9IGFwcDtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNldF9mcm9udG1hdHRlcih0ZmlsZTpURmlsZSxrZXk6c3RyaW5nLHZhbHVlOmFueSl7XHJcblx0XHRsZXQgcHJldiA9IHRoaXMuZ2V0X2Zyb250bWF0dGVyKHRmaWxlLGtleSk7XHJcblx0XHRpZihwcmV2PT09dmFsdWUpe3JldHVybjt9XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKHRmaWxlLGZtID0+e1xyXG5cdFx0XHRjb25zb2xlLmxvZyhgJHt0ZmlsZS5iYXNlbmFtZX0tLS0ke2tleX0tLS0ke3ZhbHVlfWApO1xyXG5cdFx0XHRmbVtrZXldID0gdmFsdWU7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGdldF9mcm9udG1hdHRlcih0ZmlsZTpURmlsZSxrZXk6YW55KXtcclxuXHRcdGxldCBtZXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodGZpbGUpO1xyXG5cdFx0aWYobWV0YT8uZnJvbnRtYXR0ZXIpe1xyXG5cdFx0XHRyZXR1cm4gbWV0YS5mcm9udG1hdHRlcltrZXldO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmVnZXhwX2xpbmsodGZpbGU6VEZpbGUsbW9kZTpzdHJpbmcpe1xyXG5cdFx0Ly9bW25vdGV8fGFsaWFzXV1cclxuXHRcdGlmKG1vZGU9PT0nbGluaycpe1xyXG5cdFx0XHRyZXR1cm4gbmV3IFJlZ0V4cChgXFxcXFtcXFxcWyR7dGZpbGUuYmFzZW5hbWV9XFxcXHw/LipcXFxcXVxcXFxdYCwnZycpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvL3BhcmFncmFwaFxyXG5cdFx0aWYobW9kZT09PSdwYXJhJyl7XHJcblx0XHRcdHJldHVybiBuZXcgUmVnRXhwKGAuKlxcXFxbXFxcXFske3RmaWxlLmJhc2VuYW1lfVxcXFx8Py4qXFxcXF1cXFxcXS4qYCwnZycpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c2xlZXAobXMpe1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG5cdH1cclxuXHJcblx0Y29uY2F0X2FycmF5KGl0ZW1zOkFycmF5PGFueT4pe1xyXG5cdFx0aWYoaXRlbXM9PW51bGwpe3JldHVybiBbXTt9XHJcblx0XHRpZih0eXBlb2YgaXRlbXMgPT09ICdzdHJpbmcnKXtyZXR1cm4gW2l0ZW1zXTt9XHJcblx0XHRpZighKGl0ZW1zIGluc3RhbmNlb2YgQXJyYXkpKXtyZXR1cm4gW2l0ZW1zXTt9XHJcblxyXG5cdFx0bGV0IHJlcyA9IFtdO1xyXG5cdFx0Zm9yKGxldCBpdGVtIG9mIGl0ZW1zKXtcclxuXHRcdFx0aWYodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKXtcclxuXHRcdFx0XHRyZXMucHVzaChpdGVtKTtcclxuXHRcdFx0fWVsc2UgaWYoaXRlbSBpbnN0YW5jZW9mIEFycmF5KXtcclxuXHRcdFx0XHRyZXMgPSByZXMuY29uY2F0KHRoaXMuY29uY2F0X2FycmF5KGl0ZW0pKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0cmVzLnB1c2goaXRlbSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXM7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZXBsYWNlKHRmaWxlOlRGaWxlLHJlZ2V4OmFueSx0YXJnZXQ6c3RyaW5nKXtcclxuXHRcdGlmKHR5cGVvZiByZWdleCA9PT0gJ3N0cmluZycpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5wcm9jZXNzKHRmaWxlLChkYXRhKT0+e1xyXG5cdFx0XHRcdGlmKGRhdGEuaW5kZXhPZihyZWdleCk+LTEpe1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ1JlcGxhY2U6ICcsdGZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHRyZXR1cm4gZGF0YS5yZXBsYWNlKHJlZ2V4LCB0YXJnZXQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdFx0fSlcclxuXHRcdH1lbHNlIGlmKHJlZ2V4IGluc3RhbmNlb2YgUmVnRXhwKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQucHJvY2Vzcyh0ZmlsZSwoZGF0YSk9PntcclxuXHRcdFx0XHRpZihkYXRhLm1hdGNoKHJlZ2V4KSl7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnUmVwbGFjZTogJyx0ZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcdHJldHVybiBkYXRhLnJlcGxhY2UocmVnZXgsIHRhcmdldCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0XHR9KVxyXG5cdFx0fVxyXG5cdH1cclxufSIsICJcclxuaW1wb3J0IHsgXHJcblx0QXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgXHJcblx0UGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLFxyXG5cdFRBYnN0cmFjdEZpbGUsXHJcblx0VEZpbGUsVEZvbGRlclxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7Tm90ZUNoYWluUGx1Z2lufSBmcm9tIFwiLi4vbWFpblwiO1xyXG5pbXBvcnQge05DRWRpdG9yfSBmcm9tICcuL05DRWRpdG9yJztcclxuaW1wb3J0IHtnZXRfdHBfZnVuY30gZnJvbSAnLi91dGlscydcclxuXHJcbmNsYXNzIERCQ2hhaW57XHJcblx0bmM6Tm90ZUNoYWluO1xyXG5cdENIQUlOUzpBcnJheTxURmlsZT47XHJcblx0Y29uc3RydWN0b3IobmM6Tm90ZUNoYWluKXtcclxuXHRcdHRoaXMubmMgPSBuYztcclxuXHRcdHRoaXMuaW5pdF9jaGFpbnMoKTtcclxuXHR9XHJcblxyXG5cdGluaXRfY2hhaW5zKCl7XHJcblx0XHRsZXQgdGZpbGVzID0gdGhpcy5uYy5NREZpbGVzO1xyXG5cdFx0dGhpcy5DSEFJTlMgPSB0aGlzLm5jLnNvcnRfdGZpbGVzX2J5X2NoYWluKHRmaWxlcyk7XHJcblx0fVxyXG5cclxuXHRpbmRleE9mKHRmaWxlOlRBYnN0cmFjdEZpbGUsZGVidWc9ZmFsc2Upe1xyXG5cdFx0aWYodGZpbGUgaW5zdGFuY2VvZiBURmlsZSl7XHJcblx0XHRcdGxldCBpZHggPSB0aGlzLkNIQUlOUy5pbmRleE9mKHRmaWxlKTtcclxuXHRcdFx0cmV0dXJuIGlkeDtcclxuXHRcdH1lbHNlIGlmKHRmaWxlIGluc3RhbmNlb2YgVEZvbGRlcil7XHJcblx0XHRcdGlmKGRlYnVnKXtjb25zb2xlLmxvZygnYWJjJyk7fTtcclxuXHRcdFx0bGV0IGZub3RlID0gdGhpcy5uYy5maW5kX3RmaWxlKHRmaWxlLm5hbWUrJy5tZCcpO1xyXG5cdFx0XHRpZihkZWJ1Zyl7Y29uc29sZS5sb2coZm5vdGUpO307XHJcblx0XHRcdGxldCBtc2cgPSB0aGlzLm5jLnBsdWdpbi5lZGl0b3IuZ2V0X2Zyb250bWF0dGVyKFxyXG5cdFx0XHRcdGZub3RlLFwiRm9sZGVyUHJldk5vdGVcIlxyXG5cdFx0XHQpO1xyXG5cdFx0XHRpZihkZWJ1Zyl7Y29uc29sZS5sb2cobXNnKTt9O1xyXG5cdFx0XHRpZighbXNnKXtyZXR1cm4gLTE7fVxyXG5cdFx0XHRsZXQgaXRlbXMgPSBtc2cuc3BsaXQoXCIrXCIpO1xyXG5cdFx0XHRsZXQgYW5jaG9yID0gdGhpcy5uYy5nZXRfdGZpbGUoaXRlbXNbMF0pO1xyXG5cdFx0XHRpZihkZWJ1Zyl7Y29uc29sZS5sb2coYW5jaG9yKTt9O1xyXG5cdFx0XHRpZighYW5jaG9yKXtyZXR1cm4gLTE7fVxyXG5cdFx0XHRsZXQgaWR4ID0gdGhpcy5DSEFJTlMuaW5kZXhPZihhbmNob3IpO1xyXG5cdFx0XHRpZihpdGVtcy5sZW5ndGg9PTIpe1xyXG5cdFx0XHRcdGlkeCA9IGlkeCArIHBhcnNlRmxvYXQoaXRlbXNbMV0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBpZHg7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gLTE7XHJcblx0fVxyXG5cclxuXHRzb3J0X3RmaWxlc19ieV9jaGFpbih0ZmlsZXM6QXJyYXk8VEFic3RyYWN0RmlsZT4pe1xyXG5cdFx0bGV0IHJlcyA9IHRmaWxlcy5zb3J0KChhOlRBYnN0cmFjdEZpbGUsYjpUQWJzdHJhY3RGaWxlKT0+e1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5pbmRleE9mKGEpLXRoaXMuaW5kZXhPZihiKTtcclxuXHRcdH0pXHJcblx0XHRyZXR1cm4gcmVzO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY2hhaW5faW5zZXJ0X25vZGVfYWZ0ZXIodGZpbGU6VEZpbGUsYW5jaG9yOlRGaWxlKXtcclxuXHRcdHRoaXMuQ0hBSU5TLnJlbW92ZSh0ZmlsZSlcclxuXHRcdGxldCBpZHggPSB0aGlzLkNIQUlOUy5pbmRleE9mKGFuY2hvcik7XHJcblx0XHRpZihpZHg8MCl7XHJcblx0XHRcdHRoaXMuaW5pdF9jaGFpbnMoKTtcclxuXHRcdFx0aWR4ID0gdGhpcy5DSEFJTlMuaW5kZXhPZihhbmNob3IpO1xyXG5cdFx0fVxyXG5cdFx0aWYoaWR4PDApe1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9e1xyXG5cdFx0XHR0aGlzLkNIQUlOUy5zcGxpY2UoaWR4KzEsMCx0ZmlsZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBjaGFpbl9pbnNlcnRfbm9kZV9iZWZvcmUodGZpbGU6VEZpbGUsYW5jaG9yOlRGaWxlKXtcclxuXHRcdHRoaXMuQ0hBSU5TLnJlbW92ZSh0ZmlsZSlcclxuXHRcdGxldCBpZHggPSB0aGlzLkNIQUlOUy5pbmRleE9mKGFuY2hvcik7XHJcblx0XHRpZihpZHg8MCl7XHJcblx0XHRcdHRoaXMuaW5pdF9jaGFpbnMoKTtcclxuXHRcdFx0aWR4ID0gdGhpcy5DSEFJTlMuaW5kZXhPZihhbmNob3IpO1xyXG5cdFx0fVxyXG5cdFx0aWYoaWR4PDApe1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9e1xyXG5cdFx0XHR0aGlzLkNIQUlOUy5zcGxpY2UoaWR4LDAsdGZpbGUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBOb3RlQ2hhaW57XHJcblx0cGx1Z2luOk5vdGVDaGFpblBsdWdpbjtcclxuXHRhcHA6QXBwO1xyXG5cdHByZXY6c3RyaW5nO1xyXG5cdG5leHQ6c3RyaW5nO1xyXG5cdGVkaXRvcjpOQ0VkaXRvcjtcclxuXHRkYmNoYWluOkRCQ2hhaW47XHJcblx0XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4scHJldj1cIlByZXZOb3RlXCIsbmV4dD1cIk5leHROb3RlXCIpIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xyXG5cdFx0dGhpcy5lZGl0b3IgPSBuZXcgTkNFZGl0b3IodGhpcy5hcHApO1xyXG5cdFx0dGhpcy5wcmV2ID0gcHJldjtcclxuXHRcdHRoaXMubmV4dCA9IG5leHQ7XHJcblx0XHR0aGlzLmRiY2hhaW4gPSBuZXcgREJDaGFpbih0aGlzKTtcclxuXHRcdHRoaXMuZHZfYXBpID0gdGhpcy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJkYXRhdmlld1wiKTtcclxuXHRcdHRoaXMub2IgPSByZXF1aXJlKCdvYnNpZGlhbicpO1xyXG5cdFx0dGhpcy5hcHAubmMgPSB0aGlzLnBsdWdpbjtcclxuXHR9XHJcbiAgICBcclxuXHRnZXQgZmluZF90ZmlsZSgpe1xyXG5cdFx0cmV0dXJuIGdldF90cF9mdW5jKHRoaXMuYXBwLCd0cC5maWxlLmZpbmRfdGZpbGUnKTtcclxuXHR9XHJcblxyXG5cdGdldCBzdWdnZXN0ZXIoKXtcclxuXHRcdHJldHVybiBnZXRfdHBfZnVuYyh0aGlzLmFwcCwndHAuc3lzdGVtLnN1Z2dlc3RlcicpO1xyXG5cdH1cclxuXHJcblx0Z2V0X2FsbF9mb2xkZXJzKHNvcnRfbW9kZT0nJyl7XHJcblx0XHRyZXR1cm4gdGhpcy5hcHAudmF1bHQuZ2V0QWxsRm9sZGVycygpO1xyXG5cdH1cclxuXHJcblx0Z2V0X2FsbF90ZmlsZXMoc29ydF9tb2RlPScnKXtcclxuXHRcdGxldCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdGlmKCEoc29ydF9tb2RlPT09JycpKXtcclxuXHRcdFx0dGhpcy5zb3J0X3RmaWxlcyhmaWxlcyxzb3J0X21vZGU9c29ydF9tb2RlKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBmaWxlcztcclxuXHR9XHJcblx0XHJcblx0c29ydF9mb2xkZXJzX2J5X210aW1lKGZvbGRlcnM6QXJyYXk8VEZvbGRlcj4scmV2ZXJzZT10cnVlKXtcclxuXHRcdGZ1bmN0aW9uIHVmdW5jKGY6VEZvbGRlcil7XHJcblx0XHRcdHJldHVybiBNYXRoLm1heChcclxuXHRcdFx0XHQuLi5mLmNoaWxkcmVuLmZpbHRlcigoZjpURmlsZSk9PmYuYmFzZW5hbWUpLm1hcCgoZjpURmlsZSk9PmYuc3RhdFxyXG5cdFx0XHRcdC5tdGltZSlcclxuXHRcdFx0KVxyXG5cdFx0fVxyXG5cdFx0bGV0IHJlcyA9IGZvbGRlcnMuc29ydCgoYSxiKT0+dWZ1bmMoYSktdWZ1bmMoYikpO1xyXG5cdFx0aWYocmV2ZXJzZSl7XHJcblx0XHRcdHJlcyA9IHJlcy5yZXZlcnNlKCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbW92ZV9maWxlX3RvX2Fub3RoZXJfZm9sZGVyKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdGlmKHRmaWxlPT1udWxsKXtyZXR1cm47fVxyXG5cclxuXHRcdGxldCBmb2xkZXJzID0gdGhpcy5nZXRfYWxsX2ZvbGRlcnMoKTtcclxuXHRcdGZvbGRlcnMgPSB0aGlzLnNvcnRfZm9sZGVyc19ieV9tdGltZShmb2xkZXJzXHJcblx0XHQpLmZpbHRlcihmPT5mIT10ZmlsZS5wYXJlbnQpO1xyXG5cclxuXHRcdGlmKHRmaWxlLmV4dGVuc2lvbj09PSdtZCcpe1xyXG5cdFx0XHRmb2xkZXJzID0gZm9sZGVycy5maWx0ZXIoKGY6VEZpbGUpPT50aGlzLmZpbHRlcl91c2VyX2lnbm9yZShmKSk7XHJcblx0XHR9XHJcblx0XHR0cnkge1xyXG5cdFx0XHRsZXQgZm9sZGVyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoKGY6VEZpbGUpPT5mLnBhdGgsZm9sZGVycyk7XHJcblx0XHRcdC8vIFx1NzlGQlx1NTJBOFx1N0IxNFx1OEJCMFxyXG5cdFx0XHRsZXQgZHN0ID0gZm9sZGVyLnBhdGgrXCIvXCIrdGZpbGUuYmFzZW5hbWUrXCIuXCIrdGZpbGUuZXh0ZW5zaW9uO1xyXG5cdFx0XHRhd2FpdCBhcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZSh0ZmlsZSxkc3QpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGZpbHRlcl91c2VyX2lnbm9yZShub3RlOlRGaWxlKXtcclxuXHRcdGlmKCEodGhpcy5hcHAudmF1bHQuY29uZmlnLmF0dGFjaG1lbnRGb2xkZXJQYXRoPT09Jy4vJykpe1xyXG5cdFx0XHRpZihub3RlLnBhdGguc3RhcnRzV2l0aChcclxuXHRcdFx0XHR0aGlzLmFwcC52YXVsdC5jb25maWcuYXR0YWNobWVudEZvbGRlclBhdGgpXHJcblx0XHRcdCl7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZih0aGlzLmFwcC52YXVsdC5jb25maWcudXNlcklnbm9yZUZpbHRlcnMpe1xyXG5cdFx0XHRmb3IobGV0IHggb2YgdGhpcy5hcHAudmF1bHQuY29uZmlnLnVzZXJJZ25vcmVGaWx0ZXJzKXtcclxuXHRcdFx0XHRpZihub3RlLnBhdGguc3RhcnRzV2l0aCh4KSl7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHN1Z2d1c3Rlcl9ub3RlKCl7XHJcblx0XHRsZXQgbm90ZXMgPSB0aGlzLnNvcnRfdGZpbGVzKFxyXG5cdFx0XHR0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLFxyXG5cdFx0XHRbJ210aW1lJywneCddXHJcblx0XHQpLmZpbHRlcigoZjpURmlsZSk9PnRoaXMuZmlsdGVyX3VzZXJfaWdub3JlKGYpKTtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGxldCBub3RlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoKGY6VEZpbGUpPT5mLnBhdGgsbm90ZXMpO1xyXG5cdFx0XHRyZXR1cm4gbm90ZTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvcGVuX25vdGUodGZpbGU6VEZpbGUsbmV3X3RhYj1mYWxzZSl7XHJcblx0XHRpZih0ZmlsZSl7XHJcblx0XHRcdGlmKHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmLnBpbm5lZCB8fCBuZXdfdGFiKXtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSkub3BlbkZpbGUodGZpbGUpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYub3BlbkZpbGUodGZpbGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBzdWdndXN0ZXJfb3Blbl9ub3RlKCl7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRsZXQgbm90ZSA9IGF3YWl0IHRoaXMuc3VnZ3VzdGVyX25vdGUoKTtcclxuXHRcdFx0Y29uc29sZS5sb2cobm90ZSk7XHJcblx0XHRcdHRoaXMub3Blbl9ub3RlKG5vdGUpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cclxuXHJcblx0Z2V0X3RmaWxlKHBhdGgpe1xyXG5cdFx0bGV0IG5hbWUgPSBwYXRoLnNwbGl0KCd8JylbMF0ucmVwbGFjZSgnW1snLCcnKS5yZXBsYWNlKCddXScsJycpO1xyXG5cdFx0cmV0dXJuIHRoaXMuZmluZF90ZmlsZShuYW1lKTtcclxuXHR9XHJcblxyXG5cdGdldCBNREZpbGVzKCl7XHJcblx0XHRyZXR1cm4gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHR9XHJcblxyXG5cdGdldCBjdXJyZW50X25vdGUoKXtcclxuXHRcdHJldHVybiB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdH1cclxuXHJcblx0Z2V0X2lubGlua3ModGZpbGU9dGhpcy5jdXJyZW50X25vdGUpe1xyXG5cdFx0aWYodGZpbGU9PW51bGwpe3JldHVybiBbXTt9XHJcblxyXG5cdFx0bGV0IHJlcyA9IG5ldyBBcnJheSgpO1xyXG5cclxuXHRcdGxldCBkdl9hcGkgPSB0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbihcImRhdGF2aWV3XCIpO1xyXG5cclxuXHRcdGxldCBpbmxpbmtzID0gZHZfYXBpLmluZGV4LmxpbmtzLmludk1hcC5nZXQodGZpbGUucGF0aCk7XHJcblx0XHRpZihpbmxpbmtzPT11bmRlZmluZWQpe1xyXG5cdFx0XHRyZXR1cm4gW107XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIEFycmF5LmZyb20oaW5saW5rcykubWFwKFxyXG5cdFx0XHRcdChwYXRoKT0+KHRoaXMuYXBwLnZhdWx0LmZpbGVNYXBbcGF0aF0pXHJcblx0XHRcdCkuZmlsdGVyKFxyXG5cdFx0XHRcdChpdGVtKT0+KGl0ZW0pXHJcblx0XHRcdClcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGdldF9vdXRsaW5rcyh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRpZih0ZmlsZT09bnVsbCl7cmV0dXJuIFtdO31cclxuXHJcblx0XHRsZXQgcmVzID0gbmV3IEFycmF5KCk7XHJcblx0XHRsZXQgZHZfYXBpID0gdGhpcy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJkYXRhdmlld1wiKTtcclxuXHRcdGxldCBpbmxpbmtzID0gZHZfYXBpLmluZGV4LmxpbmtzLm1hcC5nZXQodGZpbGUucGF0aCk7XHJcblx0XHRpZihpbmxpbmtzPT11bmRlZmluZWQpe1xyXG5cdFx0XHRyZXR1cm4gW107XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIEFycmF5LmZyb20oaW5saW5rcykubWFwKFxyXG5cdFx0XHRcdChwYXRoKT0+KHRoaXMuYXBwLnZhdWx0LmZpbGVNYXBbcGF0aF0pXHJcblx0XHRcdCkuZmlsdGVyKFxyXG5cdFx0XHRcdChpdGVtKT0+KGl0ZW0pXHJcblx0XHRcdClcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGdldF9saW5rcyh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRsZXQgaW5saW5rcyA9IHRoaXMuZ2V0X2lubGlua3ModGZpbGUpO1xyXG5cdFx0bGV0IG91dGxpbmtzID0gdGhpcy5nZXRfb3V0bGlua3ModGZpbGUpO1xyXG5cdFx0Zm9yKGxldCBsaW5rIG9mIGlubGlua3Mpe1xyXG5cdFx0XHRpZighb3V0bGlua3MuaW5jbHVkZXMobGluaykpe1xyXG5cdFx0XHRcdG91dGxpbmtzLnB1c2gobGluaylcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG91dGxpbmtzO1xyXG5cdH1cclxuXHJcblx0Z2V0X3NhbWVfcGFyZW50KHRmaWxlPXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdHJldHVybiB0aGlzLmdldF90ZmlsZXNfb2ZfZm9sZGVyKHRmaWxlPy5wYXJlbnQsZmFsc2UpO1xyXG5cdH1cclxuXHJcblx0Z2V0X3RmaWxlc19vZl9mb2xkZXIodGZvbGRlcjpURm9sZGVyLHdpdGhfY2hpbGRyZW49dHJ1ZSl7XHJcblx0XHRpZih0Zm9sZGVyPT1udWxsKXtyZXR1cm4gW107fVxyXG5cdFx0bGV0IG5vdGVzID0gW107XHJcblx0XHRmb3IobGV0IGMgb2YgdGZvbGRlci5jaGlsZHJlbil7XHJcblx0XHRcdGlmKGMgaW5zdGFuY2VvZiBURmlsZSAmJiBjLmV4dGVuc2lvbj09PSdtZCcpe1xyXG5cdFx0XHRcdG5vdGVzLnB1c2goYyk7XHJcblx0XHRcdH1lbHNlIGlmKGMgaW5zdGFuY2VvZiBURm9sZGVyICYmIHdpdGhfY2hpbGRyZW4pe1xyXG5cdFx0XHRcdGxldCB0bXAgPSB0aGlzLmdldF90ZmlsZXNfb2ZfZm9sZGVyKGMpO1xyXG5cdFx0XHRcdGZvcihsZXQgeCBvZiB0bXApe1xyXG5cdFx0XHRcdFx0bm90ZXMucHVzaCh4KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBub3RlcztcclxuXHJcblx0fVxyXG5cclxuXHRwYXJzZV9pdGVtKGl0ZW0pe1xyXG5cdFx0dmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykuc2xpY2UoMSk7XHJcblx0XHRsZXQga3dhcmdzID0ge31cclxuXHRcdGlmKGFyZ3MubGVuZ3RoPT0xKXtcclxuXHRcdFx0a3dhcmdzID0gYXJnc1swXTtcclxuXHRcdH1cclxuXHRcdGxldCBzZXEgPSBrd2FyZ3NbJ3NlcSddO1xyXG5cclxuXHRcdGlmKHNlcSE9bnVsbCl7XHJcblx0XHRcdHJldHVybiBgJHtzZXF9IC0+ICR7aXRlbX1gO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGl0ZW07XHJcblx0fVxyXG5cclxuXHR0ZmlsZV90b19zdHJpbmcodGZpbGU6VEZpbGUpe1xyXG5cdFx0bGV0IGN1cnIgPSB0aGlzLmN1cnJlbnRfbm90ZTtcclxuXHRcdGxldCBtc2cgPSAnJztcclxuXHRcdGlmKHRmaWxlLnBhcmVudD09Y3Vyci5wYXJlbnQpe1xyXG5cdFx0XHRtc2cgPSB0ZmlsZS5iYXNlbmFtZTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRtc2cgPSB0ZmlsZS5wYXRoO1xyXG5cdFx0fVxyXG5cdFx0aWYodGZpbGU9PXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdFx0cmV0dXJuIGBcdUQ4M0NcdURGRTAgJHttc2d9YFxyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHJldHVybiBtc2c7XHJcblx0XHR9XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdHBhcnNlX2l0ZW1zKGl0ZW1zOkFycmF5PHN0cmluZ3xURmlsZT4pe1xyXG5cdFx0dmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykuc2xpY2UoMSk7XHJcblx0XHRsZXQga3dhcmdzID0ge31cclxuXHRcdGlmKGFyZ3MubGVuZ3RoPT0xKXtcclxuXHRcdFx0a3dhcmdzID0gYXJnc1swXTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgcmVzID0gW107XHJcblx0XHRsZXQgaSA9IDA7XHJcblx0XHR3aGlsZShpPGl0ZW1zLmxlbmd0aCl7XHJcblx0XHRcdGlmKGt3YXJnc1snc2VxJ10pe1xyXG5cdFx0XHRcdHJlcy5wdXNoKHRoaXMucGFyc2VfaXRlbShpdGVtc1tpXSx7J3NlcSc6aSsxfSkpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRyZXMucHVzaCh0aGlzLnBhcnNlX2l0ZW0oaXRlbXNbaV0pKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aSsrO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJlcztcclxuXHR9XHJcblxyXG5cdGFzeW5jIHN1Z2dlc3Rlcl9ub3Rlcyh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSxjdXJyX2ZpcnN0PXRydWUsc21vZGU9Jycpe1xyXG5cdFx0bGV0IGt2ID0gW1x0XHRcdFxyXG5cdFx0XHQnXHU1NDBDXHU3RUE3XHU3NkVFXHU1RjU1JyxcclxuXHRcdFx0J1x1N0IxNFx1OEJCMFx1OTRGRVx1Njc2MScsXHJcblx0XHRcdCdcdTU0MENcdTdFQTdcdTc2RUVcdTVGNTUrXHU1QjUwXHU3NkVFXHU1RjU1JyxcclxuXHRcdFx0J1x1NTFGQVx1OTRGRStcdTUxNjVcdTk0RkUnLFxyXG5cdFx0XHQnXHU1MTY1XHU5NEZFJyxcclxuXHRcdFx0J1x1NTFGQVx1OTRGRScsXHJcblx0XHRcdCdcdTYyNDBcdTY3MDlcdTdCMTRcdThCQjAnLFxyXG5cdFx0XHQncmVjZW50LWZpbGVzLW9ic2lkaWFuJ1xyXG5cdFx0XVxyXG5cdFx0XHJcblx0XHRpZihjdXJyX2ZpcnN0KXtcclxuXHRcdFx0a3YudW5zaGlmdCgnXHU1RjUzXHU1MjREXHU3QjE0XHU4QkIwJylcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRrdi5wdXNoKCdcdTVGNTNcdTUyNERcdTdCMTRcdThCQjAnKVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRsZXQga3ZzID0gW11cclxuXHRcdGxldCBpID0gMTtcclxuXHRcdGZvcihsZXQgeCBvZiBrdil7XHJcblx0XHRcdGt2cy5wdXNoKGAke2krK30gJHt4fWApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBtb2RlID0gJyc7XHJcblx0XHRpZihrdi5jb250YWlucyhzbW9kZSkpe1xyXG5cdFx0XHRtb2RlID0gc21vZGU7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bW9kZSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKGt2cyxrdik7XHJcblx0XHR9XHJcblx0XHRpZihtb2RlPT09J1x1NUY1M1x1NTI0RFx1N0IxNFx1OEJCMCcpe1xyXG5cdFx0XHRyZXR1cm4gW3RmaWxlXTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0nXHU1NDBDXHU3RUE3XHU3NkVFXHU1RjU1Jyl7XHJcblx0XHRcdHJldHVybiB0aGlzLmdldF9zYW1lX3BhcmVudCh0ZmlsZSk7XHJcblx0XHR9ZWxzZSBpZihtb2RlPT09J1x1NTQwQ1x1N0VBN1x1NzZFRVx1NUY1NStcdTVCNTBcdTc2RUVcdTVGNTUnKXtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0X3RmaWxlc19vZl9mb2xkZXIodGZpbGU/LnBhcmVudCx0cnVlKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0nXHU1MUZBXHU5NEZFK1x1NTE2NVx1OTRGRScpe1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRfbGlua3ModGZpbGUpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdcdTUxNjVcdTk0RkUnKXtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0X2lubGlua3ModGZpbGUpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdcdTUxRkFcdTk0RkUnKXtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0X291dGxpbmtzKHRmaWxlKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0nXHU2MjQwXHU2NzA5XHU3QjE0XHU4QkIwJyl7XHJcblx0XHRcdHJldHVybiB0aGlzLk1ERmlsZXM7XHJcblx0XHR9ZWxzZSBpZihtb2RlPT09J3JlY2VudC1maWxlcy1vYnNpZGlhbicpe1xyXG5cdFx0XHRsZXQgciA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicmVjZW50LWZpbGVzLW9ic2lkaWFuXCIpO1xyXG5cdFx0XHRpZighcil7cmV0dXJuIFtdO31cclxuXHRcdFx0cmV0dXJuIE9iamVjdC52YWx1ZXMoXHJcblx0XHRcdFx0ci5kYXRhLnJlY2VudEZpbGVzKS5tYXAoZj0+dGhpcy5hcHAudmF1bHQuZmlsZU1hcFtmLnBhdGhdXHJcblx0XHRcdCkuZmlsdGVyKGY9PmYpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdcdTdCMTRcdThCQjBcdTk0RkVcdTY3NjEnKXtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0X2NoYWluKFxyXG5cdFx0XHRcdHRmaWxlLFxyXG5cdFx0XHRcdE51bWJlcih0aGlzLnBsdWdpbi5zZXR0aW5ncy5QcmV2Q2hhaW4pLFxyXG5cdFx0XHRcdE51bWJlcih0aGlzLnBsdWdpbi5zZXR0aW5ncy5OZXh0Q2hhaW4pXHJcblx0XHRcdCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIFtdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdC8vIENoYWluXHJcblx0Z2V0X3ByZXZfbm90ZSh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRpZih0ZmlsZS5kZWxldGVkKXtcclxuXHRcdFx0bGV0IHRmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdFx0dGZpbGVzID0gdGZpbGVzLmZpbHRlcihmPT5gW1ske3RmaWxlLmJhc2VuYW1lfV1dYD09PXRoaXMuZWRpdG9yLmdldF9mcm9udG1hdHRlcihmLHRoaXMubmV4dCkpO1xyXG5cdFx0XHRpZih0ZmlsZXMubGVuZ3RoPjApe1xyXG5cdFx0XHRcdHJldHVybiB0ZmlsZVswXTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH1lbHNle1xyXG5cdFx0XHRsZXQgbmFtZSA9IHRoaXMuZWRpdG9yLmdldF9mcm9udG1hdHRlcih0ZmlsZSx0aGlzLnByZXYpO1xyXG5cdFx0XHRpZighbmFtZSl7cmV0dXJuIG51bGw7fVxyXG5cclxuXHRcdFx0bGV0IG5vdGUgPSB0aGlzLmdldF90ZmlsZShuYW1lKTtcclxuXHRcdFx0cmV0dXJuIG5vdGU/bm90ZTpudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b3Blbl9wcmV2X25vdGVzKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdGxldCBub3RlID0gdGhpcy5nZXRfcHJldl9ub3RlKHRmaWxlKTtcclxuXHRcdHRoaXMub3Blbl9ub3RlKG5vdGUpO1xyXG5cdH1cclxuXHJcblx0Z2V0X25leHRfbm90ZSh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRpZih0ZmlsZS5kZWxldGVkKXtcclxuXHRcdFx0bGV0IHRmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdFx0dGZpbGVzID0gdGZpbGVzLmZpbHRlcihmPT5gW1ske3RmaWxlLmJhc2VuYW1lfV1dYD09PXRoaXMuZWRpdG9yLmdldF9mcm9udG1hdHRlcihmLHRoaXMucHJldikpO1xyXG5cdFx0XHRpZih0ZmlsZXMubGVuZ3RoPjApe1xyXG5cdFx0XHRcdHJldHVybiB0ZmlsZXNbMF07XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bGV0IG5hbWUgPSB0aGlzLmVkaXRvci5nZXRfZnJvbnRtYXR0ZXIodGZpbGUsdGhpcy5uZXh0KTtcclxuXHRcdFx0aWYoIW5hbWUpe3JldHVybiBudWxsO31cclxuXHJcblx0XHRcdGxldCBub3RlID0gdGhpcy5nZXRfdGZpbGUobmFtZSk7XHJcblx0XHRcdHJldHVybiBub3RlP25vdGU6bnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG9wZW5fbmV4dF9ub3Rlcyh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRsZXQgbm90ZSA9IHRoaXMuZ2V0X25leHRfbm90ZSh0ZmlsZSk7XHJcblx0XHR0aGlzLm9wZW5fbm90ZShub3RlKTtcclxuXHR9XHJcblxyXG5cdGdldF9jaGFpbih0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSxwcmV2PTEwLG5leHQ9MTAsd2l0aF9zZWxmPXRydWUpe1xyXG5cdFx0aWYodGZpbGU9PW51bGwpe3JldHVybiBbXTt9XHJcblx0XHRcclxuXHRcdGxldCByZXMgPSBuZXcgQXJyYXkoKTtcclxuXHRcdGlmKHdpdGhfc2VsZil7XHJcblx0XHRcdHJlcy5wdXNoKHRmaWxlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0bGV0IHRtcCA9IHRmaWxlO1xyXG5cdFx0Zm9yKGxldCBpPXByZXY7aSE9MDtpLS0pe1x0XHJcblx0XHRcdGxldCBub3RlID0gdGhpcy5nZXRfcHJldl9ub3RlKHRtcCk7XHJcblx0XHRcdGlmKCFub3RlKXtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fWVsc2UgaWYocmVzLmluY2x1ZGVzKG5vdGUpKXtcclxuXHRcdFx0XHQvLyBcdTZCQ0ZcdTZCMjFcdTgxRUFcdTUyQThcdTUyMjBcdTk2NjRcdTVGQUFcdTczQUZcdTk0RkVcdTYzQTVcclxuXHRcdFx0XHR0aGlzLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIobm90ZSx0aGlzLm5leHQsXCJcIik7XHJcblx0XHRcdFx0dGhpcy5lZGl0b3Iuc2V0X2Zyb250bWF0dGVyKHRtcCx0aGlzLnByZXYsXCJcIik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHJlcy51bnNoaWZ0KG5vdGUpO1xyXG5cdFx0XHRcdHRtcCA9IG5vdGU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcclxuXHRcdHRtcCA9IHRmaWxlO1xyXG5cdFx0Zm9yKGxldCBpPW5leHQ7aSE9MDtpLS0pe1xyXG5cdFx0XHRsZXQgbm90ZSA9IHRoaXMuZ2V0X25leHRfbm90ZSh0bXApO1xyXG5cdFx0XHRpZighbm90ZSl7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1lbHNlIGlmKHJlcy5pbmNsdWRlcyhub3RlKSl7XHJcblx0XHRcdFx0Ly8gXHU2QkNGXHU2QjIxXHU4MUVBXHU1MkE4XHU1MjIwXHU5NjY0XHU1RkFBXHU3M0FGXHU5NEZFXHU2M0E1XHJcblx0XHRcdFx0dGhpcy5lZGl0b3Iuc2V0X2Zyb250bWF0dGVyKG5vdGUsdGhpcy5wcmV2LFwiXCIpO1xyXG5cdFx0XHRcdHRoaXMuZWRpdG9yLnNldF9mcm9udG1hdHRlcih0bXAsdGhpcy5uZXh0LFwiXCIpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRyZXMucHVzaChub3RlKTtcclxuXHRcdFx0XHR0bXAgPSBub3RlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzO1xyXG5cdH1cclxuXHJcblx0Z2V0X2ZpcnN0X25vdGUodGZpbGU9dGhpcy5jdXJyZW50X25vdGUpe1xyXG5cdFx0bGV0IG5vdGVzID0gdGhpcy5nZXRfY2hhaW4odGZpbGUsLTEsMCxmYWxzZSk7XHJcblx0XHRpZihub3Rlcy5sZW5ndGg+MCl7XHJcblx0XHRcdHJldHVybiBub3Rlc1swXTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGdldF9sYXN0X25vdGUodGZpbGU9dGhpcy5jdXJyZW50X25vdGUpe1xyXG5cdFx0bGV0IG5vdGVzID0gdGhpcy5nZXRfY2hhaW4odGZpbGUsMCwtMSxmYWxzZSk7XHJcblx0XHRpZihub3Rlcy5sZW5ndGg+MCl7XHJcblx0XHRcdHJldHVybiBub3Rlc1tub3Rlcy5sZW5ndGgtMV07XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRcclxuXHJcblx0Z2V0X25laWdoYm9ycyh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRyZXR1cm4gW1xyXG5cdFx0XHR0aGlzLmdldF9wcmV2X25vdGUodGZpbGUpLFxyXG5cdFx0XHR0aGlzLmdldF9uZXh0X25vdGUodGZpbGUpLFxyXG5cdFx0XVxyXG5cdH1cclxuXHRcclxuXHRhc3luYyBjaGFpbl9zZXRfcHJldih0ZmlsZTpURmlsZSxwcmV2OlRGaWxlKXtcclxuXHRcdGlmKHRmaWxlPT1udWxsIHx8IHRmaWxlPT1wcmV2KXtyZXR1cm47fVxyXG5cdFx0aWYocHJldj09bnVsbCApe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIoXHJcblx0XHRcdFx0dGZpbGUsdGhpcy5wcmV2LCcnXHJcblx0XHRcdCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0YXdhaXQgdGhpcy5lZGl0b3Iuc2V0X2Zyb250bWF0dGVyKFxyXG5cdFx0XHRcdHRmaWxlLHRoaXMucHJldixgW1ske3ByZXYuYmFzZW5hbWV9XV1gXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBjaGFpbl9zZXRfbmV4dCh0ZmlsZTpURmlsZSxuZXh0OlRGaWxlKXtcclxuXHRcdGlmKHRmaWxlPT1udWxsIHx8IHRmaWxlPT1uZXh0KXtyZXR1cm47fVxyXG5cdFx0aWYobmV4dD09bnVsbCApe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIoXHJcblx0XHRcdFx0dGZpbGUsdGhpcy5uZXh0LCcnXHJcblx0XHRcdCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0YXdhaXQgdGhpcy5lZGl0b3Iuc2V0X2Zyb250bWF0dGVyKFxyXG5cdFx0XHRcdHRmaWxlLHRoaXMubmV4dCxgW1ske25leHQuYmFzZW5hbWV9XV1gXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBjaGFpbl9zZXRfcHJldl9uZXh0KHByZXY6VEZpbGUsbmV4dDpURmlsZSl7XHJcblx0XHRhd2FpdCB0aGlzLmNoYWluX3NldF9wcmV2KG5leHQscHJldik7XHJcblx0XHRhd2FpdCB0aGlzLmNoYWluX3NldF9uZXh0KHByZXYsbmV4dCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjaGFpbl9wb3Bfbm9kZSh0ZmlsZTpURmlsZSl7XHJcblx0XHRsZXQgbm90ZXMgPSB0aGlzLmdldF9uZWlnaGJvcnModGZpbGUpO1xyXG5cdFx0YXdhaXQgdGhpcy5jaGFpbl9zZXRfcHJldl9uZXh0KG5vdGVzWzBdLG5vdGVzWzFdKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX2luc2VydF9ub2RlX2FzX2hlYWQodGZpbGU6VEZpbGUsYW5jaG9yOlRGaWxlKXtcclxuXHRcdGxldCBoZWFkID0gdGhpcy5nZXRfZmlyc3Rfbm90ZShhbmNob3IpO1xyXG5cdFx0YXdhaXQgdGhpcy5jaGFpbl9zZXRfcHJldl9uZXh0KHRmaWxlLGhlYWQpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY2hhaW5faW5zZXJ0X25vZGVfYXNfdGFpbCh0ZmlsZTpURmlsZSxhbmNob3I6VEZpbGUpe1xyXG5cdFx0bGV0IHRhaWwgPSB0aGlzLmdldF9sYXN0X25vdGUoYW5jaG9yKTtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X3ByZXZfbmV4dCh0YWlsLHRmaWxlKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX2luc2VydF9ub2RlX2FmdGVyKHRmaWxlOlRGaWxlLGFuY2hvcjpURmlsZSl7XHJcblx0XHR0aGlzLmNoYWluX3BvcF9ub2RlKHRmaWxlKTtcclxuXHRcdGxldCBuZXh0ID0gdGhpcy5nZXRfbmV4dF9ub3RlKGFuY2hvcik7XHJcblx0XHRhd2FpdCB0aGlzLmNoYWluX3NldF9wcmV2X25leHQoYW5jaG9yLHRmaWxlKTtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X3ByZXZfbmV4dCh0ZmlsZSxuZXh0KTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX2luc2VydF9ub2RlX2JlZm9yZSh0ZmlsZTpURmlsZSxhbmNob3I6VEZpbGUpe1xyXG5cdFx0dGhpcy5jaGFpbl9wb3Bfbm9kZSh0ZmlsZSk7XHJcblx0XHRsZXQgcHJldiA9IHRoaXMuZ2V0X3ByZXZfbm90ZShhbmNob3IpO1xyXG5cdFx0YXdhaXQgdGhpcy5jaGFpbl9zZXRfcHJldl9uZXh0KHRmaWxlLGFuY2hvcik7XHJcblx0XHRhd2FpdCB0aGlzLmNoYWluX3NldF9wcmV2X25leHQocHJldix0ZmlsZSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjaGFpbl9pbnNlcnRfZm9sZGVyX2FmdGVyKHRmaWxlOlRGaWxlLGFuY2hvcjpURmlsZSl7XHJcblx0XHRpZighdGZpbGUucGFyZW50IHx8IHRmaWxlLnBhcmVudC5wYXJlbnQhPWFuY2hvci5wYXJlbnQpe1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRsZXQgbm90ZSA9IHRoaXMuZ2V0X3RmaWxlKHRmaWxlLnBhcmVudC5uYW1lKTtcclxuXHRcdGlmKCFub3RlKXtcclxuXHRcdFx0Y29uc29sZS5sb2coJ1x1OTcwMFx1ODk4MVx1ODk4MVx1NTE0OFx1NTIxQlx1NUVGQVx1NTQwQ1x1NTQwRFx1N0IxNFx1OEJCMCcpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5lZGl0b3Iuc2V0X2Zyb250bWF0dGVyKFxyXG5cdFx0XHRub3RlLFwiRm9sZGVyUHJldk5vdGVcIixgW1ske2FuY2hvci5iYXNlbmFtZX1dXSswLjVgXHJcblx0XHQpXHJcblx0fVxyXG5cclxuXHRhc3luYyBjaGFpbl9saW5rX3RmaWxlcyh0ZmlsZXM6QXJyYXk8VEZpbGU+KXtcclxuXHRcdGxldCBwcmV2ID0gdGhpcy5nZXRfcHJldl9ub3RlKHRmaWxlc1swXSk7XHJcblx0XHRpZih0ZmlsZXMuY29udGFpbnMocHJldikpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNoYWluX3NldF9wcmV2KHRmaWxlc1swXSxudWxsKTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgbmV4dCA9IHRoaXMuZ2V0X25leHRfbm90ZSh0ZmlsZXNbdGZpbGVzLmxlbmd0aC0xXSk7XHJcblx0XHRpZih0ZmlsZXMuY29udGFpbnMobmV4dCkpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNoYWluX3NldF9uZXh0KHRmaWxlc1t0ZmlsZXMubGVuZ3RoLTFdLG51bGwpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblxyXG5cdFx0Zm9yKGxldCBpPTA7aTx0ZmlsZXMubGVuZ3RoLTE7aSsrKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5jaGFpbl9zZXRfcHJldl9uZXh0KHRmaWxlc1tpXSx0ZmlsZXNbaSsxXSlcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0YXN5bmMgY2hhaW5fc3VnZ2VzdGVyX3RmaWxlcyh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSxtb2RlPSdzdWdnZXN0ZXInKXtcclxuXHRcdGxldCBub3RlcyA9IHRoaXMuZ2V0X3NhbWVfcGFyZW50KHRmaWxlKTtcclxuXHRcdGlmKG5vdGVzLmxlbmd0aD09MCl7cmV0dXJuO31cclxuXHJcblx0XHRsZXQgZmlsZXMgPSBhd2FpdCB0aGlzLnN1Z2dlc3Rlcl9zb3J0KG5vdGVzKTtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fbGlua190ZmlsZXMoZmlsZXMpO1xyXG5cdH1cclxuXHJcblx0c29ydF90ZmlsZXMoZmlsZXM6QXJyYXk8VEZpbGU+LGZpZWxkOmFueSl7XHJcblx0XHRpZih0eXBlb2YgZmllbGQgPT09ICdzdHJpbmcnKXtcclxuXHRcdFx0aWYoZmllbGQ9PT0nbmFtZScpe1xyXG5cdFx0XHRcdHJldHVybiBmaWxlcy5zb3J0KFxyXG5cdFx0XHRcdFx0KGEsYik9PihhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1lbHNlIGlmKGZpZWxkPT09J210aW1lJyl7XHJcblx0XHRcdFx0cmV0dXJuIGZpbGVzLnNvcnQoXHJcblx0XHRcdFx0XHQoYSxiKT0+KGEuc3RhdC5tdGltZS1iLnN0YXQubXRpbWUpXHJcblx0XHRcdFx0KVxyXG5cdFx0XHR9ZWxzZSBpZihmaWVsZD09PSdjdGltZScpe1xyXG5cdFx0XHRcdHJldHVybiBmaWxlcy5zb3J0KFxyXG5cdFx0XHRcdFx0KGEsYik9PihhLnN0YXQuY3RpbWUtYi5zdGF0LmN0aW1lKVxyXG5cdFx0XHRcdClcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKGZpZWxkPT09J2NoYWluJyl7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuc29ydF90ZmlsZXNfYnlfY2hhaW4oZmlsZXMpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBmaWxlcztcclxuXHRcdH1lbHNlIGlmKHR5cGVvZiBmaWVsZCA9PT0gJ29iamVjdCcpe1xyXG5cdFx0XHRpZihmaWVsZCBpbnN0YW5jZW9mIEFycmF5KXtcclxuXHRcdFx0XHRsZXQgbmZpbGVzID0gdGhpcy5zb3J0X3RmaWxlcyhmaWxlcyxmaWVsZFswXSk7XHJcblx0XHRcdFx0aWYoZmllbGQubGVuZ3RoPj0yKXtcclxuXHRcdFx0XHRcdGlmKGZpZWxkWzFdPT09J3gnKXtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIG5maWxlcy5yZXZlcnNlKClcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIG5maWxlcztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGZpbGVzO1xyXG5cdH1cclxuXHRcclxuXHRzb3J0X3RmaWxlc19ieV9jaGFpbih0ZmlsZXM6QXJyYXk8VEZpbGU+KXtcclxuXHRcdGxldCBub3RlcyA9IHRmaWxlcy5tYXAoZj0+Zik7XHJcblx0XHRsZXQgcmVzID0gW107XHJcblx0XHR3aGlsZShub3Rlcy5sZW5ndGg+MCl7XHJcblx0XHRcdGxldCBub3RlID0gbm90ZXNbMF07XHJcblx0XHRcdGxldCB4Y2hhaW4gPSB0aGlzLmdldF9jaGFpbihub3RlLC0xLC0xKTtcclxuXHRcdFx0Zm9yKGxldCB4IG9mIHhjaGFpbil7XHJcblx0XHRcdFx0aWYobm90ZXMuY29udGFpbnMoeCkpe1xyXG5cdFx0XHRcdFx0cmVzLnB1c2goeCk7XHJcblx0XHRcdFx0XHRub3Rlcy5yZW1vdmUoeCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzO1xyXG5cdH1cclxuXHJcblx0c29ydF90ZmlsZXNfZm9sZGVyX2ZpcnN0KHRmaWxlczpBcnJheTxURmlsZT4pe1xyXG5cdFx0bGV0IEEgPSB0ZmlsZXMuZmlsdGVyKGY9PmYgaW5zdGFuY2VvZiBURm9sZGVyKS5zb3J0KChhLGIpPT4oYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpO1xyXG5cdFx0bGV0IEIgPSB0ZmlsZXMuZmlsdGVyKGY9PmYgaW5zdGFuY2VvZiBURmlsZSk7XHJcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uZWRpdG9yLmNvbmNhdF9hcnJheShbQSxCXSk7XHJcblx0fVxyXG5cclxuXHRzb3J0X3RmaWxlc19ieV9maWVsZCh0ZmlsZXM6QXJyYXk8VEZpbGU+LGZpZWxkOnN0cmluZyl7XHJcblx0XHRsZXQgcmVzID0gdGZpbGVzLnNvcnQoXHJcblx0XHRcdChhLGIpPT57XHJcblx0XHRcdFx0bGV0IGF2ID0gdGhpcy5lZGl0b3IuZ2V0X2Zyb250bWF0dGVyKGEsZmllbGQpO1xyXG5cdFx0XHRcdGxldCBidiA9IHRoaXMuZWRpdG9yLmdldF9mcm9udG1hdHRlcihiLGZpZWxkKTtcclxuXHRcdFx0XHRyZXR1cm4gYXYgLSBidjtcclxuXHRcdFx0fVxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIHJlcztcclxuXHR9XHJcblxyXG5cdGFzeW5jIHN1Z2dlc3Rlcl9zb3J0KHRmaWxlczpBcnJheTxURmlsZT4pe1xyXG5cdFx0aWYoIXRmaWxlcyl7cmV0dXJuIFtdO31cclxuXHRcdGlmKHRmaWxlcy5sZW5ndGg9PTApe3JldHVybiBbXX07XHJcblx0XHRsZXQga3YgPSB7XHJcblx0XHRcdCdjaGFpbic6J2NoYWluJyxcclxuXHRcdFx0J25hbWUnOiduYW1lJyxcclxuXHRcdFx0J2N0aW1lJzonY3RpbWUnLFxyXG5cdFx0XHQnbXRpbWUnOidtdGltZScsXHJcblx0XHRcdCduYW1lIFx1NTAxMlx1NUU4Ric6WyduYW1lJywneCddLFxyXG5cdFx0XHQnY3RpbWUgXHU1MDEyXHU1RThGJzpbJ2N0aW1lJywneCddLFxyXG5cdFx0XHQnbXRpbWUgXHU1MDEyXHU1RThGJzpbJ210aW1lJywneCddLFxyXG5cdFx0fVxyXG5cdFx0bGV0IGZpZWxkID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXHJcblx0XHRcdE9iamVjdC5rZXlzKGt2KSxcclxuXHRcdFx0T2JqZWN0LnZhbHVlcyhrdilcclxuXHRcdCk7XHJcblx0XHRpZihmaWVsZD09bnVsbCl7cmV0dXJuIFtdO31cclxuXHRcdHJldHVybiB0aGlzLnNvcnRfdGZpbGVzKHRmaWxlcyxmaWVsZCk7XHJcblx0fVxyXG5cclxuXHR2aWV3X3NvcnRfYnlfY2hhaW4oKXtcclxuXHRcdGxldCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcclxuXHRcdFx0XCJmaWxlLWV4cGxvcmVyXCJcclxuXHRcdClbMF0/LnZpZXc7XHJcblx0XHRpZighdmlldyl7cmV0dXJuO31cclxuXHRcdHZpZXcuc29ydCgpO1xyXG5cdFx0aWYodmlldy5yZWFkeSl7XHJcblx0XHRcdGZvcihsZXQgcGF0aCBpbiB2aWV3LmZpbGVJdGVtcyl7XHJcblx0XHRcdFx0bGV0IGl0ZW0gPSB2aWV3LmZpbGVJdGVtc1twYXRoXTtcclxuXHRcdFx0XHRpZihpdGVtLnZDaGlsZHJlbil7XHJcblx0XHRcdFx0XHRsZXQgZmlsZXMgPSBpdGVtLnZDaGlsZHJlbi5fY2hpbGRyZW4ubWFwKGY9PmYuZmlsZSk7XHJcblx0XHRcdFx0XHRmaWxlcyA9IHRoaXMuc29ydF90ZmlsZXNfYnlfY2hhaW4oZmlsZXMpO1xyXG5cdFx0XHRcdFx0bGV0IGNoaWxkcmVuID0gaXRlbS52Q2hpbGRyZW4uX2NoaWxkcmVuLnNvcnQoXHJcblx0XHRcdFx0XHRcdChhLGIpPT5maWxlcy5pbmRleE9mKGEuZmlsZSktZmlsZXMuaW5kZXhPZihiLmZpbGUpXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0XHRpdGVtLnZDaGlsZHJlbi5zZXRDaGlsZHJlbihjaGlsZHJlbik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHZpZXcudHJlZS5pbmZpbml0eVNjcm9sbC5jb21wdXRlKClcclxuXHRcdH1cclxuXHR9XHJcblxyXG59IiwgImltcG9ydCB7IFxyXG5cdEFwcCwgRWRpdG9yLCBNYXJrZG93blZpZXcsIE1vZGFsLCBOb3RpY2UsIFxyXG5cdFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyxcclxuXHRURmlsZSxURm9sZGVyXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRfdHBfZnVuYyhhcHA6QXBwLHRhcmdldDpzdHJpbmcpIHtcclxuXHQvLyBcdTgzQjdcdTUzRDYgIHRlbXBsYXRlciBcdTUxRkRcdTY1NzBcclxuXHQvLyBnZXRfdHBfZnVuYyhcInRwLnN5c3RlbS5wcm9tcHRcIilcclxuXHJcblx0bGV0IHRlbXBsYXRlciA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcclxuXHRcdFwidGVtcGxhdGVyLW9ic2lkaWFuXCJcclxuXHQpO1xyXG5cclxuXHRsZXQgaXRlbXMgPSB0YXJnZXQuc3BsaXQoXCIuXCIpO1xyXG5cdGlmKGl0ZW1zWzBdLmxvY2FsZUNvbXBhcmUoXCJ0cFwiKSE9MCB8fCBpdGVtcy5sZW5ndGghPTMpe3JldHVybiB1bmRlZmluZWQ7fVxyXG5cdFxyXG5cdGxldCBtb2R1bGVzID0gdGVtcGxhdGVyLnRlbXBsYXRlci5mdW5jdGlvbnNfZ2VuZXJhdG9yLlxyXG5cdFx0aW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXkuZmlsdGVyKFxyXG5cdFx0XHQoaXRlbTphbnkpPT4oaXRlbS5uYW1lLmxvY2FsZUNvbXBhcmUoaXRlbXNbMV0pPT0wKVxyXG5cdFx0KTtcclxuXHJcblx0aWYobW9kdWxlcy5sZW5ndGg9PTApe3JldHVybiB1bmRlZmluZWR9XHJcblx0XHJcblx0cmV0dXJuIG1vZHVsZXNbMF0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoaXRlbXNbMl0pO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldF9wcm90b3R5cGUodCwgZSkge1xyXG4gICAgLy8gXHU1RjUzIGUgXHU0RTJEXHU2NzA5XHU1OTFBXHU0RTJBXHU1OTFBXHU0RTJBXHU1MUZEXHU2NTcwXHU2NUY2XHVGRjBDXHU4RkQ0XHU1NkRFXHU0RTAwXHU0RTJBXHU1MUZEXHU2NTcwXHVGRjBDXHU2MjY3XHU4ODRDXHU2MjQwXHU2NzA5XHU1MUZEXHU2NTcwXHJcbiAgICAvL1xyXG4gICAgbGV0IHIgPSBPYmplY3Qua2V5cyhlKS5tYXAoaT0+c2V0X3Byb3RvdHlwZV9vbih0LCBpLCBlW2ldKSk7XHJcbiAgICByZXR1cm4gci5sZW5ndGggPT09IDEgPyByWzBdIDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgci5mb3JFYWNoKGk9PmkoKSlcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0X3Byb3RvdHlwZV9vbihwcm90b3R5cGUsIG5hbWUsIGZ1bmMpIHtcclxuICAgIC8vIHByb3RvdHlwZVx1RkYxQVx1NzZFRVx1NjgwN1x1NUJGOVx1OEM2MSBPYmplY3QucHJvdG90eXBlIFx1NjIxNiBvYmplY3QuY29uc3RydWN0b3IucHJvdG90eXBlXHJcbiAgICAvLyBuYW1lXHVGRjFBXHU1QzVFXHU2MDI3XHU1NDBEXHJcbiAgICAvLyBmdW5jOiBcdTRGMjBcdTUzQzJcdTRFM0EgZnVuYyhwcm90b3R5cGVbbmFtZV0pXHVGRjBDXHU3RUM0XHU1NDA4XHU2MjY3XHU4ODRDXHU2NUIwXHU1MUZEXHU2NTcwXHU1NDhDXHU2NUU3XHU1MUZEXHU2NTcwXHJcblx0bGV0IG9yZ19mdW5jID0gcHJvdG90eXBlW25hbWVdXHJcblx0ICAsIGlzT3duUHJvcGVydHkgPSBwcm90b3R5cGUuaGFzT3duUHJvcGVydHkobmFtZSlcclxuXHQgICwgZmluYWxfZnVuYyA9IGZ1bmMob3JnX2Z1bmMpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmKG9yZ19mdW5jKXtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZmluYWxfZnVuYywgb3JnX2Z1bmMpO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGEsIGZpbmFsX2Z1bmMpO1xyXG4gICAgcHJvdG90eXBlW25hbWVdID0gYTtcclxuICAgIHJldHVybiBzO1xyXG5cclxuXHRmdW5jdGlvbiBhKC4uLmQpIHtcclxuICAgICAgICBpZihmaW5hbF9mdW5jID09PSBvcmdfZnVuYyAmJiBwcm90b3R5cGVbbmFtZV0gPT09IGEpe1xyXG4gICAgICAgICAgICBzKCk7XHJcbiAgICAgICAgfVxyXG5cdFx0cmV0dXJuICBmaW5hbF9mdW5jLmFwcGx5KHRoaXMsIGQpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBzKCkge1xyXG4gICAgICAgIGlmKHByb3RvdHlwZVtuYW1lXSA9PT0gYSl7XHJcbiAgICAgICAgICAgIGlmKGlzT3duUHJvcGVydHkpe1xyXG4gICAgICAgICAgICAgICAgcHJvdG90eXBlW25hbWVdID0gb3JnX2Z1bmM7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHByb3RvdHlwZVtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihmaW5hbF9mdW5jICE9PSBvcmdfZnVuYyl7XHJcbiAgICAgICAgICAgIGZpbmFsX2Z1bmMgPSBvcmdfZnVuYztcclxuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGEsIG9yZ19mdW5jIHx8IEZ1bmN0aW9uKVxyXG4gICAgICAgIH1cclxuXHR9XHJcbn0iLCAiaW1wb3J0IHsgXHJcblx0QXBwLFRBYnN0cmFjdEZpbGUsVEZvbGRlcixWYXVsdFxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7Tm90ZUNoYWluUGx1Z2lufSBmcm9tIFwiLi4vbWFpblwiO1xyXG5cclxuY2hhaW5fc29ydCA9IGZ1bmN0aW9uKG9yZ19zb3J0KSB7XHJcblx0bGV0IHBsdWdpbiA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbignbm90ZS1jaGFpbicpO1xyXG5cdHJldHVybiBmdW5jdGlvbiguLi5kKXtcclxuXHRcdGlmKHBsdWdpbil7XHJcblx0XHRcdGlmKHBsdWdpbj8uc2V0dGluZ3MuaXNTb3J0RmlsZUV4cGxvcmVyKXtcclxuXHRcdFx0XHR2YXIgZSA9IHRoaXMuZmlsZVxyXG5cdFx0XHRcdCwgdCA9IHRoaXMudmlld1xyXG5cdFx0XHRcdCwgaSA9IGUuY2hpbGRyZW4uc2xpY2UoKTtcclxuXHRcdFx0XHRpID0gaS5maWx0ZXIoKHg6VEFic3RyYWN0RmlsZSk9PngpO1xyXG5cdFx0XHRcdGkgPSBwbHVnaW4uY2hhaW4uZGJjaGFpbi5zb3J0X3RmaWxlc19ieV9jaGFpbihpKTtcclxuXHRcdFx0XHRpZihwbHVnaW4uc2V0dGluZ3MuaXNGb2xkZXJGaXJzdCl7XHJcblx0XHRcdFx0XHRpID0gcGx1Z2luLmNoYWluLnNvcnRfdGZpbGVzX2ZvbGRlcl9maXJzdChpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Zm9yICh2YXIgciA9IFtdLCBvID0gMCwgYSA9IGk7IG8gPCBhLmxlbmd0aDsgbysrKSB7XHJcblx0XHRcdFx0XHR2YXIgcyA9IGFbb11cclxuXHRcdFx0XHRcdCwgbCA9IHQuZmlsZUl0ZW1zW3MucGF0aF07XHJcblx0XHRcdFx0XHRsICYmIHIucHVzaChsKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLnZDaGlsZHJlbi5zZXRDaGlsZHJlbihyKVxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRyZXR1cm4gb3JnX3NvcnQuY2FsbCh0aGlzLC4uLmQpO1xyXG5cdFx0XHR9XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIG9yZ19zb3J0LmNhbGwodGhpcywuLi5kKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmNoYWluX3NvcnRfdjEgPSBmdW5jdGlvbihvcmdfc29ydCkge1xyXG5cdGxldCBwbHVnaW4gPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oJ25vdGUtY2hhaW4nKTtcclxuXHRyZXR1cm4gZnVuY3Rpb24oLi4uZCl7XHJcblx0XHRpZihwbHVnaW4pe1xyXG5cdFx0XHRpZihwbHVnaW4/LnNldHRpbmdzLmlzU29ydEZpbGVFeHBsb3Jlcil7XHJcblx0XHRcdFx0dmFyIGUgPSB0aGlzLmZpbGVcclxuXHRcdFx0XHQsIHQgPSB0aGlzLnZpZXdcclxuXHRcdFx0XHQsIGkgPSBlLmNoaWxkcmVuLnNsaWNlKCk7XHJcblx0XHRcdFx0aSA9IGkuZmlsdGVyKHg9PngpO1xyXG5cdFx0XHRcdGkgPSBwbHVnaW4uY2hhaW4uc29ydF90ZmlsZXNfYnlfY2hhaW4oaSk7XHJcblx0XHRcdFx0aSA9IHBsdWdpbi5jaGFpbi5zb3J0X3RmaWxlc19mb2xkZXJfZmlyc3QoaSk7XHJcblx0XHRcdFx0Zm9yICh2YXIgciA9IFtdLCBvID0gMCwgYSA9IGk7IG8gPCBhLmxlbmd0aDsgbysrKSB7XHJcblx0XHRcdFx0XHR2YXIgcyA9IGFbb11cclxuXHRcdFx0XHRcdCwgbCA9IHQuZmlsZUl0ZW1zW3MucGF0aF07XHJcblx0XHRcdFx0XHRsICYmIHIucHVzaChsKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLnZDaGlsZHJlbi5zZXRDaGlsZHJlbihyKVxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRyZXR1cm4gb3JnX3NvcnQuY2FsbCh0aGlzLC4uLmQpO1xyXG5cdFx0XHR9XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIG9yZ19zb3J0LmNhbGwodGhpcywuLi5kKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBOQ0ZpbGVFeHBsb3JlcntcclxuXHRwbHVnaW46Tm90ZUNoYWluUGx1Z2luO1xyXG5cdGFwcDpBcHA7XHJcblx0b3JnX3NvcnQ6RnVuY3Rpb247XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pe1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XHJcblx0XHR0aGlzLm9iID0gcmVxdWlyZSgnb2JzaWRpYW4nKTtcclxuXHRcdHRoaXMucmVnaXN0ZXIoKTtcclxuXHR9XHJcblxyXG5cdHJlZ2lzdGVyKCl7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKT0+e1xyXG5cdFx0XHRsZXQgZm9sZGVyID0gbmV3IFRGb2xkZXIoVmF1bHQsXCJcIik7XHJcblx0XHRcdGxldCBkb20gPSB0aGlzLmZpbGVfZXhwbG9yZXIuY3JlYXRlRm9sZGVyRG9tKGZvbGRlcikuY29uc3RydWN0b3I7XHJcblx0XHRcdHRoaXMuX0ZvbGRlckRvbV8gPSBkb207XHJcblx0XHRcdHRoaXMub3JnX3NvcnQgPSBkb20ucHJvdG90eXBlLnNvcnQ7XHJcblx0XHRcdHRoaXMubmV3X3NvcnQgPSBjaGFpbl9zb3J0KHRoaXMub3JnX3NvcnQpO1xyXG5cdFx0XHR0aGlzLl9Gb2xkZXJEb21fLnByb3RvdHlwZS5zb3J0ID0gdGhpcy5uZXdfc29ydDtcclxuXHRcdFx0dGhpcy5maWxlX2V4cGxvcmVyLnNvcnQoKTtcclxuXHRcdH0pXHJcblx0fVxyXG5cclxuXHJcblx0dW5yZWdpc3Rlcigpe1xyXG5cdFx0aWYodGhpcy5vcmdfc29ydCl7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiUmVzZXQgRmlsZUV4cGxvcmVyIHRvIG9yaWdpbiBzb3J0IGZ1bmN0aW9uLlwiKTtcclxuXHRcdFx0dGhpcy5fRm9sZGVyRG9tXy5wcm90b3R5cGUuc29ydCA9IHRoaXMub3JnX3NvcnQ7XHJcblx0XHR9XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdGdldCBmaWxlX2V4cGxvcmVyKCl7XHJcblx0XHRsZXQgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXHJcblx0XHRcdFwiZmlsZS1leHBsb3JlclwiXHJcblx0XHQpWzBdPy52aWV3O1xyXG5cdFx0cmV0dXJuIHZpZXc7XHJcblx0fVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUlPOzs7QUNJQSxJQUFNLFdBQU4sTUFBYztBQUFBLEVBR3BCLFlBQVlDLE1BQVE7QUFDbkIsU0FBSyxNQUFNQTtBQUFBLEVBQ1o7QUFBQSxFQUVBLE1BQU0sZ0JBQWdCLE9BQVksS0FBVyxPQUFVO0FBQ3RELFFBQUksT0FBTyxLQUFLLGdCQUFnQixPQUFNLEdBQUc7QUFDekMsUUFBRyxTQUFPLE9BQU07QUFBQztBQUFBLElBQU87QUFFeEIsVUFBTSxLQUFLLElBQUksWUFBWSxtQkFBbUIsT0FBTSxRQUFLO0FB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O0FBQzFDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFDL0IsYUFBSyxPQUFPLFNBQVMsY0FBYyxLQUFLO0FBQUEsTUFDekMsQ0FBQztBQUFBLElBQ0Y7QUFDRixRQUFJLHlCQUFRLFdBQVcsRUFDcEIsUUFBUSxtQkFBbUIsRUFDM0IsUUFBUSxpQ0FBaUMsRUFDekM7QUFBQSxNQUFVLFVBQVEsS0FDakIsU0FBUyxLQUFLLE9BQU8sU0FBUyxhQUFhLEVBQzNDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGFBQUssT0FBTyxTQUFTLGdCQUFnQjtBQUNyQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQy9CLGFBQUssT0FBTyxTQUFTLGNBQWMsS0FBSztBQUFBLE1BQ3pDLENBQUM7QUFBQSxJQUNGO0FBR0YsUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsV0FBVyxFQUNuQixRQUFRLCtCQUErQixFQUN2QyxRQUFRLFVBQVEsS0FDZixTQUFTLEtBQUssT0FBTyxTQUFTLFNBQVMsRUFDdkMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxPQUFPLFNBQVMsWUFBWTtBQUNqQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDaEMsQ0FBQyxDQUFDO0FBRUosUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsV0FBVyxFQUNuQixRQUFRLCtCQUErQixFQUN2QyxRQUFRLFVBQVEsS0FDZixTQUFTLEtBQUssT0FBTyxTQUFTLFNBQVMsRUFDdkMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxPQUFPLFNBQVMsWUFBWTtBQUNqQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDaEMsQ0FBQyxDQUFDO0FBR0osUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsaUJBQWlCLEVBQ3pCLFFBQVEsdUNBQXVDLEVBQy9DO0FBQUEsTUFBVSxVQUFRLEtBQ2pCLFNBQVMsS0FBSyxPQUFPLFNBQVMsZUFBZSxFQUM3QyxTQUFTLE9BQU8sVUFBVTtBQUMxQixhQUFLLE9BQU8sU0FBUyxrQkFBa0I7QUFDdkMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2hDLENBQUM7QUFBQSxJQUNGO0FBQ0YsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsY0FBYyxFQUN0QixRQUFRLG9DQUFvQyxFQUM1QztBQUFBLE1BQVUsVUFBUSxLQUNqQixTQUFTLEtBQUssT0FBTyxTQUFTLFlBQVksRUFDMUMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsZUFBZTtBQUNwQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsQ0FBQztBQUFBLElBQ0Y7QUFBQSxFQUNIO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAiYXBwIiwgImYiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCJdCn0K
