/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/utils.ts
var utils_exports = {};
__export(utils_exports, {
  check_value: () => check_value,
  concat_array: () => concat_array,
  get_plugins: () => get_plugins,
  get_tp_func: () => get_tp_func,
  set_prototype: () => set_prototype,
  sleep: () => sleep
});
function get_plugins(app2, name) {
}
function concat_array(items) {
  if (items == null) {
    return [];
  }
  if (typeof items === "string") {
    return [items];
  }
  if (!(items instanceof Array)) {
    return [items];
  }
  let res = [];
  for (let item of items) {
    if (typeof item === "string") {
      res.push(item);
    } else if (item instanceof Array) {
      res = res.concat(this.concat_array(item));
    } else {
      res.push(item);
    }
  }
  return res;
}
function sleep(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}
async function check_value(t, k, v, dt, T) {
  let i = 0;
  while (t[k] == null || !(t[k] === v)) {
    await sleep(dt);
    i = dt + dt;
    if (i > T) {
      break;
    }
  }
  if (t[k] && t[k] === v) {
    return true;
  } else {
    return false;
  }
}
function get_tp_func(app2, target) {
  let templater = app2.plugins.getPlugin(
    "templater-obsidian"
  );
  let items = target.split(".");
  if (items[0].localeCompare("tp") != 0 || items.length != 3) {
    return void 0;
  }
  let modules = templater.templater.functions_generator.internal_functions.modules_array.filter(
    (item) => item.name.localeCompare(items[1]) == 0
  );
  if (modules.length == 0) {
    return void 0;
  }
  return modules[0].static_functions.get(items[2]);
}
function set_prototype(t, e) {
  let r = Object.keys(e).map((i) => set_prototype_on(t, i, e[i]));
  return r.length === 1 ? r[0] : function() {
    r.forEach((i) => i());
  };
}
function set_prototype_on(prototype, name, func) {
  let org_func = prototype[name], isOwnProperty = prototype.hasOwnProperty(name), final_func = func(org_func);
  if (org_func) {
    Object.setPrototypeOf(final_func, org_func);
  }
  Object.setPrototypeOf(a, final_func);
  prototype[name] = a;
  return s;
  function a(...d) {
    if (final_func === org_func && prototype[name] === a) {
      s();
    }
    return final_func.apply(this, d);
  }
  function s() {
    if (prototype[name] === a) {
      if (isOwnProperty) {
        prototype[name] = org_func;
      } else {
        delete prototype[name];
      }
    }
    if (final_func !== org_func) {
      final_func = org_func;
      Object.setPrototypeOf(a, org_func || Function);
    }
  }
}
var init_utils = __esm({
  "src/utils.ts"() {
  }
});

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => NoteChainPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/NCEditor.ts
var NCEditor = class {
  constructor(app2) {
    this.app = app2;
  }
  async set_frontmatter(tfile, key, value) {
    let prev = this.get_frontmatter(tfile, key);
    if (prev === value) {
      return;
    }
    await this.app.fileManager.processFrontMatter(tfile, (fm) => {
      console.log(`${tfile.basename}---${key}---${value}`);
      fm[key] = value;
    });
  }
  get_frontmatter(tfile, key) {
    let meta = this.app.metadataCache.getFileCache(tfile);
    if (meta == null ? void 0 : meta.frontmatter) {
      return meta.frontmatter[key];
    }
  }
  regexp_link(tfile, mode) {
    if (mode === "link") {
      return new RegExp(`\\[\\[${tfile.basename}\\|?.*\\]\\]`, "g");
    }
    if (mode === "para") {
      return new RegExp(`.*\\[\\[${tfile.basename}\\|?.*\\]\\].*`, "g");
    }
  }
  async replace(tfile, regex, target) {
    if (typeof regex === "string") {
      await this.app.vault.process(tfile, (data) => {
        if (data.indexOf(regex) > -1) {
          console.log("Replace: ", tfile.path);
          return data.replace(regex, target);
        }
        return data;
      });
    } else if (regex instanceof RegExp) {
      await this.app.vault.process(tfile, (data) => {
        if (data.match(regex)) {
          console.log("Replace: ", tfile.path);
          return data.replace(regex, target);
        }
        return data;
      });
    }
  }
};

// src/NoteChain.ts
var import_obsidian = require("obsidian");
init_utils();
var NoteChain = class {
  constructor(plugin, editor, prev = "PrevNote", next = "NextNote") {
    this.plugin = plugin;
    this.app = plugin.app;
    this.editor = new NCEditor(this.app);
    this.prev = prev;
    this.next = next;
    this.ob = require("obsidian");
    this.app.nc = this.plugin;
    this.init_children();
  }
  init_children() {
    this.children = {};
    for (let f of this.get_all_folders()) {
      this.children[f.path] = this.sort_tfiles_by_chain(f.children);
    }
  }
  get find_tfile() {
    return get_tp_func(this.app, "tp.file.find_tfile");
  }
  get suggester() {
    return get_tp_func(this.app, "tp.system.suggester");
  }
  get_all_folders(sort_mode = "") {
    return this.app.vault.getAllFolders();
  }
  get_all_tfiles(sort_mode = "") {
    let files = this.app.vault.getMarkdownFiles();
    if (!(sort_mode === "")) {
      this.sort_tfiles(files, sort_mode = sort_mode);
    }
    return files;
  }
  sort_folders_by_mtime(folders, reverse = true) {
    function ufunc(f) {
      return Math.max(
        ...f.children.filter((f2) => f2.basename).map((f2) => f2.stat.mtime)
      );
    }
    let res = folders.sort((a, b) => ufunc(a) - ufunc(b));
    if (reverse) {
      res = res.reverse();
    }
    return res;
  }
  async cmd_move_file_to_another_folder(tfile = this.current_note) {
    if (tfile == null) {
      return;
    }
    let folders = this.get_all_folders();
    folders = this.sort_folders_by_mtime(
      folders
    ).filter((f) => f != tfile.parent);
    if (tfile.extension === "md") {
      folders = folders.filter((f) => this.filter_user_ignore(f));
    }
    try {
      let folder = await this.suggester((f) => f.path, folders);
      let dst = folder.path + "/" + tfile.basename + "." + tfile.extension;
      await this.app.fileManager.renameFile(tfile, dst);
    } catch (error) {
    }
  }
  filter_user_ignore(note) {
    if (!(this.app.vault.config.attachmentFolderPath === "./")) {
      if (note.path.startsWith(
        this.app.vault.config.attachmentFolderPath
      )) {
        return false;
      }
    }
    if (this.app.vault.config.userIgnoreFilters) {
      for (let x of this.app.vault.config.userIgnoreFilters) {
        if (note.path.startsWith(x)) {
          return false;
        }
      }
    }
    return true;
  }
  async sugguster_note() {
    let notes = this.sort_tfiles(
      this.app.vault.getFiles(),
      ["mtime", "x"]
    ).filter((f) => this.filter_user_ignore(f));
    try {
      let note = await this.suggester((f) => f.path, notes);
      return note;
    } catch (error) {
      return null;
    }
  }
  open_note(tfile, new_tab = false) {
    if (tfile) {
      if (this.app.workspace.activeLeaf.pinned || new_tab) {
        return this.app.workspace.getLeaf(true).openFile(tfile);
      } else {
        return this.app.workspace.activeLeaf.openFile(tfile);
      }
    }
  }
  async sugguster_open_note() {
    try {
      let note = await this.sugguster_note();
      this.open_note(note);
    } catch (error) {
    }
  }
  get_tfile(path) {
    let name = path.split("|")[0].replace("[[", "").replace("]]", "");
    return this.find_tfile(name);
  }
  get current_note() {
    return this.app.workspace.getActiveFile();
  }
  get_inlinks(tfile = this.current_note) {
    if (tfile == null) {
      return [];
    }
    let res = new Array();
    let dv_api = this.app.plugins.getPlugin("dataview");
    let inlinks = dv_api.index.links.invMap.get(tfile.path);
    if (inlinks == void 0) {
      return [];
    } else {
      return Array.from(inlinks).map(
        (path) => this.app.vault.fileMap[path]
      ).filter(
        (item) => item
      );
    }
  }
  get_outlinks(tfile = this.current_note) {
    if (tfile == null) {
      return [];
    }
    let res = new Array();
    let dv_api = this.app.plugins.getPlugin("dataview");
    let inlinks = dv_api.index.links.map.get(tfile.path);
    if (inlinks == void 0) {
      return [];
    } else {
      return Array.from(inlinks).map(
        (path) => this.app.vault.fileMap[path]
      ).filter(
        (item) => item
      );
    }
  }
  get_links(tfile = this.current_note) {
    let inlinks = this.get_inlinks(tfile);
    let outlinks = this.get_outlinks(tfile);
    for (let link of inlinks) {
      if (!outlinks.includes(link)) {
        outlinks.push(link);
      }
    }
    return outlinks;
  }
  get_brothers(tfile = this.current_note) {
    if (tfile && tfile.parent) {
      return this.get_tfiles_of_folder(tfile.parent, false);
    } else {
      return [];
    }
  }
  get_uncles(tfile) {
    if (tfile && tfile.parent && tfile.parent.parent) {
      let folder = tfile.parent.parent;
      return folder.children.filter(
        (x) => x instanceof import_obsidian.TFile
      );
    }
    return [];
  }
  get_tfiles_of_folder(tfolder, with_children = false) {
    if (tfolder == null) {
      return [];
    }
    let notes = [];
    for (let c of tfolder.children) {
      if (c instanceof import_obsidian.TFile && c.extension === "md") {
        notes.push(c);
      } else if (c instanceof import_obsidian.TFolder && with_children) {
        let tmp = this.get_tfiles_of_folder(c);
        for (let x of tmp) {
          notes.push(x);
        }
      }
    }
    return notes;
  }
  indexOfFolder(tfile, tfiles) {
    let fnote = this.find_tfile(tfile.name + ".md");
    let msg = this.plugin.editor.get_frontmatter(
      fnote,
      "FolderPrevNote"
    );
    if (!msg) {
      return -1;
    }
    let items = msg.split("]]+");
    let anchor = this.get_tfile(items[0].slice(2));
    if (!anchor) {
      return -1;
    }
    let idx = tfiles.indexOf(anchor);
    if (items.length == 2) {
      idx = idx + parseFloat(items[1]);
    }
    return idx;
  }
  parse_item(item) {
    var args = [].slice.call(arguments).slice(1);
    let kwargs = {};
    if (args.length == 1) {
      kwargs = args[0];
    }
    let seq = kwargs["seq"];
    if (seq != null) {
      return `${seq} -> ${item}`;
    }
    return item;
  }
  tfile_to_string(tfile) {
    let curr = this.current_note;
    let msg = "";
    if (tfile.parent == curr.parent) {
      msg = tfile.basename;
    } else {
      msg = tfile.path;
    }
    if (tfile == this.current_note) {
      return `\u{1F3E0} ${msg}`;
    } else {
      return msg;
    }
  }
  parse_items(items) {
    var args = [].slice.call(arguments).slice(1);
    let kwargs = {};
    if (args.length == 1) {
      kwargs = args[0];
    }
    let res = [];
    let i = 0;
    while (i < items.length) {
      if (kwargs["seq"]) {
        res.push(this.parse_item(items[i], { "seq": i + 1 }));
      } else {
        res.push(this.parse_item(items[i]));
      }
      i++;
    }
    return res;
  }
  async suggester_notes(tfile = this.current_note, curr_first = true, smode = "") {
    if (tfile) {
      tfile == this.current_note;
    }
    let kv = [
      "\u540C\u7EA7\u7B14\u8BB0",
      "\u7B14\u8BB0\u94FE\u6761",
      "\u4E0A\u7EA7\u7B14\u8BB0",
      "\u540C\u7EA7\u7B14\u8BB0+\u5B50\u76EE\u5F55",
      "\u51FA\u94FE+\u5165\u94FE",
      "\u5165\u94FE",
      "\u51FA\u94FE",
      "\u6240\u6709\u7B14\u8BB0",
      "recent-files-obsidian"
    ];
    if (curr_first) {
      kv.unshift("\u5F53\u524D\u7B14\u8BB0");
    } else {
      kv.push("\u5F53\u524D\u7B14\u8BB0");
    }
    let kvs = [];
    let i = 1;
    for (let x of kv) {
      kvs.push(`${i++} ${x}`);
    }
    let mode = "";
    if (kv.contains(smode)) {
      mode = smode;
    } else {
      mode = await this.suggester(kvs, kv);
    }
    if (mode === "\u5F53\u524D\u7B14\u8BB0") {
      return [tfile];
    } else if (mode === "\u540C\u7EA7\u7B14\u8BB0") {
      return this.get_brothers(tfile);
    } else if (mode === "\u540C\u7EA7\u7B14\u8BB0+\u5B50\u76EE\u5F55") {
      return this.get_tfiles_of_folder(tfile == null ? void 0 : tfile.parent, true);
    } else if (mode === "\u51FA\u94FE+\u5165\u94FE") {
      return this.get_links(tfile);
    } else if (mode === "\u5165\u94FE") {
      return this.get_inlinks(tfile);
    } else if (mode === "\u51FA\u94FE") {
      return this.get_outlinks(tfile);
    } else if (mode === "\u6240\u6709\u7B14\u8BB0") {
      return this.get_all_tfiles();
    } else if (mode === "recent-files-obsidian") {
      let r = this.app.plugins.getPlugin("recent-files-obsidian");
      if (!r) {
        return [];
      }
      return Object.values(
        r.data.recentFiles
      ).map(
        (f) => this.app.vault.fileMap[f.path]
      ).filter((f) => f);
    } else if (mode === "\u4E0A\u7EA7\u7B14\u8BB0") {
      return this.get_uncles(tfile);
    } else if (mode === "\u7B14\u8BB0\u94FE\u6761") {
      return this.get_chain(
        tfile,
        Number(this.plugin.settings.PrevChain),
        Number(this.plugin.settings.NextChain)
      );
    } else {
      return [];
    }
  }
  // Chain
  get_prev_note(tfile = this.current_note) {
    if (!tfile) {
      return;
    }
    if (tfile.deleted) {
      let tfiles = this.app.vault.getMarkdownFiles();
      tfiles = tfiles.filter((f) => `[[${tfile.basename}]]` === this.editor.get_frontmatter(f, this.next));
      if (tfiles.length > 0) {
        return tfile[0];
      } else {
        return null;
      }
    } else {
      let name = this.editor.get_frontmatter(tfile, this.prev);
      if (!name) {
        return null;
      }
      let note = this.get_tfile(name);
      return note ? note : null;
    }
  }
  open_prev_notes(tfile = this.current_note) {
    let note = this.get_prev_note(tfile);
    this.open_note(note);
  }
  get_next_note(tfile = this.current_note) {
    if (tfile.deleted) {
      let tfiles = this.app.vault.getMarkdownFiles();
      tfiles = tfiles.filter((f) => `[[${tfile.basename}]]` === this.editor.get_frontmatter(f, this.prev));
      if (tfiles.length > 0) {
        return tfiles[0];
      } else {
        return null;
      }
    } else {
      let name = this.editor.get_frontmatter(tfile, this.next);
      if (!name) {
        return null;
      }
      let note = this.get_tfile(name);
      return note ? note : null;
    }
  }
  open_next_notes(tfile = this.current_note) {
    let note = this.get_next_note(tfile);
    this.open_note(note);
  }
  get_chain(tfile = this.current_note, prev = 10, next = 10, with_self = true) {
    if (tfile == null) {
      return [];
    }
    let res = new Array();
    if (with_self) {
      res.push(tfile);
    }
    let tmp = tfile;
    for (let i = prev; i != 0; i--) {
      let note = this.get_prev_note(tmp);
      if (!note) {
        break;
      } else if (res.includes(note)) {
        this.editor.set_frontmatter(note, this.next, "");
        this.editor.set_frontmatter(tmp, this.prev, "");
        break;
      } else {
        res.unshift(note);
        tmp = note;
      }
    }
    tmp = tfile;
    for (let i = next; i != 0; i--) {
      let note = this.get_next_note(tmp);
      if (!note) {
        break;
      } else if (res.includes(note)) {
        this.editor.set_frontmatter(note, this.prev, "");
        this.editor.set_frontmatter(tmp, this.next, "");
        break;
      } else {
        res.push(note);
        tmp = note;
      }
    }
    return res;
  }
  get_first_note(tfile = this.current_note) {
    let notes = this.get_chain(tfile, -1, 0, false);
    if (notes.length > 0) {
      return notes[0];
    } else {
      return null;
    }
  }
  get_last_note(tfile = this.current_note) {
    let notes = this.get_chain(tfile, 0, -1, false);
    if (notes.length > 0) {
      return notes[notes.length - 1];
    } else {
      return null;
    }
  }
  get_neighbors(tfile = this.current_note) {
    return [
      this.get_prev_note(tfile),
      this.get_next_note(tfile)
    ];
  }
  async chain_set_prev(tfile, prev) {
    if (tfile == null || tfile == prev) {
      return;
    }
    if (prev == null) {
      await this.editor.set_frontmatter(
        tfile,
        this.prev,
        ""
      );
    } else {
      await this.editor.set_frontmatter(
        tfile,
        this.prev,
        `[[${prev.basename}]]`
      );
    }
  }
  async chain_set_next(tfile, next) {
    if (tfile == null || tfile == next) {
      return;
    }
    if (next == null) {
      await this.editor.set_frontmatter(
        tfile,
        this.next,
        ""
      );
    } else {
      await this.editor.set_frontmatter(
        tfile,
        this.next,
        `[[${next.basename}]]`
      );
    }
  }
  async chain_set_prev_next(prev, next) {
    await this.chain_set_prev(next, prev);
    await this.chain_set_next(prev, next);
  }
  async chain_concat_tfiles(tfiles) {
    let prev = this.get_prev_note(tfiles[0]);
    if (tfiles.contains(prev)) {
      await this.chain_set_prev(tfiles[0], null);
    }
    let next = this.get_next_note(tfiles[tfiles.length - 1]);
    if (tfiles.contains(next)) {
      await this.chain_set_next(tfiles[tfiles.length - 1], null);
    }
    for (let i = 0; i < tfiles.length - 1; i++) {
      await this.chain_set_prev_next(tfiles[i], tfiles[i + 1]);
    }
  }
  async chain_pop_node(tfile) {
    let notes = this.get_neighbors(tfile);
    await this.chain_set_prev_next(notes[0], notes[1]);
  }
  async chain_insert_node_as_head(tfile, anchor) {
    let head = this.get_first_note(anchor);
    await this.chain_set_prev_next(tfile, head);
  }
  async chain_insert_node_as_tail(tfile, anchor) {
    let tail = this.get_last_note(anchor);
    await this.chain_set_prev_next(tail, tfile);
  }
  async chain_insert_node_after(tfile, anchor) {
    await this.chain_pop_node(tfile);
    let next = this.get_next_note(anchor);
    await this.chain_concat_tfiles([anchor, tfile, next]);
  }
  async chain_insert_node_before(tfile, anchor) {
    await this.chain_pop_node(tfile);
    let prev = this.get_prev_note(anchor);
    await this.chain_concat_tfiles([prev, tfile, anchor]);
  }
  async chain_insert_folder_after(tfile, anchor) {
    if (!tfile.parent || tfile.parent.parent != anchor.parent) {
      return;
    }
    let note = this.get_tfile(tfile.parent.name);
    if (!note) {
      console.log("\u9700\u8981\u8981\u5148\u521B\u5EFA\u540C\u540D\u7B14\u8BB0");
      return;
    }
    await this.plugin.editor.set_frontmatter(
      note,
      "FolderPrevNote",
      `[[${anchor.basename}]]+0.5`
    );
  }
  async chain_suggester_tfiles(tfile = this.current_note, mode = "suggester") {
    let notes = this.get_brothers(tfile);
    if (notes.length == 0) {
      return;
    }
    let files = await this.suggester_sort(notes);
    await this.chain_concat_tfiles(files);
  }
  sort_tfiles(files, field) {
    if (typeof field === "string") {
      if (field === "name") {
        return files.sort(
          (a, b) => a.name.localeCompare(b.name)
        );
      } else if (field === "mtime") {
        return files.sort(
          (a, b) => a.stat.mtime - b.stat.mtime
        );
      } else if (field === "ctime") {
        return files.sort(
          (a, b) => a.stat.ctime - b.stat.ctime
        );
      } else if (field === "chain") {
        return this.sort_tfiles_by_chain(files);
      }
      return files;
    } else if (typeof field === "object") {
      if (field instanceof Array) {
        let nfiles = this.sort_tfiles(files, field[0]);
        if (field.length >= 2) {
          if (field[1] === "x") {
            return nfiles.reverse();
          }
        }
        return nfiles;
      }
    }
    return files;
  }
  sort_tfiles_by_chain(tfiles) {
    let notes = tfiles.filter((f) => f instanceof import_obsidian.TFile);
    let res = [];
    while (notes.length > 0) {
      let note = notes[0];
      let xchain = this.get_chain(note, -1, -1);
      for (let x of xchain) {
        if (notes.contains(x)) {
          res.push(x);
          notes.remove(x);
        }
      }
    }
    let folders = tfiles.filter((f) => f instanceof import_obsidian.TFolder);
    if (folders.length > 0) {
      let indexOf = function(f) {
        if (f instanceof import_obsidian.TFile) {
          return res.indexOf(f);
        } else if (f instanceof import_obsidian.TFolder) {
          return idxs[folders.indexOf(f)];
        } else {
          return -1;
        }
      };
      let idxs = folders.map(
        (f) => this.indexOfFolder(f, res)
      );
      res.push(...folders);
      res = res.sort((a, b) => indexOf(a) - indexOf(b));
    }
    return res;
  }
  sort_tfiles_folder_first(tfiles) {
    let A = tfiles.filter((f) => f instanceof import_obsidian.TFolder).sort((a, b) => a.name.localeCompare(b.name));
    let B = tfiles.filter((f) => f instanceof import_obsidian.TFile);
    return this.plugin.utils.concat_array([A, B]);
  }
  sort_tfiles_by_field(tfiles, field) {
    let res = tfiles.sort(
      (a, b) => {
        let av = this.editor.get_frontmatter(a, field);
        let bv = this.editor.get_frontmatter(b, field);
        return av - bv;
      }
    );
    return res;
  }
  async suggester_sort(tfiles) {
    if (!tfiles) {
      return [];
    }
    if (tfiles.length == 0) {
      return [];
    }
    ;
    let kv = {
      "chain": "chain",
      "name": "name",
      "ctime": "ctime",
      "mtime": "mtime",
      "name \u5012\u5E8F": ["name", "x"],
      "ctime \u5012\u5E8F": ["ctime", "x"],
      "mtime \u5012\u5E8F": ["mtime", "x"]
    };
    let field = await this.suggester(
      Object.keys(kv),
      Object.values(kv)
    );
    if (field == null) {
      return [];
    }
    if (field == "chain") {
      tfiles = this.sort_tfiles(tfiles, "name");
    }
    return this.sort_tfiles(tfiles, field);
  }
  view_sort_by_chain() {
    var _a;
    let view = (_a = this.app.workspace.getLeavesOfType(
      "file-explorer"
    )[0]) == null ? void 0 : _a.view;
    if (!view) {
      return;
    }
    view.sort();
    if (view.ready) {
      for (let path in view.fileItems) {
        let item = view.fileItems[path];
        if (item.vChildren) {
          let files = item.vChildren._children.map((f) => f.file);
          files = this.sort_tfiles_by_chain(files);
          let children = item.vChildren._children.sort(
            (a, b) => files.indexOf(a.file) - files.indexOf(b.file)
          );
          item.vChildren.setChildren(children);
        }
      }
      view.tree.infinityScroll.compute();
    }
  }
};

// src/NCFileExplorer.ts
var import_obsidian2 = require("obsidian");
var chain_sort = function(org_sort) {
  let plugin = app.plugins.getPlugin("note-chain");
  return function(...d) {
    if (plugin) {
      if (plugin == null ? void 0 : plugin.settings.isSortFileExplorer) {
        var e = this.file, t = this.view, i = e.children.slice();
        i = i.filter((x) => x);
        if (i.length > 0) {
          let items = plugin.chain.children[i[0].parent.path];
          if (items) {
            let a2 = items.filter((x) => i.contains(x));
            let b = items.filter((x) => !i.contains(x));
            a2.push(...b);
            i = a2;
          }
        }
        if (plugin.settings.isFolderFirst) {
          i = plugin.chain.sort_tfiles_folder_first(i);
        }
        for (var r = [], o = 0, a = i; o < a.length; o++) {
          var s = a[o], l = t.fileItems[s.path];
          l && r.push(l);
        }
        this.vChildren.setChildren(r);
      } else {
        return org_sort.call(this, ...d);
      }
    } else {
      return org_sort.call(this, ...d);
    }
  };
};
chain_sort_v1 = function(org_sort) {
  let plugin = app.plugins.getPlugin("note-chain");
  return function(...d) {
    if (plugin) {
      if (plugin == null ? void 0 : plugin.settings.isSortFileExplorer) {
        var e = this.file, t = this.view, i = e.children.slice();
        i = i.filter((x) => x);
        i = plugin.chain.sort_tfiles_by_chain(i);
        i = plugin.chain.sort_tfiles_folder_first(i);
        for (var r = [], o = 0, a = i; o < a.length; o++) {
          var s = a[o], l = t.fileItems[s.path];
          l && r.push(l);
        }
        this.vChildren.setChildren(r);
      } else {
        return org_sort.call(this, ...d);
      }
    } else {
      return org_sort.call(this, ...d);
    }
  };
};
var NCFileExplorer = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.chain = plugin.chain;
    this.app = plugin.app;
    this.register();
  }
  register() {
    this.app.workspace.onLayoutReady(() => {
      let folder = new import_obsidian2.TFolder(import_obsidian2.Vault, "");
      let dom = this.file_explorer.createFolderDom(folder).constructor;
      this._FolderDom_ = dom;
      this.org_sort = dom.prototype.sort;
      this.new_sort = chain_sort(this.org_sort);
      this._FolderDom_.prototype.sort = this.new_sort;
      this.sort();
    });
  }
  unregister() {
    if (this.org_sort) {
      console.log("Reset FileExplorer to origin sort function.");
      this._FolderDom_.prototype.sort = this.org_sort;
    }
  }
  get file_explorer() {
    var _a;
    let view = (_a = this.app.workspace.getLeavesOfType(
      "file-explorer"
    )[0]) == null ? void 0 : _a.view;
    return view;
  }
  async sort(nsleep = 0) {
    var _a;
    if ((_a = this.file_explorer) == null ? void 0 : _a.sort) {
      if (nsleep > 0) {
        await this.plugin.utils.sleep(nsleep);
      }
      this.plugin.chain.init_children();
      this.file_explorer.sort();
    }
  }
};

// main.ts
init_utils();
var DEFAULT_SETTINGS = {
  PrevChain: "10",
  NextChain: "10",
  refreshDataView: true,
  refreshTasks: true,
  isSortFileExplorer: true,
  isFolderFirst: true
};
var longform2notechain = (plugin) => ({
  id: "longform2notechain",
  name: "Reset Note Chain by LongForm.",
  callback: () => {
    let curr = plugin.chain.current_note;
    if (curr == null) {
      return;
    }
    app.fileManager.processFrontMatter(
      curr,
      (fm) => {
        if (curr == null) {
          return;
        }
        if (fm["longform"] == null) {
          return;
        }
        let scenes = plugin.utils.concat_array(fm.longform.scenes);
        let ignoredFiles = plugin.utils.concat_array(fm.longform.ignoredFiles);
        ignoredFiles = ignoredFiles.filter((f) => !scenes.contains(f));
        let notes = plugin.utils.concat_array([scenes, ignoredFiles]);
        notes = notes.map((f) => plugin.chain.find_tfile(f));
        if (curr.parent == null) {
          return;
        }
        ;
        let tfiles = plugin.chain.get_tfiles_of_folder(curr.parent).filter((f) => !notes.contains(f));
        notes = plugin.utils.concat_array([tfiles, notes]);
        plugin.chain.chain_concat_tfiles(notes);
      }
    );
  }
});
var longform4notechain = (plugin) => ({
  id: "longform4notechain",
  name: "Reset LongForm Secnes by Note Chain.",
  callback: () => {
    let curr = plugin.chain.current_note;
    if (curr == null) {
      return;
    }
    app.fileManager.processFrontMatter(
      curr,
      (fm) => {
        if (curr == null) {
          return;
        }
        if (curr.parent == null) {
          return;
        }
        ;
        if (fm["longform"] == null) {
          return;
        }
        let notes = plugin.chain.get_tfiles_of_folder(curr.parent);
        notes = plugin.chain.sort_tfiles_by_chain(notes);
        fm.longform.scenes = notes.map((f) => f.basename);
      }
    );
  }
});
var sort_file_explorer = (plugin) => ({
  id: "sort_file_explorer",
  name: "Sort File Explorer by Note Chain.",
  callback: async () => {
    await plugin.explorer.sort();
  }
});
var open_notes_smarter = (plugin) => ({
  id: "open_notes_smarter",
  name: "Open note smarter",
  callback: () => {
    plugin.open_note_smarter();
  }
});
var sugguster_open_note = (plugin) => ({
  id: "sugguster_open_note",
  name: "Open note",
  callback: () => {
    plugin.chain.sugguster_open_note();
  }
});
var open_prev_notes = (plugin) => ({
  id: "open_prev_notes",
  name: "Open prev note",
  callback: () => {
    plugin.chain.open_prev_notes();
  }
});
var open_next_notes = (plugin) => ({
  id: "open_next_notes",
  name: "Open next note",
  callback: () => {
    plugin.chain.open_next_notes();
  }
});
var clear_inlinks = (plugin) => ({
  id: "clear_inlinks",
  name: "Clear inlinks of current file",
  callback: () => {
    plugin.clear_inlinks();
  }
});
var move_file_to_another_folder = (plugin) => ({
  id: "move_file_to_another_folder",
  name: "Move current file to another folder",
  callback: () => {
    plugin.chain.cmd_move_file_to_another_folder();
  }
});
var replace_notes_with_regx = (plugin) => ({
  id: "replace_notes_with_regx",
  name: "Replace by regex",
  callback: () => {
    plugin.replace_notes_with_regx();
  }
});
var chain_insert_node = (plugin) => ({
  id: "chain_insert_node",
  name: "Insert node of chain",
  callback: async () => {
    await plugin.cmd_chain_insert_node();
    await plugin.explorer.sort(500);
  }
});
var chain_set_seq_note = (plugin) => ({
  id: "chain_set_seq_note",
  name: "Reset the chain of current folder!",
  callback: async () => {
    await plugin.chain.chain_suggester_tfiles();
    plugin.explorer.sort();
  }
});
var commandBuilders = [
  open_prev_notes,
  open_next_notes,
  open_notes_smarter,
  sugguster_open_note,
  longform2notechain,
  longform4notechain,
  sort_file_explorer,
  clear_inlinks,
  replace_notes_with_regx,
  move_file_to_another_folder,
  chain_insert_node,
  chain_set_seq_note
];
function addCommands(plugin) {
  commandBuilders.forEach((c) => {
    plugin.addCommand(c(plugin));
  });
}
var NoteChainPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    this.debug = false;
    await this.loadSettings();
    this.utils = (init_utils(), __toCommonJS(utils_exports));
    this.ob = require("obsidian");
    this.editor = new NCEditor(this.app);
    this.chain = new NoteChain(this, this.editor);
    this.explorer = new NCFileExplorer(this);
    addCommands(this);
    this.addSettingTab(new NCSettingTab(this.app, this));
    console.log("Zig-Holding:regeister ufunc_on_file_open");
    this.registerEvent(
      this.app.workspace.on("file-open", this.ufunc_on_file_open)
    );
    this.registerEvent(this.app.vault.on(
      "delete",
      (file) => {
        if (this.debug) {
          console.log("delete...");
        }
        this.chain.chain_pop_node(file);
        this.explorer.sort();
      }
    ));
    this.registerEvent(this.app.vault.on(
      "create",
      () => {
        if (this.debug) {
          console.log("create...");
        }
        this.explorer.sort();
      }
    ));
    this.registerEvent(this.app.vault.on(
      "rename",
      (file, oldPath) => {
        if (this.debug) {
          console.log("rename...");
        }
        this.explorer.sort();
      }
    ));
  }
  onunload() {
    console.log("Zig-Holding:unregeister ufunc_on_file_open");
    this.app.workspace.off("file-open", this.ufunc_on_file_open);
    this.explorer.unregister();
    this.explorer.sort();
  }
  async ufunc_on_file_open(file) {
    if (this.app.hasOwnProperty("plugins")) {
      let zh2 = await this.app.plugins.getPlugin("note-chain");
    }
    let zh = await app.plugins.getPlugin("note-chain");
    if (!zh) {
      return;
    }
    if (zh.settings.refreshDataView) {
      zh.app.commands.executeCommandById(
        "dataview:dataview-force-refresh-views"
      );
    }
    if (zh.settings.refreshTasks) {
      let target = await app.plugins.getPlugin("obsidian-tasks-plugin");
      target.cache.notifySubscribers();
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async clear_inlinks(tfile = this.chain.current_note, mode = "suggester") {
    let notes = this.chain.get_inlinks(tfile);
    if (notes.length) {
      if (mode === "suggester") {
        mode = await this.chain.suggester(
          ["\u5220\u9664\u94FE\u63A5", "\u66FF\u6362\u94FE\u63A5", "\u5220\u9664\u6BB5\u843D"],
          [["link", "del"], ["link", "rep"], ["para", "del"]]
        );
      }
      let reg = this.editor.regexp_link(tfile, mode[0]);
      if (reg) {
        for (let note of notes) {
          let target;
          if (mode[1] === "rep") {
            target = tfile.basename;
          } else {
            target = "";
          }
          this.editor.replace(note, reg, target);
        }
      }
    }
  }
  get prompt() {
    return get_tp_func(this.app, "tp.system.prompt");
  }
  async replace_notes_with_regx() {
    let notes = await this.chain.suggester_notes();
    if ((notes == null ? void 0 : notes.length) > 0) {
      try {
        let regs = await this.prompt("\u8981\u66FF\u6362\u7684\u6B63\u5219\u8868\u8FBE\u5F0F");
        if (regs == null) {
          return;
        }
        let reg = new RegExp(regs, "g");
        let target = await this.prompt("\u76EE\u6807\u5B57\u7B26\u4E32");
        if (target == null) {
          return;
        }
        target = target.trim().replace(
          /\\n/g,
          "\n"
        );
        console.log(regs, reg, target);
        for (let note of notes) {
          await this.editor.replace(note, reg, target);
        }
      } catch (error) {
        console.log(error);
      }
    }
  }
  async cmd_chain_insert_node() {
    let curr = this.chain.current_note;
    if (curr == null) {
      return;
    }
    let notes = await this.chain.suggester_notes(curr, false);
    if (!notes) {
      return;
    }
    notes = this.chain.sort_tfiles(notes, ["mtime", "x"]);
    notes = this.chain.sort_tfiles_by_chain(notes);
    if (notes.length == 0) {
      return;
    }
    const note = await this.chain.suggester(
      (file) => this.tfile_to_string(file, [], ""),
      notes
    );
    if (!note) {
      return;
    }
    let sitems = [
      "insert_node_after",
      "insert_node_before",
      "insert_node_as_head",
      "insert_node_as_tail",
      "insert_folder_after"
    ];
    let mode = await this.chain.suggester(
      sitems,
      sitems,
      false,
      "Select Node Insert Mode."
    );
    if (!mode) {
      return;
    }
    console.log(typeof mode, mode);
    if (mode === "insert_node_as_head") {
      await this.chain.chain_insert_node_as_head(curr, note);
    } else if (mode === "insert_node_as_tail") {
      await this.chain.chain_insert_node_as_tail(curr, note);
    } else if (mode === "insert_node_before") {
      await this.chain.chain_insert_node_before(curr, note);
    } else if (mode === "insert_node_after") {
      await this.chain.chain_insert_node_after(curr, note);
    } else if (mode === "insert_folder_after") {
      await this.chain.chain_insert_folder_after(curr, note);
    } else {
      return;
    }
  }
  tfile_to_string(tfile, fields, seq) {
    let items = new Array();
    if (tfile == this.chain.current_note) {
      items.push("\u{1F3E0}" + tfile.basename);
    } else {
      items.push(tfile.basename);
    }
    for (let field of fields) {
      try {
        items.push(this.editor.get_frontmatter(tfile, field));
      } catch (error) {
        items.push("-");
      }
    }
    return items.join(seq);
  }
  async open_note_smarter() {
    let curr = this.chain.current_note;
    let notes = await this.chain.suggester_notes(curr, false);
    notes = this.chain.sort_tfiles(notes, ["mtime", "x"]);
    notes = this.chain.sort_tfiles_by_chain(notes);
    if (notes.length > 0) {
      let note = await this.chain.suggester(
        (file) => this.chain.tfile_to_string(file),
        notes
      );
      if (note) {
        await this.chain.open_note(note);
      }
    }
  }
};
var NCSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian3.Setting(containerEl).setName("Sort File Explorer").setDesc("Sort File Explorer by Chain").addToggle(
      (text) => text.setValue(this.plugin.settings.isSortFileExplorer).onChange(async (value) => {
        this.plugin.settings.isSortFileExplorer = value;
        await this.plugin.saveSettings();
        this.plugin.explorer.file_explorer.sort();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Sort Folder First").setDesc("Sort File Explorer Folder First").addToggle(
      (text) => text.setValue(this.plugin.settings.isFolderFirst).onChange(async (value) => {
        this.plugin.settings.isFolderFirst = value;
        await this.plugin.saveSettings();
        this.plugin.explorer.file_explorer.sort();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("PrevChain").setDesc("Number of Prev Notes to show?").addText((text) => text.setValue(this.plugin.settings.PrevChain).onChange(async (value) => {
      this.plugin.settings.PrevChain = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("NextChain").setDesc("Number of Next Notes to show?").addText((text) => text.setValue(this.plugin.settings.NextChain).onChange(async (value) => {
      this.plugin.settings.NextChain = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("refreshDataView").setDesc("Refresh Dataview while open new file?").addToggle(
      (text) => text.setValue(this.plugin.settings.refreshDataView).onChange(async (value) => {
        this.plugin.settings.refreshDataView = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("refreshTasks").setDesc("Refresh Tasks while open new file?").addToggle(
      (text) => text.setValue(this.plugin.settings.refreshTasks).onChange(async (value) => {
        this.plugin.settings.refreshTasks = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3V0aWxzLnRzIiwgIm1haW4udHMiLCAic3JjL05DRWRpdG9yLnRzIiwgInNyYy9Ob3RlQ2hhaW4udHMiLCAic3JjL05DRmlsZUV4cGxvcmVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBnZXQgfSBmcm9tICdodHRwJztcclxuaW1wb3J0IHsgXHJcblx0QXBwXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldF9wbHVnaW5zKGFwcDpBcHAsbmFtZTpzdHJpbmcpe1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdF9hcnJheShpdGVtczpBcnJheTxhbnk+KXtcclxuICAgIGlmKGl0ZW1zPT1udWxsKXtyZXR1cm4gW107fVxyXG4gICAgaWYodHlwZW9mIGl0ZW1zID09PSAnc3RyaW5nJyl7cmV0dXJuIFtpdGVtc107fVxyXG4gICAgaWYoIShpdGVtcyBpbnN0YW5jZW9mIEFycmF5KSl7cmV0dXJuIFtpdGVtc107fVxyXG5cclxuICAgIGxldCByZXMgPSBbXSBhcyBhbnkgW107XHJcbiAgICBmb3IobGV0IGl0ZW0gb2YgaXRlbXMpe1xyXG4gICAgICAgIGlmKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyl7XHJcbiAgICAgICAgICAgIHJlcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIH1lbHNlIGlmKGl0ZW0gaW5zdGFuY2VvZiBBcnJheSl7XHJcbiAgICAgICAgICAgIHJlcyA9IHJlcy5jb25jYXQodGhpcy5jb25jYXRfYXJyYXkoaXRlbSkpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXMucHVzaChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59ICBcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzbGVlcChtczpudW1iZXJ8dW5kZWZpbmVkKXtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrX3ZhbHVlKHQ6YW55LGs6YW55LHY6YW55LGR0Om51bWJlcixUOm51bWJlcil7XHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICB3aGlsZSh0W2tdPT1udWxsIHx8ICEodFtrXT09PXYpKXtcclxuICAgICAgICBhd2FpdCBzbGVlcChkdCk7XHJcbiAgICAgICAgaSA9IGR0K2R0O1xyXG4gICAgICAgIGlmKGk+VCl7YnJlYWs7fVxyXG4gICAgfVxyXG4gICAgaWYodFtrXSAmJiB0W2tdPT09dil7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRfdHBfZnVuYyhhcHA6QXBwLHRhcmdldDpzdHJpbmcpIHtcclxuXHQvLyBcdTgzQjdcdTUzRDYgIHRlbXBsYXRlciBcdTUxRkRcdTY1NzBcclxuXHQvLyBnZXRfdHBfZnVuYyhcInRwLnN5c3RlbS5wcm9tcHRcIilcclxuXHJcblx0bGV0IHRlbXBsYXRlciA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcclxuXHRcdFwidGVtcGxhdGVyLW9ic2lkaWFuXCJcclxuXHQpO1xyXG5cclxuXHRsZXQgaXRlbXMgPSB0YXJnZXQuc3BsaXQoXCIuXCIpO1xyXG5cdGlmKGl0ZW1zWzBdLmxvY2FsZUNvbXBhcmUoXCJ0cFwiKSE9MCB8fCBpdGVtcy5sZW5ndGghPTMpe3JldHVybiB1bmRlZmluZWQ7fVxyXG5cdFxyXG5cdGxldCBtb2R1bGVzID0gdGVtcGxhdGVyLnRlbXBsYXRlci5mdW5jdGlvbnNfZ2VuZXJhdG9yLlxyXG5cdFx0aW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXkuZmlsdGVyKFxyXG5cdFx0XHQoaXRlbTphbnkpPT4oaXRlbS5uYW1lLmxvY2FsZUNvbXBhcmUoaXRlbXNbMV0pPT0wKVxyXG5cdFx0KTtcclxuXHJcblx0aWYobW9kdWxlcy5sZW5ndGg9PTApe3JldHVybiB1bmRlZmluZWR9XHJcblx0XHJcblx0cmV0dXJuIG1vZHVsZXNbMF0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoaXRlbXNbMl0pO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldF9wcm90b3R5cGUodCwgZSkge1xyXG4gICAgLy8gXHU1RjUzIGUgXHU0RTJEXHU2NzA5XHU1OTFBXHU0RTJBXHU1OTFBXHU0RTJBXHU1MUZEXHU2NTcwXHU2NUY2XHVGRjBDXHU4RkQ0XHU1NkRFXHU0RTAwXHU0RTJBXHU1MUZEXHU2NTcwXHVGRjBDXHU2MjY3XHU4ODRDXHU2MjQwXHU2NzA5XHU1MUZEXHU2NTcwXHJcbiAgICAvL1xyXG4gICAgbGV0IHIgPSBPYmplY3Qua2V5cyhlKS5tYXAoaT0+c2V0X3Byb3RvdHlwZV9vbih0LCBpLCBlW2ldKSk7XHJcbiAgICByZXR1cm4gci5sZW5ndGggPT09IDEgPyByWzBdIDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgci5mb3JFYWNoKGk9PmkoKSlcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0X3Byb3RvdHlwZV9vbihwcm90b3R5cGUsIG5hbWUsIGZ1bmMpIHtcclxuICAgIC8vIHByb3RvdHlwZVx1RkYxQVx1NzZFRVx1NjgwN1x1NUJGOVx1OEM2MSBPYmplY3QucHJvdG90eXBlIFx1NjIxNiBvYmplY3QuY29uc3RydWN0b3IucHJvdG90eXBlXHJcbiAgICAvLyBuYW1lXHVGRjFBXHU1QzVFXHU2MDI3XHU1NDBEXHJcbiAgICAvLyBmdW5jOiBcdTRGMjBcdTUzQzJcdTRFM0EgZnVuYyhwcm90b3R5cGVbbmFtZV0pXHVGRjBDXHU3RUM0XHU1NDA4XHU2MjY3XHU4ODRDXHU2NUIwXHU1MUZEXHU2NTcwXHU1NDhDXHU2NUU3XHU1MUZEXHU2NTcwXHJcblx0bGV0IG9yZ19mdW5jID0gcHJvdG90eXBlW25hbWVdXHJcblx0ICAsIGlzT3duUHJvcGVydHkgPSBwcm90b3R5cGUuaGFzT3duUHJvcGVydHkobmFtZSlcclxuXHQgICwgZmluYWxfZnVuYyA9IGZ1bmMob3JnX2Z1bmMpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmKG9yZ19mdW5jKXtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZmluYWxfZnVuYywgb3JnX2Z1bmMpO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGEsIGZpbmFsX2Z1bmMpO1xyXG4gICAgcHJvdG90eXBlW25hbWVdID0gYTtcclxuICAgIHJldHVybiBzO1xyXG5cclxuXHRmdW5jdGlvbiBhKC4uLmQpIHtcclxuICAgICAgICBpZihmaW5hbF9mdW5jID09PSBvcmdfZnVuYyAmJiBwcm90b3R5cGVbbmFtZV0gPT09IGEpe1xyXG4gICAgICAgICAgICBzKCk7XHJcbiAgICAgICAgfVxyXG5cdFx0cmV0dXJuICBmaW5hbF9mdW5jLmFwcGx5KHRoaXMsIGQpO1xyXG5cdH1cclxuXHRmdW5jdGlvbiBzKCkge1xyXG4gICAgICAgIGlmKHByb3RvdHlwZVtuYW1lXSA9PT0gYSl7XHJcbiAgICAgICAgICAgIGlmKGlzT3duUHJvcGVydHkpe1xyXG4gICAgICAgICAgICAgICAgcHJvdG90eXBlW25hbWVdID0gb3JnX2Z1bmM7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHByb3RvdHlwZVtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihmaW5hbF9mdW5jICE9PSBvcmdfZnVuYyl7XHJcbiAgICAgICAgICAgIGZpbmFsX2Z1bmMgPSBvcmdfZnVuYztcclxuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGEsIG9yZ19mdW5jIHx8IEZ1bmN0aW9uKVxyXG4gICAgICAgIH1cclxuXHR9XHJcbn0iLCAiaW1wb3J0IHsgXHJcblx0QXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgXHJcblx0UGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLFxyXG5cdFRGaWxlLFRGb2xkZXJcclxufSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5cclxuaW1wb3J0IHtOQ0VkaXRvcn0gZnJvbSAnLi9zcmMvTkNFZGl0b3InO1xyXG5pbXBvcnQge05vdGVDaGFpbn0gZnJvbSAnLi9zcmMvTm90ZUNoYWluJztcclxuaW1wb3J0IHtOQ0ZpbGVFeHBsb3Jlcn0gZnJvbSAnLi9zcmMvTkNGaWxlRXhwbG9yZXInO1xyXG5pbXBvcnQge2dldF90cF9mdW5jfSBmcm9tICcuL3NyYy91dGlscydcclxuXHJcbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxyXG5cclxuaW50ZXJmYWNlIE5DU2V0dGluZ3Mge1xyXG5cdFByZXZDaGFpbjpzdHJpbmc7XHJcblx0TmV4dENoYWluOnN0cmluZztcclxuXHRyZWZyZXNoRGF0YVZpZXc6Ym9vbGVhbjtcclxuXHRyZWZyZXNoVGFza3M6Ym9vbGVhbixcclxuXHRpc1NvcnRGaWxlRXhwbG9yZXI6Ym9vbGVhbixcclxuXHRpc0ZvbGRlckZpcnN0OmJvb2xlYW4sXHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE5DU2V0dGluZ3MgPSB7XHJcblx0UHJldkNoYWluIDogXCIxMFwiLFxyXG5cdE5leHRDaGFpbiA6IFwiMTBcIixcclxuXHRyZWZyZXNoRGF0YVZpZXcgOiB0cnVlLFxyXG5cdHJlZnJlc2hUYXNrcyA6IHRydWUsXHJcblx0aXNTb3J0RmlsZUV4cGxvcmVyIDogdHJ1ZSxcclxuXHRpc0ZvbGRlckZpcnN0IDogdHJ1ZVxyXG59XHJcblxyXG5jb25zdCBsb25nZm9ybTJub3RlY2hhaW4gPSAocGx1Z2luOk5vdGVDaGFpblBsdWdpbikgPT4gKHtcclxuXHRpZDogXCJsb25nZm9ybTJub3RlY2hhaW5cIixcclxuICAgIG5hbWU6IFwiUmVzZXQgTm90ZSBDaGFpbiBieSBMb25nRm9ybS5cIixcclxuXHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0bGV0IGN1cnIgPSBwbHVnaW4uY2hhaW4uY3VycmVudF9ub3RlO1xyXG5cdFx0aWYoY3VyciA9PSBudWxsKXtyZXR1cm47fVxyXG5cdFx0YXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihcclxuXHRcdFx0Y3VycixcclxuXHRcdFx0Zm0gPT57XHJcblx0XHRcdFx0aWYoY3Vycj09bnVsbCl7cmV0dXJuO31cclxuXHRcdFx0XHRpZihmbVsnbG9uZ2Zvcm0nXT09bnVsbCl7cmV0dXJuO31cclxuXHRcdFx0XHRsZXQgc2NlbmVzID0gcGx1Z2luLnV0aWxzLmNvbmNhdF9hcnJheShmbS5sb25nZm9ybS5zY2VuZXMpO1xyXG5cdFx0XHRcdGxldCBpZ25vcmVkRmlsZXMgPSBwbHVnaW4udXRpbHMuY29uY2F0X2FycmF5KGZtLmxvbmdmb3JtLmlnbm9yZWRGaWxlcyk7XHJcblx0XHRcdFx0aWdub3JlZEZpbGVzID0gaWdub3JlZEZpbGVzLmZpbHRlcigoZjpzdHJpbmcpPT4hc2NlbmVzLmNvbnRhaW5zKGYpKTtcclxuXHRcdFx0XHRsZXQgbm90ZXMgPSBwbHVnaW4udXRpbHMuY29uY2F0X2FycmF5KFtzY2VuZXMsaWdub3JlZEZpbGVzXSk7XHJcblx0XHRcdFx0bm90ZXMgPSBub3Rlcy5tYXAoKGY6c3RyaW5nKT0+cGx1Z2luLmNoYWluLmZpbmRfdGZpbGUoZikpO1xyXG5cdFx0XHRcdGlmKGN1cnIucGFyZW50PT1udWxsKXtyZXR1cm59O1xyXG5cdFx0XHRcdGxldCB0ZmlsZXMgPSBwbHVnaW4uY2hhaW4uZ2V0X3RmaWxlc19vZl9mb2xkZXIoY3Vyci5wYXJlbnQpLmZpbHRlcigoZjphbnkpPT4hbm90ZXMuY29udGFpbnMoZikpO1xyXG5cdFx0XHRcdG5vdGVzID0gcGx1Z2luLnV0aWxzLmNvbmNhdF9hcnJheShbdGZpbGVzLG5vdGVzXSk7XHJcblx0XHRcdFx0cGx1Z2luLmNoYWluLmNoYWluX2NvbmNhdF90ZmlsZXMobm90ZXMpO1xyXG5cdFx0XHR9XHJcblx0XHQpXHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGxvbmdmb3JtNG5vdGVjaGFpbiA9IChwbHVnaW46Tm90ZUNoYWluUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiBcImxvbmdmb3JtNG5vdGVjaGFpblwiLFxyXG4gICAgbmFtZTogXCJSZXNldCBMb25nRm9ybSBTZWNuZXMgYnkgTm90ZSBDaGFpbi5cIixcclxuXHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0bGV0IGN1cnIgPSBwbHVnaW4uY2hhaW4uY3VycmVudF9ub3RlO1xyXG5cdFx0aWYoY3Vycj09bnVsbCl7cmV0dXJuO31cclxuXHRcdGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoXHJcblx0XHRcdGN1cnIsXHJcblx0XHRcdGZtID0+e1xyXG5cdFx0XHRcdGlmKGN1cnI9PW51bGwpe3JldHVybjt9XHJcblx0XHRcdFx0aWYoY3Vyci5wYXJlbnQ9PW51bGwpe3JldHVybn07XHJcblxyXG5cdFx0XHRcdGlmKGZtWydsb25nZm9ybSddPT1udWxsKXtyZXR1cm47fVxyXG5cdFx0XHRcdGxldCBub3RlcyA9IHBsdWdpbi5jaGFpbi5nZXRfdGZpbGVzX29mX2ZvbGRlcihjdXJyLnBhcmVudCk7XHJcblx0XHRcdFx0bm90ZXMgPSBwbHVnaW4uY2hhaW4uc29ydF90ZmlsZXNfYnlfY2hhaW4obm90ZXMpO1xyXG5cdFx0XHRcdGZtLmxvbmdmb3JtLnNjZW5lcyA9IG5vdGVzLm1hcCgoZjpURmlsZSk9PmYuYmFzZW5hbWUpO1xyXG5cdFx0XHR9XHJcblx0XHQpXHJcblx0fVxyXG59KTtcclxuXHJcblxyXG5jb25zdCBzb3J0X2ZpbGVfZXhwbG9yZXIgPSAocGx1Z2luOk5vdGVDaGFpblBsdWdpbikgPT4gKHtcclxuXHRpZDogXCJzb3J0X2ZpbGVfZXhwbG9yZXJcIixcclxuICAgIG5hbWU6IFwiU29ydCBGaWxlIEV4cGxvcmVyIGJ5IE5vdGUgQ2hhaW4uXCIsXHJcblx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuXHRcdGF3YWl0IHBsdWdpbi5leHBsb3Jlci5zb3J0KCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IG9wZW5fbm90ZXNfc21hcnRlciA9IChwbHVnaW46Tm90ZUNoYWluUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAnb3Blbl9ub3Rlc19zbWFydGVyJyxcclxuXHRuYW1lOiAnT3BlbiBub3RlIHNtYXJ0ZXInLFxyXG5cdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRwbHVnaW4ub3Blbl9ub3RlX3NtYXJ0ZXIoKTtcclxuXHR9XHJcbn0pXHJcblxyXG5jb25zdCBzdWdndXN0ZXJfb3Blbl9ub3RlID0gKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdzdWdndXN0ZXJfb3Blbl9ub3RlJyxcclxuXHRuYW1lOiAnT3BlbiBub3RlJyxcclxuXHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0cGx1Z2luLmNoYWluLnN1Z2d1c3Rlcl9vcGVuX25vdGUoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuY29uc3Qgb3Blbl9wcmV2X25vdGVzID0gKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdvcGVuX3ByZXZfbm90ZXMnLFxyXG5cdG5hbWU6ICdPcGVuIHByZXYgbm90ZScsXHJcblx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdHBsdWdpbi5jaGFpbi5vcGVuX3ByZXZfbm90ZXMoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuY29uc3Qgb3Blbl9uZXh0X25vdGVzID0gKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdvcGVuX25leHRfbm90ZXMnLFxyXG5cdG5hbWU6ICdPcGVuIG5leHQgbm90ZScsXHJcblx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdHBsdWdpbi5jaGFpbi5vcGVuX25leHRfbm90ZXMoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IGNsZWFyX2lubGlua3MgPSAocGx1Z2luOk5vdGVDaGFpblBsdWdpbikgPT4gKHtcclxuXHRpZDogJ2NsZWFyX2lubGlua3MnLFxyXG5cdG5hbWU6ICdDbGVhciBpbmxpbmtzIG9mIGN1cnJlbnQgZmlsZScsXHJcblx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdHBsdWdpbi5jbGVhcl9pbmxpbmtzKCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IG1vdmVfZmlsZV90b19hbm90aGVyX2ZvbGRlciA9IChwbHVnaW46Tm90ZUNoYWluUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAnbW92ZV9maWxlX3RvX2Fub3RoZXJfZm9sZGVyJyxcclxuXHRuYW1lOiAnTW92ZSBjdXJyZW50IGZpbGUgdG8gYW5vdGhlciBmb2xkZXInLFxyXG5cdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRwbHVnaW4uY2hhaW4uY21kX21vdmVfZmlsZV90b19hbm90aGVyX2ZvbGRlcigpO1xyXG5cdH1cclxufSk7XHJcblxyXG5jb25zdCByZXBsYWNlX25vdGVzX3dpdGhfcmVneCA9IChwbHVnaW46Tm90ZUNoYWluUGx1Z2luKSA9PiAoe1xyXG5cdGlkOiAncmVwbGFjZV9ub3Rlc193aXRoX3JlZ3gnLFxyXG5cdG5hbWU6ICdSZXBsYWNlIGJ5IHJlZ2V4JyxcclxuXHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0cGx1Z2luLnJlcGxhY2Vfbm90ZXNfd2l0aF9yZWd4KCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGNoYWluX2luc2VydF9ub2RlID0gKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdjaGFpbl9pbnNlcnRfbm9kZScsXHJcblx0bmFtZTogJ0luc2VydCBub2RlIG9mIGNoYWluJyxcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0YXdhaXQgcGx1Z2luLmNtZF9jaGFpbl9pbnNlcnRfbm9kZSgpO1xyXG5cdFx0YXdhaXQgcGx1Z2luLmV4cGxvcmVyLnNvcnQoNTAwKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuY29uc3QgY2hhaW5fc2V0X3NlcV9ub3RlID0gKHBsdWdpbjpOb3RlQ2hhaW5QbHVnaW4pID0+ICh7XHJcblx0aWQ6ICdjaGFpbl9zZXRfc2VxX25vdGUnLFxyXG5cdG5hbWU6ICdSZXNldCB0aGUgY2hhaW4gb2YgY3VycmVudCBmb2xkZXIhJyxcclxuXHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0YXdhaXQgcGx1Z2luLmNoYWluLmNoYWluX3N1Z2dlc3Rlcl90ZmlsZXMoKTtcclxuXHRcdHBsdWdpbi5leHBsb3Jlci5zb3J0KCk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnN0IGNvbW1hbmRCdWlsZGVycyA9IFtcclxuXHRvcGVuX3ByZXZfbm90ZXMsXHJcblx0b3Blbl9uZXh0X25vdGVzLFxyXG5cdG9wZW5fbm90ZXNfc21hcnRlcixcclxuXHRzdWdndXN0ZXJfb3Blbl9ub3RlLFxyXG5cdGxvbmdmb3JtMm5vdGVjaGFpbixcclxuXHRsb25nZm9ybTRub3RlY2hhaW4sXHJcblx0c29ydF9maWxlX2V4cGxvcmVyLFxyXG5cdGNsZWFyX2lubGlua3MsXHJcblx0cmVwbGFjZV9ub3Rlc193aXRoX3JlZ3gsXHJcblx0bW92ZV9maWxlX3RvX2Fub3RoZXJfZm9sZGVyLFxyXG5cdGNoYWluX2luc2VydF9ub2RlLFxyXG5cdGNoYWluX3NldF9zZXFfbm90ZVxyXG5dO1xyXG5cclxuZnVuY3Rpb24gYWRkQ29tbWFuZHMocGx1Z2luOk5vdGVDaGFpblBsdWdpbikge1xyXG4gICAgY29tbWFuZEJ1aWxkZXJzLmZvckVhY2goKGMpID0+IHtcclxuICAgICAgICBwbHVnaW4uYWRkQ29tbWFuZChjKHBsdWdpbikpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdGVDaGFpblBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IE5DU2V0dGluZ3M7XHJcblx0Y2hhaW4gOiBOb3RlQ2hhaW47XHJcblx0ZWRpdG9yIDogTkNFZGl0b3I7IFxyXG5cdGV4cGxvcmVyIDogTkNGaWxlRXhwbG9yZXI7XHJcblx0ZGVidWc6Ym9vbGVhbjtcclxuXHR1dGlsczphbnk7XHJcblx0b2I6YW55O1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHR0aGlzLmRlYnVnPWZhbHNlO1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0dGhpcy51dGlscyA9IHJlcXVpcmUoJy4vc3JjL3V0aWxzJyk7XHJcblx0XHR0aGlzLm9iID0gcmVxdWlyZSgnb2JzaWRpYW4nKTtcclxuXHRcdHRoaXMuZWRpdG9yID0gbmV3IE5DRWRpdG9yKHRoaXMuYXBwKTtcclxuXHRcdHRoaXMuY2hhaW4gPSBuZXcgTm90ZUNoYWluKHRoaXMsdGhpcy5lZGl0b3IpO1xyXG5cdFx0dGhpcy5leHBsb3JlciA9IG5ldyBOQ0ZpbGVFeHBsb3Jlcih0aGlzKTtcclxuXHJcblx0XHRhZGRDb21tYW5kcyh0aGlzKTtcclxuXHJcblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBOQ1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcblx0XHRjb25zb2xlLmxvZygnWmlnLUhvbGRpbmc6cmVnZWlzdGVyIHVmdW5jX29uX2ZpbGVfb3BlbicpO1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsIHRoaXMudWZ1bmNfb25fZmlsZV9vcGVuKVxyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXHJcblx0XHRcdFwiZGVsZXRlXCIsIChmaWxlOiBURmlsZSkgPT4ge1xyXG5cdFx0XHRcdGlmKHRoaXMuZGVidWcpe2NvbnNvbGUubG9nKFwiZGVsZXRlLi4uXCIpO31cclxuXHRcdFx0XHR0aGlzLmNoYWluLmNoYWluX3BvcF9ub2RlKGZpbGUpO1xyXG5cdFx0XHRcdHRoaXMuZXhwbG9yZXIuc29ydCgpO1xyXG5cdFx0XHR9XHJcblx0XHQpKVxyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbihcclxuXHRcdFx0XCJjcmVhdGVcIiwgKCkgPT4ge1xyXG5cdFx0XHRcdGlmKHRoaXMuZGVidWcpe2NvbnNvbGUubG9nKFwiY3JlYXRlLi4uXCIpO31cclxuXHRcdFx0XHR0aGlzLmV4cGxvcmVyLnNvcnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0KSlcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oXHJcblx0XHRcdFwicmVuYW1lXCIsIChmaWxlOiBURmlsZSxvbGRQYXRoOnN0cmluZykgPT4ge1xyXG5cdFx0XHRcdGlmKHRoaXMuZGVidWcpe2NvbnNvbGUubG9nKFwicmVuYW1lLi4uXCIpO31cclxuXHRcdFx0XHR0aGlzLmV4cGxvcmVyLnNvcnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0KSlcclxuXHR9XHJcblxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdaaWctSG9sZGluZzp1bnJlZ2Vpc3RlciB1ZnVuY19vbl9maWxlX29wZW4nKTtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vZmYoJ2ZpbGUtb3BlbicsIHRoaXMudWZ1bmNfb25fZmlsZV9vcGVuKTtcclxuXHRcdHRoaXMuZXhwbG9yZXIudW5yZWdpc3RlcigpO1xyXG5cdFx0dGhpcy5leHBsb3Jlci5zb3J0KCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyB1ZnVuY19vbl9maWxlX29wZW4oZmlsZTpURmlsZSl7XHJcblx0XHRpZih0aGlzLmFwcC5oYXNPd25Qcm9wZXJ0eSgncGx1Z2lucycpKXtcclxuXHRcdFx0bGV0IHpoID0gYXdhaXQgdGhpcy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJub3RlLWNoYWluXCIpO1xyXG5cdFx0fVxyXG5cdFx0bGV0IHpoID0gYXdhaXQgYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwibm90ZS1jaGFpblwiKTtcclxuXHRcdGlmKCF6aCl7cmV0dXJuO31cclxuXHRcdGlmKHpoLnNldHRpbmdzLnJlZnJlc2hEYXRhVmlldyl7XHJcblx0XHRcdHpoLmFwcC5jb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoXHJcblx0XHRcdFx0XCJkYXRhdmlldzpkYXRhdmlldy1mb3JjZS1yZWZyZXNoLXZpZXdzXCJcclxuXHRcdFx0KVxyXG5cdFx0fVxyXG5cdFx0aWYoemguc2V0dGluZ3MucmVmcmVzaFRhc2tzKXtcclxuXHRcdFx0bGV0IHRhcmdldCA9IGF3YWl0IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcIm9ic2lkaWFuLXRhc2tzLXBsdWdpblwiKTtcclxuXHRcdFx0dGFyZ2V0LmNhY2hlLm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNsZWFyX2lubGlua3ModGZpbGU9dGhpcy5jaGFpbi5jdXJyZW50X25vdGUsbW9kZT0nc3VnZ2VzdGVyJyl7XHJcblx0XHRsZXQgbm90ZXMgPSB0aGlzLmNoYWluLmdldF9pbmxpbmtzKHRmaWxlKTtcclxuXHRcdGlmKG5vdGVzLmxlbmd0aCl7XHJcblx0XHRcdGlmKG1vZGU9PT0nc3VnZ2VzdGVyJyl7XHJcblx0XHRcdFx0bW9kZSA9IGF3YWl0IHRoaXMuY2hhaW4uc3VnZ2VzdGVyKFxyXG5cdFx0XHRcdFx0W1wiXHU1MjIwXHU5NjY0XHU5NEZFXHU2M0E1XCIsJ1x1NjZGRlx1NjM2Mlx1OTRGRVx1NjNBNScsXCJcdTUyMjBcdTk2NjRcdTZCQjVcdTg0M0RcIixdLFxyXG5cdFx0XHRcdFx0W1snbGluaycsJ2RlbCddLFsnbGluaycsJ3JlcCddLFsncGFyYScsJ2RlbCddXVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdFx0bGV0IHJlZyA9IHRoaXMuZWRpdG9yLnJlZ2V4cF9saW5rKHRmaWxlLG1vZGVbMF0pO1xyXG5cdFx0XHRpZihyZWcpe1xyXG5cdFx0XHRcdGZvcihsZXQgbm90ZSBvZiBub3Rlcyl7XHJcblx0XHRcdFx0XHRsZXQgdGFyZ2V0O1xyXG5cdFx0XHRcdFx0aWYobW9kZVsxXT09PSdyZXAnKXtcclxuXHRcdFx0XHRcdFx0dGFyZ2V0PXRmaWxlLmJhc2VuYW1lO1xyXG5cdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdHRhcmdldD0nJ1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dGhpcy5lZGl0b3IucmVwbGFjZShub3RlLHJlZyx0YXJnZXQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0IHByb21wdCgpe1xyXG5cdFx0cmV0dXJuIGdldF90cF9mdW5jKHRoaXMuYXBwLCd0cC5zeXN0ZW0ucHJvbXB0Jyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZXBsYWNlX25vdGVzX3dpdGhfcmVneCgpe1xyXG5cdFx0bGV0IG5vdGVzID0gYXdhaXQgdGhpcy5jaGFpbi5zdWdnZXN0ZXJfbm90ZXMoKTtcclxuXHRcdGlmKG5vdGVzPy5sZW5ndGg+MCl7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0bGV0IHJlZ3MgPSBhd2FpdCB0aGlzLnByb21wdCgnXHU4OTgxXHU2NkZGXHU2MzYyXHU3Njg0XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGJyk7XHJcblx0XHRcdFx0aWYocmVncz09bnVsbCl7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGxldCByZWcgPSBuZXcgUmVnRXhwKHJlZ3MsJ2cnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRsZXQgdGFyZ2V0ID0gYXdhaXQgdGhpcy5wcm9tcHQoJ1x1NzZFRVx1NjgwN1x1NUI1N1x1N0IyNlx1NEUzMicpO1xyXG5cdFx0XHRcdGlmKHRhcmdldD09bnVsbCl7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRhcmdldCA9IHRhcmdldC50cmltKCkucmVwbGFjZShcclxuXHRcdFx0XHRcdC9cXFxcbi9nLCdcXG4nXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhyZWdzLHJlZyx0YXJnZXQpO1xyXG5cdFx0XHRcdGZvcihsZXQgbm90ZSBvZiBub3Rlcyl7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmVkaXRvci5yZXBsYWNlKG5vdGUscmVnLHRhcmdldCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0YXN5bmMgY21kX2NoYWluX2luc2VydF9ub2RlKCl7XHJcblx0XHRsZXQgY3VyciA9IHRoaXMuY2hhaW4uY3VycmVudF9ub3RlO1xyXG5cdFx0aWYoY3Vycj09bnVsbCl7cmV0dXJuO31cclxuXHRcdGxldCBub3RlcyA9IGF3YWl0IHRoaXMuY2hhaW4uc3VnZ2VzdGVyX25vdGVzKGN1cnIsZmFsc2UpO1xyXG5cdFx0aWYoIW5vdGVzKXtyZXR1cm59XHJcblx0XHRub3RlcyA9IHRoaXMuY2hhaW4uc29ydF90ZmlsZXMobm90ZXMsWydtdGltZScsJ3gnXSk7XHJcblx0XHRub3RlcyA9IHRoaXMuY2hhaW4uc29ydF90ZmlsZXNfYnlfY2hhaW4obm90ZXMpO1xyXG5cdFx0Ly9ub3RlcyA9IG5vdGVzLmZpbHRlcihmPT5mIT1jdXJyKTtcclxuXHRcdGlmKG5vdGVzLmxlbmd0aD09MCl7cmV0dXJuO31cclxuXHRcdGNvbnN0IG5vdGUgPSBhd2FpdCB0aGlzLmNoYWluLnN1Z2dlc3RlcihcclxuXHRcdFx0KGZpbGU6VEZpbGUpID0+IHRoaXMudGZpbGVfdG9fc3RyaW5nKGZpbGUsW10sXCJcIiksIFxyXG5cdFx0XHRub3Rlc1xyXG5cdFx0KTsgXHJcblx0XHRcclxuXHRcdGlmKCFub3RlKXtyZXR1cm47fVxyXG5cdFx0XHJcblx0XHRsZXQgc2l0ZW1zID0gW1xyXG5cdFx0XHRcImluc2VydF9ub2RlX2FmdGVyXCIsXHJcblx0XHRcdFwiaW5zZXJ0X25vZGVfYmVmb3JlXCIsXHJcblx0XHRcdFwiaW5zZXJ0X25vZGVfYXNfaGVhZFwiLFxyXG5cdFx0XHRcImluc2VydF9ub2RlX2FzX3RhaWxcIixcclxuXHRcdFx0XCJpbnNlcnRfZm9sZGVyX2FmdGVyXCIsXHJcblx0XHRdO1xyXG5cdFx0bGV0IG1vZGUgPSBhd2FpdCB0aGlzLmNoYWluLnN1Z2dlc3RlcihcclxuXHRcdFx0c2l0ZW1zLHNpdGVtcyxmYWxzZSxcIlNlbGVjdCBOb2RlIEluc2VydCBNb2RlLlwiXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHRpZighbW9kZSl7cmV0dXJuO31cclxuXHJcblx0XHRjb25zb2xlLmxvZyh0eXBlb2YobW9kZSksbW9kZSk7XHJcblxyXG5cdFx0aWYobW9kZT09PSdpbnNlcnRfbm9kZV9hc19oZWFkJyl7XHJcblx0XHRcdGF3YWl0IHRoaXMuY2hhaW4uY2hhaW5faW5zZXJ0X25vZGVfYXNfaGVhZChjdXJyLG5vdGUpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdpbnNlcnRfbm9kZV9hc190YWlsJyl7XHJcblx0XHRcdGF3YWl0IHRoaXMuY2hhaW4uY2hhaW5faW5zZXJ0X25vZGVfYXNfdGFpbChjdXJyLG5vdGUpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdpbnNlcnRfbm9kZV9iZWZvcmUnKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5jaGFpbi5jaGFpbl9pbnNlcnRfbm9kZV9iZWZvcmUoY3Vycixub3RlKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0naW5zZXJ0X25vZGVfYWZ0ZXInKXtcclxuXHRcdFx0YXdhaXQgdGhpcy5jaGFpbi5jaGFpbl9pbnNlcnRfbm9kZV9hZnRlcihjdXJyLG5vdGUpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdpbnNlcnRfZm9sZGVyX2FmdGVyJyl7XHJcblx0XHRcdGF3YWl0IHRoaXMuY2hhaW4uY2hhaW5faW5zZXJ0X2ZvbGRlcl9hZnRlcihjdXJyLG5vdGUpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0fVxyXG5cdFxyXG5cdHRmaWxlX3RvX3N0cmluZyh0ZmlsZTpURmlsZSxmaWVsZHM6QXJyYXk8c3RyaW5nPixzZXE6c3RyaW5nKXtcclxuXHRcdGxldCBpdGVtcyA9IG5ldyBBcnJheSgpO1xyXG5cdFx0aWYodGZpbGU9PXRoaXMuY2hhaW4uY3VycmVudF9ub3RlKXtcclxuXHRcdFx0aXRlbXMucHVzaCgnXHVEODNDXHVERkUwJyArIHRmaWxlLmJhc2VuYW1lKVxyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGl0ZW1zLnB1c2godGZpbGUuYmFzZW5hbWUpXHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZvcihsZXQgZmllbGQgb2YgZmllbGRzKXtcclxuXHRcdFx0dHJ5e1xyXG5cdFx0XHRcdGl0ZW1zLnB1c2godGhpcy5lZGl0b3IuZ2V0X2Zyb250bWF0dGVyKHRmaWxlLGZpZWxkKSk7XHJcblx0XHRcdH1jYXRjaChlcnJvcil7XHJcblx0XHRcdFx0aXRlbXMucHVzaChcIi1cIik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBpdGVtcy5qb2luKHNlcSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBvcGVuX25vdGVfc21hcnRlcigpe1xyXG5cdFx0Ly8gXHU5NEZFXHU1RjBGXHU4QzAzXHU3NTI4XHJcblx0XHRsZXQgY3VyciA9IHRoaXMuY2hhaW4uY3VycmVudF9ub3RlO1xyXG5cdFx0bGV0IG5vdGVzID0gYXdhaXQgdGhpcy5jaGFpbi5zdWdnZXN0ZXJfbm90ZXMoY3VycixmYWxzZSlcclxuXHRcdFxyXG5cdFx0bm90ZXMgPSB0aGlzLmNoYWluLnNvcnRfdGZpbGVzKG5vdGVzLFsnbXRpbWUnLCd4J10pO1xyXG5cdFx0bm90ZXMgPSB0aGlzLmNoYWluLnNvcnRfdGZpbGVzX2J5X2NoYWluKG5vdGVzKTtcclxuXHRcdGlmKG5vdGVzLmxlbmd0aD4wKXtcclxuXHRcdFx0bGV0IG5vdGUgPSBhd2FpdCB0aGlzLmNoYWluLnN1Z2dlc3RlcihcclxuXHRcdFx0XHQoZmlsZTpURmlsZSkgPT4gdGhpcy5jaGFpbi50ZmlsZV90b19zdHJpbmcoZmlsZSksIFxyXG5cdFx0XHRcdG5vdGVzXHJcblx0XHRcdClcclxuXHRcdFx0aWYobm90ZSl7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5jaGFpbi5vcGVuX25vdGUobm90ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG59XHJcblxyXG5jbGFzcyBOQ1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IE5vdGVDaGFpblBsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTm90ZUNoYWluUGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHRcdC5zZXROYW1lKCdTb3J0IEZpbGUgRXhwbG9yZXInKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTb3J0IEZpbGUgRXhwbG9yZXIgYnkgQ2hhaW4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNTb3J0RmlsZUV4cGxvcmVyKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc1NvcnRGaWxlRXhwbG9yZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyLmZpbGVfZXhwbG9yZXIuc29ydCgpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUoJ1NvcnQgRm9sZGVyIEZpcnN0JylcclxuXHRcdFx0XHQuc2V0RGVzYygnU29ydCBGaWxlIEV4cGxvcmVyIEZvbGRlciBGaXJzdCcpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc0ZvbGRlckZpcnN0KVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc0ZvbGRlckZpcnN0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlci5maWxlX2V4cGxvcmVyLnNvcnQoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUHJldkNoYWluJylcclxuXHRcdFx0LnNldERlc2MoJ051bWJlciBvZiBQcmV2IE5vdGVzIHRvIHNob3c/JylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLlByZXZDaGFpbilcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5QcmV2Q2hhaW4gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ05leHRDaGFpbicpXHJcblx0XHRcdC5zZXREZXNjKCdOdW1iZXIgb2YgTmV4dCBOb3RlcyB0byBzaG93PycpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5OZXh0Q2hhaW4pXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuTmV4dENoYWluID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbCkgIFxyXG5cdFx0XHRcdC5zZXROYW1lKCdyZWZyZXNoRGF0YVZpZXcnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdSZWZyZXNoIERhdGF2aWV3IHdoaWxlIG9wZW4gbmV3IGZpbGU/JylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlZnJlc2hEYXRhVmlldylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVmcmVzaERhdGFWaWV3ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHQpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUoJ3JlZnJlc2hUYXNrcycpXHJcblx0XHRcdFx0LnNldERlc2MoJ1JlZnJlc2ggVGFza3Mgd2hpbGUgb3BlbiBuZXcgZmlsZT8nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVmcmVzaFRhc2tzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWZyZXNoVGFza3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBcclxuXHRBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBcclxuXHRQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsXHJcblx0VEZpbGUsVEZvbGRlclxyXG59IGZyb20gJ29ic2lkaWFuJztcclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIE5DRWRpdG9ye1xyXG5cdGFwcDpBcHA7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDpBcHApe1xyXG5cdFx0dGhpcy5hcHAgPSBhcHA7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzZXRfZnJvbnRtYXR0ZXIodGZpbGU6VEZpbGUsa2V5OnN0cmluZyx2YWx1ZTphbnkpe1xyXG5cdFx0bGV0IHByZXYgPSB0aGlzLmdldF9mcm9udG1hdHRlcih0ZmlsZSxrZXkpO1xyXG5cdFx0aWYocHJldj09PXZhbHVlKXtyZXR1cm47fVxyXG5cclxuXHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcih0ZmlsZSxmbSA9PntcclxuXHRcdFx0Y29uc29sZS5sb2coYCR7dGZpbGUuYmFzZW5hbWV9LS0tJHtrZXl9LS0tJHt2YWx1ZX1gKTtcclxuXHRcdFx0Zm1ba2V5XSA9IHZhbHVlO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRnZXRfZnJvbnRtYXR0ZXIodGZpbGU6VEZpbGUsa2V5OmFueSl7XHJcblx0XHRsZXQgbWV0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRmaWxlKTtcclxuXHRcdGlmKG1ldGE/LmZyb250bWF0dGVyKXtcclxuXHRcdFx0cmV0dXJuIG1ldGEuZnJvbnRtYXR0ZXJba2V5XTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJlZ2V4cF9saW5rKHRmaWxlOlRGaWxlLG1vZGU6c3RyaW5nKXtcclxuXHRcdC8vW1tub3RlfHxhbGlhc11dXHJcblx0XHRpZihtb2RlPT09J2xpbmsnKXtcclxuXHRcdFx0cmV0dXJuIG5ldyBSZWdFeHAoYFxcXFxbXFxcXFske3RmaWxlLmJhc2VuYW1lfVxcXFx8Py4qXFxcXF1cXFxcXWAsJ2cnKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly9wYXJhZ3JhcGhcclxuXHRcdGlmKG1vZGU9PT0ncGFyYScpe1xyXG5cdFx0XHRyZXR1cm4gbmV3IFJlZ0V4cChgLipcXFxcW1xcXFxbJHt0ZmlsZS5iYXNlbmFtZX1cXFxcfD8uKlxcXFxdXFxcXF0uKmAsJ2cnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHJlcGxhY2UodGZpbGU6VEZpbGUscmVnZXg6YW55LHRhcmdldDpzdHJpbmcpe1xyXG5cdFx0aWYodHlwZW9mIHJlZ2V4ID09PSAnc3RyaW5nJyl7XHJcblx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LnByb2Nlc3ModGZpbGUsKGRhdGEpPT57XHJcblx0XHRcdFx0aWYoZGF0YS5pbmRleE9mKHJlZ2V4KT4tMSl7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnUmVwbGFjZTogJyx0ZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcdHJldHVybiBkYXRhLnJlcGxhY2UocmVnZXgsIHRhcmdldCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0XHR9KVxyXG5cdFx0fWVsc2UgaWYocmVnZXggaW5zdGFuY2VvZiBSZWdFeHApe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5wcm9jZXNzKHRmaWxlLChkYXRhKT0+e1xyXG5cdFx0XHRcdGlmKGRhdGEubWF0Y2gocmVnZXgpKXtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdSZXBsYWNlOiAnLHRmaWxlLnBhdGgpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGRhdGEucmVwbGFjZShyZWdleCwgdGFyZ2V0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGRhdGE7XHJcblx0XHRcdH0pXHJcblx0XHR9XHJcblx0fVxyXG59IiwgIlxyXG5pbXBvcnQgeyBcclxuXHRBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBcclxuXHRQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsXHJcblx0VEFic3RyYWN0RmlsZSxcclxuXHRURmlsZSxURm9sZGVyXHJcbn0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IHtOb3RlQ2hhaW5QbHVnaW59IGZyb20gXCIuLi9tYWluXCI7XHJcbmltcG9ydCB7TkNFZGl0b3J9IGZyb20gJy4vTkNFZGl0b3InO1xyXG5pbXBvcnQge2dldF90cF9mdW5jfSBmcm9tICcuL3V0aWxzJ1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBOb3RlQ2hhaW57XHJcblx0cGx1Z2luOk5vdGVDaGFpblBsdWdpbjtcclxuXHRhcHA6QXBwO1xyXG5cdHByZXY6c3RyaW5nO1xyXG5cdG5leHQ6c3RyaW5nO1xyXG5cdGVkaXRvcjpOQ0VkaXRvcjtcclxuXHRjaGlsZHJlbjp7fTtcclxuXHJcblx0Y29uc3RydWN0b3IocGx1Z2luOk5vdGVDaGFpblBsdWdpbixlZGl0b3I6TkNFZGl0b3IscHJldj1cIlByZXZOb3RlXCIsbmV4dD1cIk5leHROb3RlXCIpIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xyXG5cdFx0dGhpcy5lZGl0b3IgPSBuZXcgTkNFZGl0b3IodGhpcy5hcHApO1xyXG5cdFx0XHJcblx0XHR0aGlzLnByZXYgPSBwcmV2O1xyXG5cdFx0dGhpcy5uZXh0ID0gbmV4dDtcclxuXHRcdFxyXG5cdFx0dGhpcy5vYiA9IHJlcXVpcmUoJ29ic2lkaWFuJyk7XHJcblx0XHR0aGlzLmFwcC5uYyA9IHRoaXMucGx1Z2luO1xyXG5cdFx0dGhpcy5pbml0X2NoaWxkcmVuKCk7XHJcblx0fVxyXG4gICAgXHJcblx0aW5pdF9jaGlsZHJlbigpe1xyXG5cdFx0dGhpcy5jaGlsZHJlbiA9IHt9O1xyXG5cdFx0Zm9yKGxldCBmIG9mIHRoaXMuZ2V0X2FsbF9mb2xkZXJzKCkpe1xyXG5cdFx0XHR0aGlzLmNoaWxkcmVuW2YucGF0aF0gPSB0aGlzLnNvcnRfdGZpbGVzX2J5X2NoYWluKGYuY2hpbGRyZW4pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0IGZpbmRfdGZpbGUoKXtcclxuXHRcdHJldHVybiBnZXRfdHBfZnVuYyh0aGlzLmFwcCwndHAuZmlsZS5maW5kX3RmaWxlJyk7XHJcblx0fVxyXG5cclxuXHRnZXQgc3VnZ2VzdGVyKCl7XHJcblx0XHRyZXR1cm4gZ2V0X3RwX2Z1bmModGhpcy5hcHAsJ3RwLnN5c3RlbS5zdWdnZXN0ZXInKTtcclxuXHR9XHJcblxyXG5cdGdldF9hbGxfZm9sZGVycyhzb3J0X21vZGU9Jycpe1xyXG5cdFx0cmV0dXJuIHRoaXMuYXBwLnZhdWx0LmdldEFsbEZvbGRlcnMoKTtcclxuXHR9XHJcblxyXG5cdGdldF9hbGxfdGZpbGVzKHNvcnRfbW9kZT0nJyl7XHJcblx0XHRsZXQgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XHJcblx0XHRpZighKHNvcnRfbW9kZT09PScnKSl7XHJcblx0XHRcdHRoaXMuc29ydF90ZmlsZXMoZmlsZXMsc29ydF9tb2RlPXNvcnRfbW9kZSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmlsZXM7XHJcblx0fVxyXG5cdFxyXG5cdHNvcnRfZm9sZGVyc19ieV9tdGltZShmb2xkZXJzOkFycmF5PFRGb2xkZXI+LHJldmVyc2U9dHJ1ZSl7XHJcblx0XHRmdW5jdGlvbiB1ZnVuYyhmOlRGb2xkZXIpe1xyXG5cdFx0XHRyZXR1cm4gTWF0aC5tYXgoXHJcblx0XHRcdFx0Li4uZi5jaGlsZHJlbi5maWx0ZXIoKGY6VEZpbGUpPT5mLmJhc2VuYW1lKS5tYXAoKGY6VEZpbGUpPT5mLnN0YXRcclxuXHRcdFx0XHQubXRpbWUpXHJcblx0XHRcdClcclxuXHRcdH1cclxuXHRcdGxldCByZXMgPSBmb2xkZXJzLnNvcnQoKGEsYik9PnVmdW5jKGEpLXVmdW5jKGIpKTtcclxuXHRcdGlmKHJldmVyc2Upe1xyXG5cdFx0XHRyZXMgPSByZXMucmV2ZXJzZSgpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJlcztcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNtZF9tb3ZlX2ZpbGVfdG9fYW5vdGhlcl9mb2xkZXIodGZpbGU9dGhpcy5jdXJyZW50X25vdGUpe1xyXG5cdFx0aWYodGZpbGU9PW51bGwpe3JldHVybjt9XHJcblxyXG5cdFx0bGV0IGZvbGRlcnMgPSB0aGlzLmdldF9hbGxfZm9sZGVycygpO1xyXG5cdFx0Zm9sZGVycyA9IHRoaXMuc29ydF9mb2xkZXJzX2J5X210aW1lKGZvbGRlcnNcclxuXHRcdCkuZmlsdGVyKGY9PmYhPXRmaWxlLnBhcmVudCk7XHJcblxyXG5cdFx0aWYodGZpbGUuZXh0ZW5zaW9uPT09J21kJyl7XHJcblx0XHRcdGZvbGRlcnMgPSBmb2xkZXJzLmZpbHRlcigoZjpURmlsZSk9PnRoaXMuZmlsdGVyX3VzZXJfaWdub3JlKGYpKTtcclxuXHRcdH1cclxuXHRcdHRyeSB7XHJcblx0XHRcdGxldCBmb2xkZXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcigoZjpURmlsZSk9PmYucGF0aCxmb2xkZXJzKTtcclxuXHRcdFx0Ly8gXHU3OUZCXHU1MkE4XHU3QjE0XHU4QkIwXHJcblx0XHRcdGxldCBkc3QgPSBmb2xkZXIucGF0aCtcIi9cIit0ZmlsZS5iYXNlbmFtZStcIi5cIit0ZmlsZS5leHRlbnNpb247XHJcblx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUodGZpbGUsZHN0KTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRmaWx0ZXJfdXNlcl9pZ25vcmUobm90ZTpURmlsZSl7XHJcblx0XHRpZighKHRoaXMuYXBwLnZhdWx0LmNvbmZpZy5hdHRhY2htZW50Rm9sZGVyUGF0aD09PScuLycpKXtcclxuXHRcdFx0aWYobm90ZS5wYXRoLnN0YXJ0c1dpdGgoXHJcblx0XHRcdFx0dGhpcy5hcHAudmF1bHQuY29uZmlnLmF0dGFjaG1lbnRGb2xkZXJQYXRoKVxyXG5cdFx0XHQpe1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYodGhpcy5hcHAudmF1bHQuY29uZmlnLnVzZXJJZ25vcmVGaWx0ZXJzKXtcclxuXHRcdFx0Zm9yKGxldCB4IG9mIHRoaXMuYXBwLnZhdWx0LmNvbmZpZy51c2VySWdub3JlRmlsdGVycyl7XHJcblx0XHRcdFx0aWYobm90ZS5wYXRoLnN0YXJ0c1dpdGgoeCkpe1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzdWdndXN0ZXJfbm90ZSgpe1xyXG5cdFx0Ly8gXHU0RUNFXHU1RTkzXHU0RTJEXHU5MDA5XHU2MkU5XHU0RTAwXHU0RTJBXHU3QjE0XHU4QkIwXHJcblx0XHRsZXQgbm90ZXMgPSB0aGlzLnNvcnRfdGZpbGVzKFxyXG5cdFx0XHR0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLFxyXG5cdFx0XHRbJ210aW1lJywneCddXHJcblx0XHQpLmZpbHRlcigoZjpURmlsZSk9PnRoaXMuZmlsdGVyX3VzZXJfaWdub3JlKGYpKTtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGxldCBub3RlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoKGY6VEZpbGUpPT5mLnBhdGgsbm90ZXMpO1xyXG5cdFx0XHRyZXR1cm4gbm90ZTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b3Blbl9ub3RlKHRmaWxlOlRGaWxlLG5ld190YWI9ZmFsc2Upe1xyXG5cdFx0aWYodGZpbGUpe1xyXG5cdFx0XHRpZih0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZi5waW5uZWQgfHwgbmV3X3RhYil7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKHRmaWxlKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmLm9wZW5GaWxlKHRmaWxlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgc3VnZ3VzdGVyX29wZW5fbm90ZSgpe1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0bGV0IG5vdGUgPSBhd2FpdCB0aGlzLnN1Z2d1c3Rlcl9ub3RlKCk7XHJcblx0XHRcdHRoaXMub3Blbl9ub3RlKG5vdGUpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cclxuXHRnZXRfdGZpbGUocGF0aCl7XHJcblx0XHRsZXQgbmFtZSA9IHBhdGguc3BsaXQoJ3wnKVswXS5yZXBsYWNlKCdbWycsJycpLnJlcGxhY2UoJ11dJywnJyk7XHJcblx0XHRyZXR1cm4gdGhpcy5maW5kX3RmaWxlKG5hbWUpO1xyXG5cdH1cclxuXHJcblx0Z2V0IGN1cnJlbnRfbm90ZSgpe1xyXG5cdFx0cmV0dXJuIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0fVxyXG5cclxuXHRnZXRfaW5saW5rcyh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRpZih0ZmlsZT09bnVsbCl7cmV0dXJuIFtdO31cclxuXHJcblx0XHRsZXQgcmVzID0gbmV3IEFycmF5KCk7XHJcblxyXG5cdFx0bGV0IGR2X2FwaSA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwiZGF0YXZpZXdcIik7XHJcblxyXG5cdFx0bGV0IGlubGlua3MgPSBkdl9hcGkuaW5kZXgubGlua3MuaW52TWFwLmdldCh0ZmlsZS5wYXRoKTtcclxuXHRcdGlmKGlubGlua3M9PXVuZGVmaW5lZCl7XHJcblx0XHRcdHJldHVybiBbXTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRyZXR1cm4gQXJyYXkuZnJvbShpbmxpbmtzKS5tYXAoXHJcblx0XHRcdFx0KHBhdGgpPT4odGhpcy5hcHAudmF1bHQuZmlsZU1hcFtwYXRoXSlcclxuXHRcdFx0KS5maWx0ZXIoXHJcblx0XHRcdFx0KGl0ZW0pPT4oaXRlbSlcclxuXHRcdFx0KVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0X291dGxpbmtzKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdGlmKHRmaWxlPT1udWxsKXtyZXR1cm4gW107fVxyXG5cclxuXHRcdGxldCByZXMgPSBuZXcgQXJyYXkoKTtcclxuXHRcdGxldCBkdl9hcGkgPSB0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbihcImRhdGF2aWV3XCIpO1xyXG5cdFx0bGV0IGlubGlua3MgPSBkdl9hcGkuaW5kZXgubGlua3MubWFwLmdldCh0ZmlsZS5wYXRoKTtcclxuXHRcdGlmKGlubGlua3M9PXVuZGVmaW5lZCl7XHJcblx0XHRcdHJldHVybiBbXTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRyZXR1cm4gQXJyYXkuZnJvbShpbmxpbmtzKS5tYXAoXHJcblx0XHRcdFx0KHBhdGgpPT4odGhpcy5hcHAudmF1bHQuZmlsZU1hcFtwYXRoXSlcclxuXHRcdFx0KS5maWx0ZXIoXHJcblx0XHRcdFx0KGl0ZW0pPT4oaXRlbSlcclxuXHRcdFx0KVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0X2xpbmtzKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdGxldCBpbmxpbmtzID0gdGhpcy5nZXRfaW5saW5rcyh0ZmlsZSk7XHJcblx0XHRsZXQgb3V0bGlua3MgPSB0aGlzLmdldF9vdXRsaW5rcyh0ZmlsZSk7XHJcblx0XHRmb3IobGV0IGxpbmsgb2YgaW5saW5rcyl7XHJcblx0XHRcdGlmKCFvdXRsaW5rcy5pbmNsdWRlcyhsaW5rKSl7XHJcblx0XHRcdFx0b3V0bGlua3MucHVzaChsaW5rKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gb3V0bGlua3M7XHJcblx0fVxyXG5cclxuXHRnZXRfYnJvdGhlcnModGZpbGU9dGhpcy5jdXJyZW50X25vdGUpe1xyXG5cdFx0aWYodGZpbGUmJnRmaWxlLnBhcmVudCl7XHJcblx0XHRcdHJldHVybiB0aGlzLmdldF90ZmlsZXNfb2ZfZm9sZGVyKHRmaWxlLnBhcmVudCxmYWxzZSk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIFtdO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRnZXRfdW5jbGVzKHRmaWxlOlRGaWxlKXtcclxuXHRcdGlmKHRmaWxlICYmIHRmaWxlLnBhcmVudCAmJiB0ZmlsZS5wYXJlbnQucGFyZW50KXtcclxuXHRcdFx0bGV0IGZvbGRlciA9IHRmaWxlLnBhcmVudC5wYXJlbnQ7XHJcblx0XHRcdHJldHVybiBmb2xkZXIuY2hpbGRyZW4uZmlsdGVyKFxyXG5cdFx0XHRcdCh4OlRBYnN0cmFjdEZpbGUpPT54IGluc3RhbmNlb2YgVEZpbGVcclxuXHRcdFx0KVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIFtdXHJcblx0fVxyXG5cclxuXHRnZXRfdGZpbGVzX29mX2ZvbGRlcih0Zm9sZGVyOlRGb2xkZXIsd2l0aF9jaGlsZHJlbj1mYWxzZSl7XHJcblx0XHRpZih0Zm9sZGVyPT1udWxsKXtyZXR1cm4gW107fVxyXG5cdFx0bGV0IG5vdGVzID0gW107XHJcblx0XHRmb3IobGV0IGMgb2YgdGZvbGRlci5jaGlsZHJlbil7XHJcblx0XHRcdGlmKGMgaW5zdGFuY2VvZiBURmlsZSAmJiBjLmV4dGVuc2lvbj09PSdtZCcpe1xyXG5cdFx0XHRcdG5vdGVzLnB1c2goYyk7XHJcblx0XHRcdH1lbHNlIGlmKGMgaW5zdGFuY2VvZiBURm9sZGVyICYmIHdpdGhfY2hpbGRyZW4pe1xyXG5cdFx0XHRcdGxldCB0bXAgPSB0aGlzLmdldF90ZmlsZXNfb2ZfZm9sZGVyKGMpO1xyXG5cdFx0XHRcdGZvcihsZXQgeCBvZiB0bXApe1xyXG5cdFx0XHRcdFx0bm90ZXMucHVzaCh4KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBub3RlcztcclxuXHJcblx0fVxyXG5cclxuXHRcclxuXHJcblx0aW5kZXhPZkZvbGRlcih0ZmlsZTpURm9sZGVyLHRmaWxlczpBcnJheTxURmlsZT4pe1xyXG5cdFx0bGV0IGZub3RlID0gdGhpcy5maW5kX3RmaWxlKHRmaWxlLm5hbWUrJy5tZCcpO1xyXG5cdFx0bGV0IG1zZyA9IHRoaXMucGx1Z2luLmVkaXRvci5nZXRfZnJvbnRtYXR0ZXIoXHJcblx0XHRcdGZub3RlLFwiRm9sZGVyUHJldk5vdGVcIlxyXG5cdFx0KTtcclxuXHRcdGlmKCFtc2cpe3JldHVybiAtMTt9XHJcblx0XHRsZXQgaXRlbXMgPSBtc2cuc3BsaXQoXCJdXStcIik7XHJcblx0XHRsZXQgYW5jaG9yID0gdGhpcy5nZXRfdGZpbGUoaXRlbXNbMF0uc2xpY2UoMikpO1xyXG5cdFx0aWYoIWFuY2hvcil7cmV0dXJuIC0xO31cclxuXHRcdGxldCBpZHggPSB0ZmlsZXMuaW5kZXhPZihhbmNob3IpO1xyXG5cdFx0aWYoaXRlbXMubGVuZ3RoPT0yKXtcclxuXHRcdFx0aWR4ID0gaWR4ICsgcGFyc2VGbG9hdChpdGVtc1sxXSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gaWR4O1xyXG5cdH1cclxuXHJcblx0cGFyc2VfaXRlbShpdGVtKXtcclxuXHRcdHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpLnNsaWNlKDEpO1xyXG5cdFx0bGV0IGt3YXJncyA9IHt9XHJcblx0XHRpZihhcmdzLmxlbmd0aD09MSl7XHJcblx0XHRcdGt3YXJncyA9IGFyZ3NbMF07XHJcblx0XHR9XHJcblx0XHRsZXQgc2VxID0ga3dhcmdzWydzZXEnXTtcclxuXHJcblx0XHRpZihzZXEhPW51bGwpe1xyXG5cdFx0XHRyZXR1cm4gYCR7c2VxfSAtPiAke2l0ZW19YDtcclxuXHRcdH1cclxuXHRcdHJldHVybiBpdGVtO1xyXG5cdH1cclxuXHJcblx0dGZpbGVfdG9fc3RyaW5nKHRmaWxlOlRGaWxlKXtcclxuXHRcdGxldCBjdXJyID0gdGhpcy5jdXJyZW50X25vdGU7XHJcblx0XHRsZXQgbXNnID0gJyc7XHJcblx0XHRpZih0ZmlsZS5wYXJlbnQ9PWN1cnIucGFyZW50KXtcclxuXHRcdFx0bXNnID0gdGZpbGUuYmFzZW5hbWU7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bXNnID0gdGZpbGUucGF0aDtcclxuXHRcdH1cclxuXHRcdGlmKHRmaWxlPT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRcdHJldHVybiBgXHVEODNDXHVERkUwICR7bXNnfWBcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRyZXR1cm4gbXNnO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRwYXJzZV9pdGVtcyhpdGVtczpBcnJheTxzdHJpbmd8VEZpbGU+KXtcclxuXHRcdHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpLnNsaWNlKDEpO1xyXG5cdFx0bGV0IGt3YXJncyA9IHt9XHJcblx0XHRpZihhcmdzLmxlbmd0aD09MSl7XHJcblx0XHRcdGt3YXJncyA9IGFyZ3NbMF07XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHJlcyA9IFtdO1xyXG5cdFx0bGV0IGkgPSAwO1xyXG5cdFx0d2hpbGUoaTxpdGVtcy5sZW5ndGgpe1xyXG5cdFx0XHRpZihrd2FyZ3NbJ3NlcSddKXtcclxuXHRcdFx0XHRyZXMucHVzaCh0aGlzLnBhcnNlX2l0ZW0oaXRlbXNbaV0seydzZXEnOmkrMX0pKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0cmVzLnB1c2godGhpcy5wYXJzZV9pdGVtKGl0ZW1zW2ldKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGkrKztcclxuXHRcdH1cclxuXHRcdHJldHVybiByZXM7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzdWdnZXN0ZXJfbm90ZXModGZpbGU9dGhpcy5jdXJyZW50X25vdGUsY3Vycl9maXJzdD10cnVlLHNtb2RlPScnKXtcclxuXHRcdGlmKHRmaWxlKXt0ZmlsZT09dGhpcy5jdXJyZW50X25vdGU7fVxyXG5cdFx0bGV0IGt2ID0gW1x0XHRcdFxyXG5cdFx0XHQnXHU1NDBDXHU3RUE3XHU3QjE0XHU4QkIwJyxcclxuXHRcdFx0J1x1N0IxNFx1OEJCMFx1OTRGRVx1Njc2MScsXHJcblx0XHRcdCdcdTRFMEFcdTdFQTdcdTdCMTRcdThCQjAnLFxyXG5cdFx0XHQnXHU1NDBDXHU3RUE3XHU3QjE0XHU4QkIwK1x1NUI1MFx1NzZFRVx1NUY1NScsXHJcblx0XHRcdCdcdTUxRkFcdTk0RkUrXHU1MTY1XHU5NEZFJyxcclxuXHRcdFx0J1x1NTE2NVx1OTRGRScsXHJcblx0XHRcdCdcdTUxRkFcdTk0RkUnLFxyXG5cdFx0XHQnXHU2MjQwXHU2NzA5XHU3QjE0XHU4QkIwJyxcclxuXHRcdFx0J3JlY2VudC1maWxlcy1vYnNpZGlhbidcclxuXHRcdF1cclxuXHRcdFxyXG5cdFx0aWYoY3Vycl9maXJzdCl7XHJcblx0XHRcdGt2LnVuc2hpZnQoJ1x1NUY1M1x1NTI0RFx1N0IxNFx1OEJCMCcpXHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0a3YucHVzaCgnXHU1RjUzXHU1MjREXHU3QjE0XHU4QkIwJylcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0bGV0IGt2cyA9IFtdXHJcblx0XHRsZXQgaSA9IDE7XHJcblx0XHRmb3IobGV0IHggb2Yga3Ype1xyXG5cdFx0XHRrdnMucHVzaChgJHtpKyt9ICR7eH1gKTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgbW9kZSA9ICcnO1xyXG5cdFx0aWYoa3YuY29udGFpbnMoc21vZGUpKXtcclxuXHRcdFx0bW9kZSA9IHNtb2RlO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdG1vZGUgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihrdnMsa3YpO1xyXG5cdFx0fVxyXG5cdFx0aWYobW9kZT09PSdcdTVGNTNcdTUyNERcdTdCMTRcdThCQjAnKXtcclxuXHRcdFx0cmV0dXJuIFt0ZmlsZV07XHJcblx0XHR9ZWxzZSBpZihtb2RlPT09J1x1NTQwQ1x1N0VBN1x1N0IxNFx1OEJCMCcpe1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRfYnJvdGhlcnModGZpbGUpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdcdTU0MENcdTdFQTdcdTdCMTRcdThCQjArXHU1QjUwXHU3NkVFXHU1RjU1Jyl7XHJcblx0XHRcdHJldHVybiB0aGlzLmdldF90ZmlsZXNfb2ZfZm9sZGVyKHRmaWxlPy5wYXJlbnQsdHJ1ZSk7XHJcblx0XHR9ZWxzZSBpZihtb2RlPT09J1x1NTFGQVx1OTRGRStcdTUxNjVcdTk0RkUnKXtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0X2xpbmtzKHRmaWxlKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0nXHU1MTY1XHU5NEZFJyl7XHJcblx0XHRcdHJldHVybiB0aGlzLmdldF9pbmxpbmtzKHRmaWxlKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0nXHU1MUZBXHU5NEZFJyl7XHJcblx0XHRcdHJldHVybiB0aGlzLmdldF9vdXRsaW5rcyh0ZmlsZSk7XHJcblx0XHR9ZWxzZSBpZihtb2RlPT09J1x1NjI0MFx1NjcwOVx1N0IxNFx1OEJCMCcpe1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRfYWxsX3RmaWxlcygpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdyZWNlbnQtZmlsZXMtb2JzaWRpYW4nKXtcclxuXHRcdFx0bGV0IHIgPSB0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbihcInJlY2VudC1maWxlcy1vYnNpZGlhblwiKTtcclxuXHRcdFx0aWYoIXIpe3JldHVybiBbXTt9XHJcblx0XHRcdHJldHVybiBPYmplY3QudmFsdWVzKFxyXG5cdFx0XHRcdHIuZGF0YS5yZWNlbnRGaWxlcykubWFwKGY9PnRoaXMuYXBwLnZhdWx0LmZpbGVNYXBbZi5wYXRoXVxyXG5cdFx0XHQpLmZpbHRlcihmPT5mKTtcclxuXHRcdH1lbHNlIGlmKG1vZGU9PT0nXHU0RTBBXHU3RUE3XHU3QjE0XHU4QkIwJyl7XHJcblx0XHRcdHJldHVybiB0aGlzLmdldF91bmNsZXModGZpbGUpO1xyXG5cdFx0fWVsc2UgaWYobW9kZT09PSdcdTdCMTRcdThCQjBcdTk0RkVcdTY3NjEnKXtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0X2NoYWluKFxyXG5cdFx0XHRcdHRmaWxlLFxyXG5cdFx0XHRcdE51bWJlcih0aGlzLnBsdWdpbi5zZXR0aW5ncy5QcmV2Q2hhaW4pLFxyXG5cdFx0XHRcdE51bWJlcih0aGlzLnBsdWdpbi5zZXR0aW5ncy5OZXh0Q2hhaW4pXHJcblx0XHRcdCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIFtdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdC8vIENoYWluXHJcblx0Z2V0X3ByZXZfbm90ZSh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRpZighdGZpbGUpe3JldHVybjt9XHJcblx0XHRpZih0ZmlsZS5kZWxldGVkKXtcclxuXHRcdFx0bGV0IHRmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdFx0dGZpbGVzID0gdGZpbGVzLmZpbHRlcihmPT5gW1ske3RmaWxlLmJhc2VuYW1lfV1dYD09PXRoaXMuZWRpdG9yLmdldF9mcm9udG1hdHRlcihmLHRoaXMubmV4dCkpO1xyXG5cdFx0XHRpZih0ZmlsZXMubGVuZ3RoPjApe1xyXG5cdFx0XHRcdHJldHVybiB0ZmlsZVswXTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH1lbHNle1xyXG5cdFx0XHRsZXQgbmFtZSA9IHRoaXMuZWRpdG9yLmdldF9mcm9udG1hdHRlcih0ZmlsZSx0aGlzLnByZXYpO1xyXG5cdFx0XHRpZighbmFtZSl7cmV0dXJuIG51bGw7fVxyXG5cclxuXHRcdFx0bGV0IG5vdGUgPSB0aGlzLmdldF90ZmlsZShuYW1lKTtcclxuXHRcdFx0cmV0dXJuIG5vdGU/bm90ZTpudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b3Blbl9wcmV2X25vdGVzKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdGxldCBub3RlID0gdGhpcy5nZXRfcHJldl9ub3RlKHRmaWxlKTtcclxuXHRcdHRoaXMub3Blbl9ub3RlKG5vdGUpO1xyXG5cdH1cclxuXHJcblx0Z2V0X25leHRfbm90ZSh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRpZih0ZmlsZS5kZWxldGVkKXtcclxuXHRcdFx0bGV0IHRmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdFx0dGZpbGVzID0gdGZpbGVzLmZpbHRlcihmPT5gW1ske3RmaWxlLmJhc2VuYW1lfV1dYD09PXRoaXMuZWRpdG9yLmdldF9mcm9udG1hdHRlcihmLHRoaXMucHJldikpO1xyXG5cdFx0XHRpZih0ZmlsZXMubGVuZ3RoPjApe1xyXG5cdFx0XHRcdHJldHVybiB0ZmlsZXNbMF07XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0bGV0IG5hbWUgPSB0aGlzLmVkaXRvci5nZXRfZnJvbnRtYXR0ZXIodGZpbGUsdGhpcy5uZXh0KTtcclxuXHRcdFx0aWYoIW5hbWUpe3JldHVybiBudWxsO31cclxuXHJcblx0XHRcdGxldCBub3RlID0gdGhpcy5nZXRfdGZpbGUobmFtZSk7XHJcblx0XHRcdHJldHVybiBub3RlP25vdGU6bnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG9wZW5fbmV4dF9ub3Rlcyh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSl7XHJcblx0XHRsZXQgbm90ZSA9IHRoaXMuZ2V0X25leHRfbm90ZSh0ZmlsZSk7XHJcblx0XHR0aGlzLm9wZW5fbm90ZShub3RlKTtcclxuXHR9XHJcblxyXG5cdGdldF9jaGFpbih0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSxwcmV2PTEwLG5leHQ9MTAsd2l0aF9zZWxmPXRydWUpe1xyXG5cdFx0aWYodGZpbGU9PW51bGwpe3JldHVybiBbXTt9XHJcblx0XHRcclxuXHRcdGxldCByZXMgPSBuZXcgQXJyYXkoKTtcclxuXHRcdGlmKHdpdGhfc2VsZil7XHJcblx0XHRcdHJlcy5wdXNoKHRmaWxlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0bGV0IHRtcCA9IHRmaWxlO1xyXG5cdFx0Zm9yKGxldCBpPXByZXY7aSE9MDtpLS0pe1x0XHJcblx0XHRcdGxldCBub3RlID0gdGhpcy5nZXRfcHJldl9ub3RlKHRtcCk7XHJcblx0XHRcdGlmKCFub3RlKXtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fWVsc2UgaWYocmVzLmluY2x1ZGVzKG5vdGUpKXtcclxuXHRcdFx0XHQvLyBcdTZCQ0ZcdTZCMjFcdTgxRUFcdTUyQThcdTUyMjBcdTk2NjRcdTVGQUFcdTczQUZcdTk0RkVcdTYzQTVcclxuXHRcdFx0XHR0aGlzLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIobm90ZSx0aGlzLm5leHQsXCJcIik7XHJcblx0XHRcdFx0dGhpcy5lZGl0b3Iuc2V0X2Zyb250bWF0dGVyKHRtcCx0aGlzLnByZXYsXCJcIik7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHJlcy51bnNoaWZ0KG5vdGUpO1xyXG5cdFx0XHRcdHRtcCA9IG5vdGU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcclxuXHRcdHRtcCA9IHRmaWxlO1xyXG5cdFx0Zm9yKGxldCBpPW5leHQ7aSE9MDtpLS0pe1xyXG5cdFx0XHRsZXQgbm90ZSA9IHRoaXMuZ2V0X25leHRfbm90ZSh0bXApO1xyXG5cdFx0XHRpZighbm90ZSl7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1lbHNlIGlmKHJlcy5pbmNsdWRlcyhub3RlKSl7XHJcblx0XHRcdFx0Ly8gXHU2QkNGXHU2QjIxXHU4MUVBXHU1MkE4XHU1MjIwXHU5NjY0XHU1RkFBXHU3M0FGXHU5NEZFXHU2M0E1XHJcblx0XHRcdFx0dGhpcy5lZGl0b3Iuc2V0X2Zyb250bWF0dGVyKG5vdGUsdGhpcy5wcmV2LFwiXCIpO1xyXG5cdFx0XHRcdHRoaXMuZWRpdG9yLnNldF9mcm9udG1hdHRlcih0bXAsdGhpcy5uZXh0LFwiXCIpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRyZXMucHVzaChub3RlKTtcclxuXHRcdFx0XHR0bXAgPSBub3RlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzO1xyXG5cdH1cclxuXHJcblx0Z2V0X2ZpcnN0X25vdGUodGZpbGU9dGhpcy5jdXJyZW50X25vdGUpe1xyXG5cdFx0bGV0IG5vdGVzID0gdGhpcy5nZXRfY2hhaW4odGZpbGUsLTEsMCxmYWxzZSk7XHJcblx0XHRpZihub3Rlcy5sZW5ndGg+MCl7XHJcblx0XHRcdHJldHVybiBub3Rlc1swXTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGdldF9sYXN0X25vdGUodGZpbGU9dGhpcy5jdXJyZW50X25vdGUpe1xyXG5cdFx0bGV0IG5vdGVzID0gdGhpcy5nZXRfY2hhaW4odGZpbGUsMCwtMSxmYWxzZSk7XHJcblx0XHRpZihub3Rlcy5sZW5ndGg+MCl7XHJcblx0XHRcdHJldHVybiBub3Rlc1tub3Rlcy5sZW5ndGgtMV07XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRnZXRfbmVpZ2hib3JzKHRmaWxlPXRoaXMuY3VycmVudF9ub3RlKXtcclxuXHRcdHJldHVybiBbXHJcblx0XHRcdHRoaXMuZ2V0X3ByZXZfbm90ZSh0ZmlsZSksXHJcblx0XHRcdHRoaXMuZ2V0X25leHRfbm90ZSh0ZmlsZSksXHJcblx0XHRdXHJcblx0fVxyXG5cdFxyXG5cdGFzeW5jIGNoYWluX3NldF9wcmV2KHRmaWxlOlRGaWxlLHByZXY6VEZpbGUpe1xyXG5cdFx0aWYodGZpbGU9PW51bGwgfHwgdGZpbGU9PXByZXYpe3JldHVybjt9XHJcblx0XHRpZihwcmV2PT1udWxsICl7XHJcblx0XHRcdGF3YWl0IHRoaXMuZWRpdG9yLnNldF9mcm9udG1hdHRlcihcclxuXHRcdFx0XHR0ZmlsZSx0aGlzLnByZXYsJydcclxuXHRcdFx0KTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRhd2FpdCB0aGlzLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIoXHJcblx0XHRcdFx0dGZpbGUsdGhpcy5wcmV2LGBbWyR7cHJldi5iYXNlbmFtZX1dXWBcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX3NldF9uZXh0KHRmaWxlOlRGaWxlLG5leHQ6VEZpbGUpe1xyXG5cdFx0aWYodGZpbGU9PW51bGwgfHwgdGZpbGU9PW5leHQpe3JldHVybjt9XHJcblx0XHRpZihuZXh0PT1udWxsICl7XHJcblx0XHRcdGF3YWl0IHRoaXMuZWRpdG9yLnNldF9mcm9udG1hdHRlcihcclxuXHRcdFx0XHR0ZmlsZSx0aGlzLm5leHQsJydcclxuXHRcdFx0KTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRhd2FpdCB0aGlzLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIoXHJcblx0XHRcdFx0dGZpbGUsdGhpcy5uZXh0LGBbWyR7bmV4dC5iYXNlbmFtZX1dXWBcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX3NldF9wcmV2X25leHQocHJldjpURmlsZSxuZXh0OlRGaWxlKXtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X3ByZXYobmV4dCxwcmV2KTtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X25leHQocHJldixuZXh0KTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX2NvbmNhdF90ZmlsZXModGZpbGVzOkFycmF5PFRGaWxlPil7XHJcblx0XHQvLyBcdTZFMDVcdTk2NjRcdTgxRUFcdTk1RURcdTczQUZcclxuXHRcdGxldCBwcmV2ID0gdGhpcy5nZXRfcHJldl9ub3RlKHRmaWxlc1swXSk7XHJcblx0XHRpZih0ZmlsZXMuY29udGFpbnMocHJldikpe1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNoYWluX3NldF9wcmV2KHRmaWxlc1swXSxudWxsKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBcdTZFMDVcdTk2NjRcdTgxRUFcdTk1RURcdTczQUZcclxuXHRcdGxldCBuZXh0ID0gdGhpcy5nZXRfbmV4dF9ub3RlKHRmaWxlc1t0ZmlsZXMubGVuZ3RoLTFdKTtcclxuXHRcdGlmKHRmaWxlcy5jb250YWlucyhuZXh0KSl7XHJcblx0XHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X25leHQodGZpbGVzW3RmaWxlcy5sZW5ndGgtMV0sbnVsbCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZvcihsZXQgaT0wO2k8dGZpbGVzLmxlbmd0aC0xO2krKyl7XHJcblx0XHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X3ByZXZfbmV4dCh0ZmlsZXNbaV0sdGZpbGVzW2krMV0pXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBjaGFpbl9wb3Bfbm9kZSh0ZmlsZTpURmlsZSl7XHJcblx0XHRsZXQgbm90ZXMgPSB0aGlzLmdldF9uZWlnaGJvcnModGZpbGUpO1xyXG5cdFx0YXdhaXQgdGhpcy5jaGFpbl9zZXRfcHJldl9uZXh0KG5vdGVzWzBdLG5vdGVzWzFdKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX2luc2VydF9ub2RlX2FzX2hlYWQodGZpbGU6VEZpbGUsYW5jaG9yOlRGaWxlKXtcclxuXHRcdGxldCBoZWFkID0gdGhpcy5nZXRfZmlyc3Rfbm90ZShhbmNob3IpO1xyXG5cdFx0YXdhaXQgdGhpcy5jaGFpbl9zZXRfcHJldl9uZXh0KHRmaWxlLGhlYWQpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgY2hhaW5faW5zZXJ0X25vZGVfYXNfdGFpbCh0ZmlsZTpURmlsZSxhbmNob3I6VEZpbGUpe1xyXG5cdFx0bGV0IHRhaWwgPSB0aGlzLmdldF9sYXN0X25vdGUoYW5jaG9yKTtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fc2V0X3ByZXZfbmV4dCh0YWlsLHRmaWxlKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX2luc2VydF9ub2RlX2FmdGVyKHRmaWxlOlRGaWxlLGFuY2hvcjpURmlsZSl7XHJcblx0XHRhd2FpdCB0aGlzLmNoYWluX3BvcF9ub2RlKHRmaWxlKTtcclxuXHRcdGxldCBuZXh0ID0gdGhpcy5nZXRfbmV4dF9ub3RlKGFuY2hvcik7XHJcblx0XHRhd2FpdCB0aGlzLmNoYWluX2NvbmNhdF90ZmlsZXMoW2FuY2hvcix0ZmlsZSxuZXh0XSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBjaGFpbl9pbnNlcnRfbm9kZV9iZWZvcmUodGZpbGU6VEZpbGUsYW5jaG9yOlRGaWxlKXtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fcG9wX25vZGUodGZpbGUpO1xyXG5cdFx0bGV0IHByZXYgPSB0aGlzLmdldF9wcmV2X25vdGUoYW5jaG9yKTtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fY29uY2F0X3RmaWxlcyhbcHJldix0ZmlsZSxhbmNob3JdKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGNoYWluX2luc2VydF9mb2xkZXJfYWZ0ZXIodGZpbGU6VEZpbGUsYW5jaG9yOlRGaWxlKXtcclxuXHRcdGlmKCF0ZmlsZS5wYXJlbnQgfHwgdGZpbGUucGFyZW50LnBhcmVudCE9YW5jaG9yLnBhcmVudCl7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGxldCBub3RlID0gdGhpcy5nZXRfdGZpbGUodGZpbGUucGFyZW50Lm5hbWUpO1xyXG5cdFx0aWYoIW5vdGUpe1xyXG5cdFx0XHRjb25zb2xlLmxvZygnXHU5NzAwXHU4OTgxXHU4OTgxXHU1MTQ4XHU1MjFCXHU1RUZBXHU1NDBDXHU1NDBEXHU3QjE0XHU4QkIwJyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLmVkaXRvci5zZXRfZnJvbnRtYXR0ZXIoXHJcblx0XHRcdG5vdGUsXCJGb2xkZXJQcmV2Tm90ZVwiLGBbWyR7YW5jaG9yLmJhc2VuYW1lfV1dKzAuNWBcclxuXHRcdClcclxuXHR9XHJcblx0XHJcblx0YXN5bmMgY2hhaW5fc3VnZ2VzdGVyX3RmaWxlcyh0ZmlsZT10aGlzLmN1cnJlbnRfbm90ZSxtb2RlPSdzdWdnZXN0ZXInKXtcclxuXHRcdGxldCBub3RlcyA9IHRoaXMuZ2V0X2Jyb3RoZXJzKHRmaWxlKTtcclxuXHRcdGlmKG5vdGVzLmxlbmd0aD09MCl7cmV0dXJuO31cclxuXHJcblx0XHRsZXQgZmlsZXMgPSBhd2FpdCB0aGlzLnN1Z2dlc3Rlcl9zb3J0KG5vdGVzKTtcclxuXHRcdGF3YWl0IHRoaXMuY2hhaW5fY29uY2F0X3RmaWxlcyhmaWxlcyk7XHJcblx0fVxyXG5cclxuXHRzb3J0X3RmaWxlcyhmaWxlczpBcnJheTxURmlsZT4sZmllbGQ6YW55KXtcclxuXHRcdGlmKHR5cGVvZiBmaWVsZCA9PT0gJ3N0cmluZycpe1xyXG5cdFx0XHRpZihmaWVsZD09PSduYW1lJyl7XHJcblx0XHRcdFx0cmV0dXJuIGZpbGVzLnNvcnQoXHJcblx0XHRcdFx0XHQoYSxiKT0+KGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fWVsc2UgaWYoZmllbGQ9PT0nbXRpbWUnKXtcclxuXHRcdFx0XHRyZXR1cm4gZmlsZXMuc29ydChcclxuXHRcdFx0XHRcdChhLGIpPT4oYS5zdGF0Lm10aW1lLWIuc3RhdC5tdGltZSlcclxuXHRcdFx0XHQpXHJcblx0XHRcdH1lbHNlIGlmKGZpZWxkPT09J2N0aW1lJyl7XHJcblx0XHRcdFx0cmV0dXJuIGZpbGVzLnNvcnQoXHJcblx0XHRcdFx0XHQoYSxiKT0+KGEuc3RhdC5jdGltZS1iLnN0YXQuY3RpbWUpXHJcblx0XHRcdFx0KVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYoZmllbGQ9PT0nY2hhaW4nKXtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5zb3J0X3RmaWxlc19ieV9jaGFpbihmaWxlcyk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGZpbGVzO1xyXG5cdFx0fWVsc2UgaWYodHlwZW9mIGZpZWxkID09PSAnb2JqZWN0Jyl7XHJcblx0XHRcdGlmKGZpZWxkIGluc3RhbmNlb2YgQXJyYXkpe1xyXG5cdFx0XHRcdGxldCBuZmlsZXMgPSB0aGlzLnNvcnRfdGZpbGVzKGZpbGVzLGZpZWxkWzBdKTtcclxuXHRcdFx0XHRpZihmaWVsZC5sZW5ndGg+PTIpe1xyXG5cdFx0XHRcdFx0aWYoZmllbGRbMV09PT0neCcpe1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gbmZpbGVzLnJldmVyc2UoKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gbmZpbGVzO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmlsZXM7XHJcblx0fVxyXG5cdFxyXG5cdHNvcnRfdGZpbGVzX2J5X2NoYWluKHRmaWxlczpBcnJheTxUQWJzdHJhY3RGaWxlPil7XHJcblx0XHRsZXQgbm90ZXMgPSB0ZmlsZXMuZmlsdGVyKGY9PmYgaW5zdGFuY2VvZiBURmlsZSkgYXMgVEZpbGVbXTtcclxuXHRcdGxldCByZXMgPSBbXSBhcyBUQWJzdHJhY3RGaWxlW107XHJcblx0XHR3aGlsZShub3Rlcy5sZW5ndGg+MCl7XHJcblx0XHRcdGxldCBub3RlID0gbm90ZXNbMF07XHJcblx0XHRcdGxldCB4Y2hhaW4gPSB0aGlzLmdldF9jaGFpbihub3RlLC0xLC0xKTtcclxuXHRcdFx0Zm9yKGxldCB4IG9mIHhjaGFpbil7XHJcblx0XHRcdFx0aWYobm90ZXMuY29udGFpbnMoeCkpe1xyXG5cdFx0XHRcdFx0cmVzLnB1c2goeCk7XHJcblx0XHRcdFx0XHRub3Rlcy5yZW1vdmUoeCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRsZXQgZm9sZGVycyA9IHRmaWxlcy5maWx0ZXIoZj0+ZiBpbnN0YW5jZW9mIFRGb2xkZXIpIGFzIFRGb2xkZXJbXTtcclxuXHRcdGlmKGZvbGRlcnMubGVuZ3RoPjApe1xyXG5cdFx0XHRsZXQgaWR4cyA9IGZvbGRlcnMubWFwKFxyXG5cdFx0XHRcdChmOlRGb2xkZXIpPT50aGlzLmluZGV4T2ZGb2xkZXIoZixyZXMgYXMgVEZpbGVbXSlcclxuXHRcdFx0KTtcclxuXHRcdFx0cmVzLnB1c2goLi4uZm9sZGVycyk7XHJcblx0XHRcdGZ1bmN0aW9uIGluZGV4T2YoZjpUQWJzdHJhY3RGaWxlKXtcclxuXHRcdFx0XHRpZihmIGluc3RhbmNlb2YgVEZpbGUpe1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlcy5pbmRleE9mKGYpO1xyXG5cdFx0XHRcdH1lbHNlIGlmKGYgaW5zdGFuY2VvZiBURm9sZGVyKXtcclxuXHRcdFx0XHRcdHJldHVybiBpZHhzW2ZvbGRlcnMuaW5kZXhPZihmKV07XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRyZXR1cm4gLTE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHJlcyA9IHJlcy5zb3J0KChhLGIpPT5pbmRleE9mKGEpLWluZGV4T2YoYikpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJlcztcclxuXHR9XHJcblxyXG5cdHNvcnRfdGZpbGVzX2ZvbGRlcl9maXJzdCh0ZmlsZXM6QXJyYXk8VEZpbGU+KXtcclxuXHRcdGxldCBBID0gdGZpbGVzLmZpbHRlcihmPT5mIGluc3RhbmNlb2YgVEZvbGRlcikuc29ydCgoYSxiKT0+KGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKTtcclxuXHRcdGxldCBCID0gdGZpbGVzLmZpbHRlcihmPT5mIGluc3RhbmNlb2YgVEZpbGUpO1xyXG5cdFx0cmV0dXJuIHRoaXMucGx1Z2luLnV0aWxzLmNvbmNhdF9hcnJheShbQSxCXSk7XHJcblx0fVxyXG5cclxuXHRzb3J0X3RmaWxlc19ieV9maWVsZCh0ZmlsZXM6QXJyYXk8VEZpbGU+LGZpZWxkOnN0cmluZyl7XHJcblx0XHRsZXQgcmVzID0gdGZpbGVzLnNvcnQoXHJcblx0XHRcdChhLGIpPT57XHJcblx0XHRcdFx0bGV0IGF2ID0gdGhpcy5lZGl0b3IuZ2V0X2Zyb250bWF0dGVyKGEsZmllbGQpO1xyXG5cdFx0XHRcdGxldCBidiA9IHRoaXMuZWRpdG9yLmdldF9mcm9udG1hdHRlcihiLGZpZWxkKTtcclxuXHRcdFx0XHRyZXR1cm4gYXYgLSBidjtcclxuXHRcdFx0fVxyXG5cdFx0KVxyXG5cdFx0cmV0dXJuIHJlcztcclxuXHR9XHJcblxyXG5cdGFzeW5jIHN1Z2dlc3Rlcl9zb3J0KHRmaWxlczpBcnJheTxURmlsZT4pe1xyXG5cdFx0aWYoIXRmaWxlcyl7cmV0dXJuIFtdO31cclxuXHRcdGlmKHRmaWxlcy5sZW5ndGg9PTApe3JldHVybiBbXX07XHJcblx0XHRsZXQga3YgPSB7XHJcblx0XHRcdCdjaGFpbic6J2NoYWluJyxcclxuXHRcdFx0J25hbWUnOiduYW1lJyxcclxuXHRcdFx0J2N0aW1lJzonY3RpbWUnLFxyXG5cdFx0XHQnbXRpbWUnOidtdGltZScsXHJcblx0XHRcdCduYW1lIFx1NTAxMlx1NUU4Ric6WyduYW1lJywneCddLFxyXG5cdFx0XHQnY3RpbWUgXHU1MDEyXHU1RThGJzpbJ2N0aW1lJywneCddLFxyXG5cdFx0XHQnbXRpbWUgXHU1MDEyXHU1RThGJzpbJ210aW1lJywneCddLFxyXG5cdFx0fVxyXG5cdFx0bGV0IGZpZWxkID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXHJcblx0XHRcdE9iamVjdC5rZXlzKGt2KSxcclxuXHRcdFx0T2JqZWN0LnZhbHVlcyhrdilcclxuXHRcdCk7XHJcblx0XHRpZihmaWVsZD09bnVsbCl7cmV0dXJuIFtdO31cclxuXHRcdGlmKGZpZWxkPT0nY2hhaW4nKXtcclxuXHRcdFx0dGZpbGVzID0gdGhpcy5zb3J0X3RmaWxlcyh0ZmlsZXMsJ25hbWUnKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzLnNvcnRfdGZpbGVzKHRmaWxlcyxmaWVsZCk7XHJcblx0fVxyXG5cclxuXHR2aWV3X3NvcnRfYnlfY2hhaW4oKXtcclxuXHRcdGxldCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcclxuXHRcdFx0XCJmaWxlLWV4cGxvcmVyXCJcclxuXHRcdClbMF0/LnZpZXc7XHJcblx0XHRpZighdmlldyl7cmV0dXJuO31cclxuXHRcdHZpZXcuc29ydCgpO1xyXG5cdFx0aWYodmlldy5yZWFkeSl7XHJcblx0XHRcdGZvcihsZXQgcGF0aCBpbiB2aWV3LmZpbGVJdGVtcyl7XHJcblx0XHRcdFx0bGV0IGl0ZW0gPSB2aWV3LmZpbGVJdGVtc1twYXRoXTtcclxuXHRcdFx0XHRpZihpdGVtLnZDaGlsZHJlbil7XHJcblx0XHRcdFx0XHRsZXQgZmlsZXMgPSBpdGVtLnZDaGlsZHJlbi5fY2hpbGRyZW4ubWFwKGY9PmYuZmlsZSk7XHJcblx0XHRcdFx0XHRmaWxlcyA9IHRoaXMuc29ydF90ZmlsZXNfYnlfY2hhaW4oZmlsZXMpO1xyXG5cdFx0XHRcdFx0bGV0IGNoaWxkcmVuID0gaXRlbS52Q2hpbGRyZW4uX2NoaWxkcmVuLnNvcnQoXHJcblx0XHRcdFx0XHRcdChhLGIpPT5maWxlcy5pbmRleE9mKGEuZmlsZSktZmlsZXMuaW5kZXhPZihiLmZpbGUpXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0XHRpdGVtLnZDaGlsZHJlbi5zZXRDaGlsZHJlbihjaGlsZHJlbik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHZpZXcudHJlZS5pbmZpbml0eVNjcm9sbC5jb21wdXRlKClcclxuXHRcdH1cclxuXHR9XHJcblxyXG59IiwgImltcG9ydCB7IFxyXG5cdEFwcCxUQWJzdHJhY3RGaWxlLFRGaWxlLFRGb2xkZXIsVmF1bHRcclxufSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQge05vdGVDaGFpblBsdWdpbn0gZnJvbSBcIi4uL21haW5cIjtcclxuaW1wb3J0IHtOb3RlQ2hhaW59IGZyb20gXCIuL05vdGVDaGFpblwiO1xyXG5cclxuXHJcbmxldCBjaGFpbl9zb3J0ID0gZnVuY3Rpb24ob3JnX3NvcnQpIHtcclxuXHRsZXQgcGx1Z2luID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCdub3RlLWNoYWluJyk7XHJcblx0cmV0dXJuIGZ1bmN0aW9uKC4uLmQpe1xyXG5cdFx0aWYocGx1Z2luKXtcclxuXHRcdFx0aWYocGx1Z2luPy5zZXR0aW5ncy5pc1NvcnRGaWxlRXhwbG9yZXIpe1xyXG5cdFx0XHRcdHZhciBlID0gdGhpcy5maWxlXHJcblx0XHRcdFx0LCB0ID0gdGhpcy52aWV3XHJcblx0XHRcdFx0LCBpID0gZS5jaGlsZHJlbi5zbGljZSgpO1xyXG5cdFx0XHRcdGkgPSBpLmZpbHRlcigoeDpUQWJzdHJhY3RGaWxlKT0+eCk7XHJcblx0XHRcdFx0aWYoaS5sZW5ndGg+MCl7XHJcblx0XHRcdFx0XHRsZXQgaXRlbXMgPSBwbHVnaW4uY2hhaW4uY2hpbGRyZW5baVswXS5wYXJlbnQucGF0aF07XHJcblx0XHRcdFx0XHRpZihpdGVtcyl7XHJcblx0XHRcdFx0XHRcdGxldCBhID0gaXRlbXMuZmlsdGVyKCh4OlRBYnN0cmFjdEZpbGUpPT5pLmNvbnRhaW5zKHgpKTtcclxuXHRcdFx0XHRcdFx0bGV0IGIgPSBpdGVtcy5maWx0ZXIoKHg6VEFic3RyYWN0RmlsZSk9PiFpLmNvbnRhaW5zKHgpKTtcclxuXHRcdFx0XHRcdFx0YS5wdXNoKC4uLmIpO1xyXG5cdFx0XHRcdFx0XHRpID0gYTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYocGx1Z2luLnNldHRpbmdzLmlzRm9sZGVyRmlyc3Qpe1xyXG5cdFx0XHRcdFx0aSA9IHBsdWdpbi5jaGFpbi5zb3J0X3RmaWxlc19mb2xkZXJfZmlyc3QoaSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZvciAodmFyIHIgPSBbXSwgbyA9IDAsIGEgPSBpOyBvIDwgYS5sZW5ndGg7IG8rKykge1xyXG5cdFx0XHRcdFx0dmFyIHMgPSBhW29dXHJcblx0XHRcdFx0XHQsIGwgPSB0LmZpbGVJdGVtc1tzLnBhdGhdO1xyXG5cdFx0XHRcdFx0bCAmJiByLnB1c2gobClcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy52Q2hpbGRyZW4uc2V0Q2hpbGRyZW4ocilcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0cmV0dXJuIG9yZ19zb3J0LmNhbGwodGhpcywuLi5kKTtcclxuXHRcdFx0fVxyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHJldHVybiBvcmdfc29ydC5jYWxsKHRoaXMsLi4uZCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5jaGFpbl9zb3J0X3YxID0gZnVuY3Rpb24ob3JnX3NvcnQpIHtcclxuXHRsZXQgcGx1Z2luID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCdub3RlLWNoYWluJyk7XHJcblx0cmV0dXJuIGZ1bmN0aW9uKC4uLmQpe1xyXG5cdFx0aWYocGx1Z2luKXtcclxuXHRcdFx0aWYocGx1Z2luPy5zZXR0aW5ncy5pc1NvcnRGaWxlRXhwbG9yZXIpe1xyXG5cdFx0XHRcdHZhciBlID0gdGhpcy5maWxlXHJcblx0XHRcdFx0LCB0ID0gdGhpcy52aWV3XHJcblx0XHRcdFx0LCBpID0gZS5jaGlsZHJlbi5zbGljZSgpO1xyXG5cdFx0XHRcdGkgPSBpLmZpbHRlcih4PT54KTtcclxuXHRcdFx0XHRpID0gcGx1Z2luLmNoYWluLnNvcnRfdGZpbGVzX2J5X2NoYWluKGkpO1xyXG5cdFx0XHRcdGkgPSBwbHVnaW4uY2hhaW4uc29ydF90ZmlsZXNfZm9sZGVyX2ZpcnN0KGkpO1xyXG5cdFx0XHRcdGZvciAodmFyIHIgPSBbXSwgbyA9IDAsIGEgPSBpOyBvIDwgYS5sZW5ndGg7IG8rKykge1xyXG5cdFx0XHRcdFx0dmFyIHMgPSBhW29dXHJcblx0XHRcdFx0XHQsIGwgPSB0LmZpbGVJdGVtc1tzLnBhdGhdO1xyXG5cdFx0XHRcdFx0bCAmJiByLnB1c2gobClcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy52Q2hpbGRyZW4uc2V0Q2hpbGRyZW4ocilcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0cmV0dXJuIG9yZ19zb3J0LmNhbGwodGhpcywuLi5kKTtcclxuXHRcdFx0fVxyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHJldHVybiBvcmdfc29ydC5jYWxsKHRoaXMsLi4uZCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTkNGaWxlRXhwbG9yZXJ7XHJcblx0cGx1Z2luOk5vdGVDaGFpblBsdWdpbjtcclxuXHRhcHA6QXBwO1xyXG5cdGNoYWluOk5vdGVDaGFpbjtcclxuXHRvcmdfc29ydDpGdW5jdGlvbjtcclxuXHRuZXdfc29ydDpGdW5jdGlvbjtcclxuXHJcblx0Y29uc3RydWN0b3IocGx1Z2luOk5vdGVDaGFpblBsdWdpbil7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuY2hhaW4gPSBwbHVnaW4uY2hhaW47XHJcblx0XHR0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XHJcblx0XHR0aGlzLnJlZ2lzdGVyKCk7XHJcblx0fVxyXG5cclxuXHJcblx0cmVnaXN0ZXIoKXtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpPT57XHJcblx0XHRcdGxldCBmb2xkZXIgPSBuZXcgVEZvbGRlcihWYXVsdCxcIlwiKTtcclxuXHRcdFx0bGV0IGRvbSA9IHRoaXMuZmlsZV9leHBsb3Jlci5jcmVhdGVGb2xkZXJEb20oZm9sZGVyKS5jb25zdHJ1Y3RvcjtcclxuXHRcdFx0dGhpcy5fRm9sZGVyRG9tXyA9IGRvbTtcclxuXHRcdFx0dGhpcy5vcmdfc29ydCA9IGRvbS5wcm90b3R5cGUuc29ydDtcclxuXHRcdFx0dGhpcy5uZXdfc29ydCA9IGNoYWluX3NvcnQodGhpcy5vcmdfc29ydCk7XHJcblx0XHRcdHRoaXMuX0ZvbGRlckRvbV8ucHJvdG90eXBlLnNvcnQgPSB0aGlzLm5ld19zb3J0O1xyXG5cdFx0XHR0aGlzLnNvcnQoKTtcclxuXHRcdH0pXHJcblx0fVxyXG5cclxuXHR1bnJlZ2lzdGVyKCl7XHJcblx0XHRpZih0aGlzLm9yZ19zb3J0KXtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJSZXNldCBGaWxlRXhwbG9yZXIgdG8gb3JpZ2luIHNvcnQgZnVuY3Rpb24uXCIpO1xyXG5cdFx0XHR0aGlzLl9Gb2xkZXJEb21fLnByb3RvdHlwZS5zb3J0ID0gdGhpcy5vcmdfc29ydDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGdldCBmaWxlX2V4cGxvcmVyKCl7XHJcblx0XHRsZXQgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXHJcblx0XHRcdFwiZmlsZS1leHBsb3JlclwiXHJcblx0XHQpWzBdPy52aWV3O1xyXG5cdFx0cmV0dXJuIHZpZXc7XHJcblx0fVxyXG5cdFxyXG5cdGFzeW5jIHNvcnQobnNsZWVwPTApe1xyXG5cdFx0aWYodGhpcy5maWxlX2V4cGxvcmVyPy5zb3J0KXtcclxuXHRcdFx0aWYobnNsZWVwPjApe1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnV0aWxzLnNsZWVwKG5zbGVlcCk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5wbHVnaW4uY2hhaW4uaW5pdF9jaGlsZHJlbigpO1xyXG5cdFx0XHR0aGlzLmZpbGVfZXhwbG9yZXIuc29ydCgpO1xyXG5cdFx0fVx0XHJcblx0fVxyXG59XHJcblxyXG5cclxuXHQiXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLTyxTQUFTLFlBQVlBLE1BQVEsTUFBWTtBQUVoRDtBQUVPLFNBQVMsYUFBYSxPQUFpQjtBQUMxQyxNQUFHLFNBQU8sTUFBSztBQUFDLFdBQU8sQ0FBQztBQUFBLEVBQUU7QUFDMUIsTUFBRyxPQUFPLFVBQVUsVUFBUztBQUFDLFdBQU8sQ0FBQyxLQUFLO0FBQUEsRUFBRTtBQUM3QyxNQUFHLEVBQUUsaUJBQWlCLFFBQU87QUFBQyxXQUFPLENBQUMsS0FBSztBQUFBLEVBQUU7QUFFN0MsTUFBSSxNQUFNLENBQUM7QUFDWCxXQUFRLFFBQVEsT0FBTTtBQUNsQixRQUFHLE9BQU8sU0FBUyxVQUFTO0FBQ3hCLFVBQUksS0FBSyxJQUFJO0FBQUEsSUFDakIsV0FBUyxnQkFBZ0IsT0FBTTtBQUMzQixZQUFNLElBQUksT0FBTyxLQUFLLGFBQWEsSUFBSSxDQUFDO0FBQUEsSUFDNUMsT0FBSztBQUNELFVBQUksS0FBSyxJQUFJO0FBQUEsSUFDakI7QUFBQSxFQUNKO0FBQ0EsU0FBTztBQUNYO0FBRU8sU0FBUyxNQUFNLElBQW9CO0FBQ3RDLFNBQU8sSUFBSSxRQUFRLGFBQVcsV0FBVyxTQUFTLEVBQUUsQ0FBQztBQUN6RDtBQUVBLGVBQXNCLFlBQVksR0FBTSxHQUFNLEdBQU0sSUFBVSxHQUFTO0FBQ25FLE1BQUksSUFBSTtBQUNSLFNBQU0sRUFBRSxDQUFDLEtBQUcsUUFBUSxFQUFFLEVBQUUsQ0FBQyxNQUFJLElBQUc7QUFDNUIsVUFBTSxNQUFNLEVBQUU7QUFDZCxRQUFJLEtBQUc7QUFDUCxRQUFHLElBQUUsR0FBRTtBQUFDO0FBQUEsSUFBTTtBQUFBLEVBQ2xCO0FBQ0EsTUFBRyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBSSxHQUFFO0FBQ2hCLFdBQU87QUFBQSxFQUNYLE9BQUs7QUFDRCxXQUFPO0FBQUEsRUFDWDtBQUNKO0FBRU8sU0FBUyxZQUFZQSxNQUFRLFFBQWU7QUFJbEQsTUFBSSxZQUFZQSxLQUFJLFFBQVE7QUFBQSxJQUMzQjtBQUFBLEVBQ0Q7QUFFQSxNQUFJLFFBQVEsT0FBTyxNQUFNLEdBQUc7QUFDNUIsTUFBRyxNQUFNLENBQUMsRUFBRSxjQUFjLElBQUksS0FBRyxLQUFLLE1BQU0sVUFBUSxHQUFFO0FBQUMsV0FBTztBQUFBLEVBQVU7QUFFeEUsTUFBSSxVQUFVLFVBQVUsVUFBVSxvQkFDakMsbUJBQW1CLGNBQWM7QUFBQSxJQUNoQyxDQUFDLFNBQVksS0FBSyxLQUFLLGNBQWMsTUFBTSxDQUFDLENBQUMsS0FBRztBQUFBLEVBQ2pEO0FBRUQsTUFBRyxRQUFRLFVBQVEsR0FBRTtBQUFDLFdBQU87QUFBQSxFQUFTO0FBRXRDLFNBQU8sUUFBUSxDQUFDLEVBQUUsaUJBQWlCLElBQUksTUFBTSxDQUFDLENBQUM7QUFDaEQ7QUFHTyxTQUFTLGNBQWMsR0FBRyxHQUFHO0FBR2hDLE1BQUksSUFBSSxPQUFPLEtBQUssQ0FBQyxFQUFFLElBQUksT0FBRyxpQkFBaUIsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDMUQsU0FBTyxFQUFFLFdBQVcsSUFBSSxFQUFFLENBQUMsSUFBSSxXQUFXO0FBQ3RDLE1BQUUsUUFBUSxPQUFHLEVBQUUsQ0FBQztBQUFBLEVBQ3BCO0FBQ0o7QUFFQSxTQUFTLGlCQUFpQixXQUFXLE1BQU0sTUFBTTtBQUloRCxNQUFJLFdBQVcsVUFBVSxJQUFJLEdBQ3pCLGdCQUFnQixVQUFVLGVBQWUsSUFBSSxHQUM3QyxhQUFhLEtBQUssUUFBUTtBQUczQixNQUFHLFVBQVM7QUFDUixXQUFPLGVBQWUsWUFBWSxRQUFRO0FBQUEsRUFDOUM7QUFDQSxTQUFPLGVBQWUsR0FBRyxVQUFVO0FBQ25DLFlBQVUsSUFBSSxJQUFJO0FBQ2xCLFNBQU87QUFFVixXQUFTLEtBQUssR0FBRztBQUNWLFFBQUcsZUFBZSxZQUFZLFVBQVUsSUFBSSxNQUFNLEdBQUU7QUFDaEQsUUFBRTtBQUFBLElBQ047QUFDTixXQUFRLFdBQVcsTUFBTSxNQUFNLENBQUM7QUFBQSxFQUNqQztBQUNBLFdBQVMsSUFBSTtBQUNOLFFBQUcsVUFBVSxJQUFJLE1BQU0sR0FBRTtBQUNyQixVQUFHLGVBQWM7QUFDYixrQkFBVSxJQUFJLElBQUk7QUFBQSxNQUN0QixPQUFLO0FBQ0QsZUFBTyxVQUFVLElBQUk7QUFBQSxNQUN6QjtBQUFBLElBQ0o7QUFDQSxRQUFHLGVBQWUsVUFBUztBQUN2QixtQkFBYTtBQUNiLGFBQU8sZUFBZSxHQUFHLFlBQVksUUFBUTtBQUFBLElBQ2pEO0FBQUEsRUFDUDtBQUNEO0FBL0dBO0FBQUE7QUFBQTtBQUFBOzs7QUNBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUMsbUJBSU87OztBQ0lBLElBQU0sV0FBTixNQUFjO0FBQUEsRUFHcEIsWUFBWUMsTUFBUTtBQUNuQixTQUFLLE1BQU1BO0FBQUEsRUFDWjtBQUFBLEVBRUEsTUFBTSxnQkFBZ0IsT0FBWSxLQUFXLE9BQVU7QUFDdEQsUUFBSSxPQUFPLEtBQUssZ0JBQWdCLE9BQU0sR0FBRztBQUN6QyxRQUFHLFNBQU8sT0FBTTtBQUFDO0FBQUEsSUFBTztBQUV4QixVQUFNLEtBQUssSUFBSSxZQUFZLG1CQUFtQixPQUFNLFFBQUs7QUFDeEQsY0FBUSxJQUFJLEdBQUcsTUFBTSxjQUFjLFNBQVMsT0FBTztBQUNuRCxTQUFHLEdBQUcsSUFBSTtBQUFBLElBQ1gsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLGdCQUFnQixPQUFZLEtBQVE7QUFDbkMsUUFBSSxPQUFPLEtBQUssSUFBSSxjQUFjLGFBQWEsS0FBSztBQUNwRCxRQUFHLDZCQUFNLGFBQVk7QUFDcEIsYUFBTyxLQUFLLFlBQVksR0FBRztBQUFBLElBQzVCO0FBQUEsRUFDRDtBQUFBLEVBRUEsWUFBWSxPQUFZLE1BQVk7QUFFbkMsUUFBRyxTQUFPLFFBQU87QUFDaEIsYUFBTyxJQUFJLE9BQU8sU0FBUyxNQUFNLHdCQUF1QixHQUFHO0FBQUEsSUFDNUQ7QUFHQSxRQUFHLFNBQU8sUUFBTztBQUNoQixhQUFPLElBQUksT0FBTyxXQUFXLE1BQU0sMEJBQXlCLEdBQUc7QUFBQSxJQUNoRTtBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQU0sUUFBUSxPQUFZLE9BQVUsUUFBYztBQUNqRCxRQUFHLE9BQU8sVUFBVSxVQUFTO0FBQzVCLFlBQU0sS0FBSyxJQUFJLE1BQU0sUUFBUSxPQUFNLENBQUMsU0FBTztBQUMxQyxZQUFHLEtBQUssUUFBUSxLQUFLLElBQUUsSUFBRztBQUN6QixrQkFBUSxJQUFJLGFBQVksTUFBTSxJQUFJO0FBQ2xDLGlCQUFPLEtBQUssUUFBUSxPQUFPLE1BQU07QUFBQSxRQUNsQztBQUNBLGVBQU87QUFBQSxNQUNSLENBQUM7QUFBQSxJQUNGLFdBQVMsaUJBQWlCLFFBQU87QUFDaEMsWUFBTSxLQUFLLElBQUksTUFBTSxRQUFRLE9BQU0sQ0FBQyxTQUFPO0FBQzFDLFlBQUcsS0FBSyxNQUFNLEtBQUssR0FBRTtBQUNwQixrQkFBUSxJQUFJLGFBQVksTUFBTSxJQUFJO0FBQ2xDLGlCQUFPLEtBQUssUUFBUSxPQUFPLE1BQU07QUFBQSxRQUNsQztBQUNBLGVBQU87QUFBQSxNQUNSLENBQUM7QUFBQSxJQUNGO0FBQUEsRUFDRDtBQUNEOzs7QUM5REEsc0JBS087QUFJUDtBQUdPLElBQU0sWUFBTixNQUFlO0FBQUEsRUFRckIsWUFBWSxRQUF1QixRQUFnQixPQUFLLFlBQVcsT0FBSyxZQUFZO0FBQ25GLFNBQUssU0FBUztBQUNkLFNBQUssTUFBTSxPQUFPO0FBQ2xCLFNBQUssU0FBUyxJQUFJLFNBQVMsS0FBSyxHQUFHO0FBRW5DLFNBQUssT0FBTztBQUNaLFNBQUssT0FBTztBQUVaLFNBQUssS0FBSyxRQUFRLFVBQVU7QUFDNUIsU0FBSyxJQUFJLEtBQUssS0FBSztBQUNuQixTQUFLLGNBQWM7QUFBQSxFQUNwQjtBQUFBLEVBRUEsZ0JBQWU7QUFDZCxTQUFLLFdBQVcsQ0FBQztBQUNqQixhQUFRLEtBQUssS0FBSyxnQkFBZ0IsR0FBRTtBQUNuQyxXQUFLLFNBQVMsRUFBRSxJQUFJLElBQUksS0FBSyxxQkFBcUIsRUFBRSxRQUFRO0FBQUEsSUFDN0Q7QUFBQSxFQUNEO0FBQUEsRUFFQSxJQUFJLGFBQVk7QUFDZixXQUFPLFlBQVksS0FBSyxLQUFJLG9CQUFvQjtBQUFBLEVBQ2pEO0FBQUEsRUFFQSxJQUFJLFlBQVc7QUFDZCxXQUFPLFlBQVksS0FBSyxLQUFJLHFCQUFxQjtBQUFBLEVBQ2xEO0FBQUEsRUFFQSxnQkFBZ0IsWUFBVSxJQUFHO0FBQzVCLFdBQU8sS0FBSyxJQUFJLE1BQU0sY0FBYztBQUFBLEVBQ3JDO0FBQUEsRUFFQSxlQUFlLFlBQVUsSUFBRztBQUMzQixRQUFJLFFBQVEsS0FBSyxJQUFJLE1BQU0saUJBQWlCO0FBQzVDLFFBQUcsRUFBRSxjQUFZLEtBQUk7QUFDcEIsV0FBSyxZQUFZLE9BQU0sWUFBVSxTQUFTO0FBQUEsSUFDM0M7QUFDQSxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEsc0JBQXNCLFNBQXVCLFVBQVEsTUFBSztBQUN6RCxhQUFTLE1BQU0sR0FBVTtBQUN4QixhQUFPLEtBQUs7QUFBQSxRQUNYLEdBQUcsRUFBRSxTQUFTLE9BQU8sQ0FBQ0MsT0FBVUEsR0FBRSxRQUFRLEVBQUUsSUFBSSxDQUFDQSxPQUFVQSxHQUFFLEtBQzVELEtBQUs7QUFBQSxNQUNQO0FBQUEsSUFDRDtBQUNBLFFBQUksTUFBTSxRQUFRLEtBQUssQ0FBQyxHQUFFLE1BQUksTUFBTSxDQUFDLElBQUUsTUFBTSxDQUFDLENBQUM7QUFDL0MsUUFBRyxTQUFRO0FBQ1YsWUFBTSxJQUFJLFFBQVE7QUFBQSxJQUNuQjtBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxNQUFNLGdDQUFnQyxRQUFNLEtBQUssY0FBYTtBQUM3RCxRQUFHLFNBQU8sTUFBSztBQUFDO0FBQUEsSUFBTztBQUV2QixRQUFJLFVBQVUsS0FBSyxnQkFBZ0I7QUFDbkMsY0FBVSxLQUFLO0FBQUEsTUFBc0I7QUFBQSxJQUNyQyxFQUFFLE9BQU8sT0FBRyxLQUFHLE1BQU0sTUFBTTtBQUUzQixRQUFHLE1BQU0sY0FBWSxNQUFLO0FBQ3pCLGdCQUFVLFFBQVEsT0FBTyxDQUFDLE1BQVUsS0FBSyxtQkFBbUIsQ0FBQyxDQUFDO0FBQUEsSUFDL0Q7QUFDQSxRQUFJO0FBQ0gsVUFBSSxTQUFTLE1BQU0sS0FBSyxVQUFVLENBQUMsTUFBVSxFQUFFLE1BQUssT0FBTztBQUUzRCxVQUFJLE1BQU0sT0FBTyxPQUFLLE1BQUksTUFBTSxXQUFTLE1BQUksTUFBTTtBQUNuRCxZQUFNLEtBQUssSUFBSSxZQUFZLFdBQVcsT0FBTSxHQUFHO0FBQUEsSUFDaEQsU0FBUyxPQUFQO0FBQUEsSUFFRjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLG1CQUFtQixNQUFXO0FBQzdCLFFBQUcsRUFBRSxLQUFLLElBQUksTUFBTSxPQUFPLHlCQUF1QixPQUFNO0FBQ3ZELFVBQUcsS0FBSyxLQUFLO0FBQUEsUUFDWixLQUFLLElBQUksTUFBTSxPQUFPO0FBQUEsTUFBb0IsR0FDMUM7QUFDQSxlQUFPO0FBQUEsTUFDUjtBQUFBLElBQ0Q7QUFDQSxRQUFHLEtBQUssSUFBSSxNQUFNLE9BQU8sbUJBQWtCO0FBQzFDLGVBQVEsS0FBSyxLQUFLLElBQUksTUFBTSxPQUFPLG1CQUFrQjtBQUNwRCxZQUFHLEtBQUssS0FBSyxXQUFXLENBQUMsR0FBRTtBQUMxQixpQkFBTztBQUFBLFFBQ1I7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxNQUFNLGlCQUFnQjtBQUVyQixRQUFJLFFBQVEsS0FBSztBQUFBLE1BQ2hCLEtBQUssSUFBSSxNQUFNLFNBQVM7QUFBQSxNQUN4QixDQUFDLFNBQVEsR0FBRztBQUFBLElBQ2IsRUFBRSxPQUFPLENBQUMsTUFBVSxLQUFLLG1CQUFtQixDQUFDLENBQUM7QUFDOUMsUUFBSTtBQUNILFVBQUksT0FBTyxNQUFNLEtBQUssVUFBVSxDQUFDLE1BQVUsRUFBRSxNQUFLLEtBQUs7QUFDdkQsYUFBTztBQUFBLElBQ1IsU0FBUyxPQUFQO0FBQ0QsYUFBTztBQUFBLElBQ1I7QUFBQSxFQUNEO0FBQUEsRUFFQSxVQUFVLE9BQVksVUFBUSxPQUFNO0FBQ25DLFFBQUcsT0FBTTtBQUNSLFVBQUcsS0FBSyxJQUFJLFVBQVUsV0FBVyxVQUFVLFNBQVE7QUFDbEQsZUFBTyxLQUFLLElBQUksVUFBVSxRQUFRLElBQUksRUFBRSxTQUFTLEtBQUs7QUFBQSxNQUN2RCxPQUFLO0FBQ0osZUFBTyxLQUFLLElBQUksVUFBVSxXQUFXLFNBQVMsS0FBSztBQUFBLE1BQ3BEO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQU0sc0JBQXFCO0FBQzFCLFFBQUk7QUFDSCxVQUFJLE9BQU8sTUFBTSxLQUFLLGVBQWU7QUFDckMsV0FBSyxVQUFVLElBQUk7QUFBQSxJQUNwQixTQUFTLE9BQVA7QUFBQSxJQUNGO0FBQUEsRUFDRDtBQUFBLEVBR0EsVUFBVSxNQUFLO0FBQ2QsUUFBSSxPQUFPLEtBQUssTUFBTSxHQUFHLEVBQUUsQ0FBQyxFQUFFLFFBQVEsTUFBSyxFQUFFLEVBQUUsUUFBUSxNQUFLLEVBQUU7QUFDOUQsV0FBTyxLQUFLLFdBQVcsSUFBSTtBQUFBLEVBQzVCO0FBQUEsRUFFQSxJQUFJLGVBQWM7QUFDakIsV0FBTyxLQUFLLElBQUksVUFBVSxjQUFjO0FBQUEsRUFDekM7QUFBQSxFQUVBLFlBQVksUUFBTSxLQUFLLGNBQWE7QUFDbkMsUUFBRyxTQUFPLE1BQUs7QUFBQyxhQUFPLENBQUM7QUFBQSxJQUFFO0FBRTFCLFFBQUksTUFBTSxJQUFJLE1BQU07QUFFcEIsUUFBSSxTQUFTLEtBQUssSUFBSSxRQUFRLFVBQVUsVUFBVTtBQUVsRCxRQUFJLFVBQVUsT0FBTyxNQUFNLE1BQU0sT0FBTyxJQUFJLE1BQU0sSUFBSTtBQUN0RCxRQUFHLFdBQVMsUUFBVTtBQUNyQixhQUFPLENBQUM7QUFBQSxJQUNULE9BQUs7QUFDSixhQUFPLE1BQU0sS0FBSyxPQUFPLEVBQUU7QUFBQSxRQUMxQixDQUFDLFNBQVEsS0FBSyxJQUFJLE1BQU0sUUFBUSxJQUFJO0FBQUEsTUFDckMsRUFBRTtBQUFBLFFBQ0QsQ0FBQyxTQUFRO0FBQUEsTUFDVjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFQSxhQUFhLFFBQU0sS0FBSyxjQUFhO0FBQ3BDLFFBQUcsU0FBTyxNQUFLO0FBQUMsYUFBTyxDQUFDO0FBQUEsSUFBRTtBQUUxQixRQUFJLE1BQU0sSUFBSSxNQUFNO0FBQ3BCLFFBQUksU0FBUyxLQUFLLElBQUksUUFBUSxVQUFVLFVBQVU7QUFDbEQsUUFBSSxVQUFVLE9BQU8sTUFBTSxNQUFNLElBQUksSUFBSSxNQUFNLElBQUk7QUFDbkQsUUFBRyxXQUFTLFFBQVU7QUFDckIsYUFBTyxDQUFDO0FBQUEsSUFDVCxPQUFLO0FBQ0osYUFBTyxNQUFNLEtBQUssT0FBTyxFQUFFO0FBQUEsUUFDMUIsQ0FBQyxTQUFRLEtBQUssSUFBSSxNQUFNLFFBQVEsSUFBSTtBQUFBLE1BQ3JDLEVBQUU7QUFBQSxRQUNELENBQUMsU0FBUTtBQUFBLE1BQ1Y7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBLEVBRUEsVUFBVSxRQUFNLEtBQUssY0FBYTtBQUNqQyxRQUFJLFVBQVUsS0FBSyxZQUFZLEtBQUs7QUFDcEMsUUFBSSxXQUFXLEtBQUssYUFBYSxLQUFLO0FBQ3RDLGFBQVEsUUFBUSxTQUFRO0FBQ3ZCLFVBQUcsQ0FBQyxTQUFTLFNBQVMsSUFBSSxHQUFFO0FBQzNCLGlCQUFTLEtBQUssSUFBSTtBQUFBLE1BQ25CO0FBQUEsSUFDRDtBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxhQUFhLFFBQU0sS0FBSyxjQUFhO0FBQ3BDLFFBQUcsU0FBTyxNQUFNLFFBQU87QUFDdEIsYUFBTyxLQUFLLHFCQUFxQixNQUFNLFFBQU8sS0FBSztBQUFBLElBQ3BELE9BQUs7QUFDSixhQUFPLENBQUM7QUFBQSxJQUNUO0FBQUEsRUFFRDtBQUFBLEVBRUEsV0FBVyxPQUFZO0FBQ3RCLFFBQUcsU0FBUyxNQUFNLFVBQVUsTUFBTSxPQUFPLFFBQU87QUFDL0MsVUFBSSxTQUFTLE1BQU0sT0FBTztBQUMxQixhQUFPLE9BQU8sU0FBUztBQUFBLFFBQ3RCLENBQUMsTUFBa0IsYUFBYTtBQUFBLE1BQ2pDO0FBQUEsSUFDRDtBQUNBLFdBQU8sQ0FBQztBQUFBLEVBQ1Q7QUFBQSxFQUVBLHFCQUFxQixTQUFnQixnQkFBYyxPQUFNO0FBQ3hELFFBQUcsV0FBUyxNQUFLO0FBQUMsYUFBTyxDQUFDO0FBQUEsSUFBRTtBQUM1QixRQUFJLFFBQVEsQ0FBQztBQUNiLGFBQVEsS0FBSyxRQUFRLFVBQVM7QUFDN0IsVUFBRyxhQUFhLHlCQUFTLEVBQUUsY0FBWSxNQUFLO0FBQzNDLGNBQU0sS0FBSyxDQUFDO0FBQUEsTUFDYixXQUFTLGFBQWEsMkJBQVcsZUFBYztBQUM5QyxZQUFJLE1BQU0sS0FBSyxxQkFBcUIsQ0FBQztBQUNyQyxpQkFBUSxLQUFLLEtBQUk7QUFDaEIsZ0JBQU0sS0FBSyxDQUFDO0FBQUEsUUFDYjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQ0EsV0FBTztBQUFBLEVBRVI7QUFBQSxFQUlBLGNBQWMsT0FBYyxRQUFvQjtBQUMvQyxRQUFJLFFBQVEsS0FBSyxXQUFXLE1BQU0sT0FBSyxLQUFLO0FBQzVDLFFBQUksTUFBTSxLQUFLLE9BQU8sT0FBTztBQUFBLE1BQzVCO0FBQUEsTUFBTTtBQUFBLElBQ1A7QUFDQSxRQUFHLENBQUMsS0FBSTtBQUFDLGFBQU87QUFBQSxJQUFHO0FBQ25CLFFBQUksUUFBUSxJQUFJLE1BQU0sS0FBSztBQUMzQixRQUFJLFNBQVMsS0FBSyxVQUFVLE1BQU0sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzdDLFFBQUcsQ0FBQyxRQUFPO0FBQUMsYUFBTztBQUFBLElBQUc7QUFDdEIsUUFBSSxNQUFNLE9BQU8sUUFBUSxNQUFNO0FBQy9CLFFBQUcsTUFBTSxVQUFRLEdBQUU7QUFDbEIsWUFBTSxNQUFNLFdBQVcsTUFBTSxDQUFDLENBQUM7QUFBQSxJQUNoQztBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxXQUFXLE1BQUs7QUFDZixRQUFJLE9BQU8sQ0FBQyxFQUFFLE1BQU0sS0FBSyxTQUFTLEVBQUUsTUFBTSxDQUFDO0FBQzNDLFFBQUksU0FBUyxDQUFDO0FBQ2QsUUFBRyxLQUFLLFVBQVEsR0FBRTtBQUNqQixlQUFTLEtBQUssQ0FBQztBQUFBLElBQ2hCO0FBQ0EsUUFBSSxNQUFNLE9BQU8sS0FBSztBQUV0QixRQUFHLE9BQUssTUFBSztBQUNaLGFBQU8sR0FBRyxVQUFVO0FBQUEsSUFDckI7QUFDQSxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEsZ0JBQWdCLE9BQVk7QUFDM0IsUUFBSSxPQUFPLEtBQUs7QUFDaEIsUUFBSSxNQUFNO0FBQ1YsUUFBRyxNQUFNLFVBQVEsS0FBSyxRQUFPO0FBQzVCLFlBQU0sTUFBTTtBQUFBLElBQ2IsT0FBSztBQUNKLFlBQU0sTUFBTTtBQUFBLElBQ2I7QUFDQSxRQUFHLFNBQU8sS0FBSyxjQUFhO0FBQzNCLGFBQU8sYUFBTTtBQUFBLElBQ2QsT0FBSztBQUNKLGFBQU87QUFBQSxJQUNSO0FBQUEsRUFFRDtBQUFBLEVBRUEsWUFBWSxPQUEwQjtBQUNyQyxRQUFJLE9BQU8sQ0FBQyxFQUFFLE1BQU0sS0FBSyxTQUFTLEVBQUUsTUFBTSxDQUFDO0FBQzNDLFFBQUksU0FBUyxDQUFDO0FBQ2QsUUFBRyxLQUFLLFVBQVEsR0FBRTtBQUNqQixlQUFTLEtBQUssQ0FBQztBQUFBLElBQ2hCO0FBRUEsUUFBSSxNQUFNLENBQUM7QUFDWCxRQUFJLElBQUk7QUFDUixXQUFNLElBQUUsTUFBTSxRQUFPO0FBQ3BCLFVBQUcsT0FBTyxLQUFLLEdBQUU7QUFDaEIsWUFBSSxLQUFLLEtBQUssV0FBVyxNQUFNLENBQUMsR0FBRSxFQUFDLE9BQU0sSUFBRSxFQUFDLENBQUMsQ0FBQztBQUFBLE1BQy9DLE9BQUs7QUFDSixZQUFJLEtBQUssS0FBSyxXQUFXLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFBQSxNQUNuQztBQUVBO0FBQUEsSUFDRDtBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxNQUFNLGdCQUFnQixRQUFNLEtBQUssY0FBYSxhQUFXLE1BQUssUUFBTSxJQUFHO0FBQ3RFLFFBQUcsT0FBTTtBQUFDLGVBQU8sS0FBSztBQUFBLElBQWE7QUFDbkMsUUFBSSxLQUFLO0FBQUEsTUFDUjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDRDtBQUVBLFFBQUcsWUFBVztBQUNiLFNBQUcsUUFBUSwwQkFBTTtBQUFBLElBQ2xCLE9BQUs7QUFDSixTQUFHLEtBQUssMEJBQU07QUFBQSxJQUNmO0FBRUEsUUFBSSxNQUFNLENBQUM7QUFDWCxRQUFJLElBQUk7QUFDUixhQUFRLEtBQUssSUFBRztBQUNmLFVBQUksS0FBSyxHQUFHLE9BQU8sR0FBRztBQUFBLElBQ3ZCO0FBRUEsUUFBSSxPQUFPO0FBQ1gsUUFBRyxHQUFHLFNBQVMsS0FBSyxHQUFFO0FBQ3JCLGFBQU87QUFBQSxJQUNSLE9BQUs7QUFDSixhQUFPLE1BQU0sS0FBSyxVQUFVLEtBQUksRUFBRTtBQUFBLElBQ25DO0FBQ0EsUUFBRyxTQUFPLDRCQUFPO0FBQ2hCLGFBQU8sQ0FBQyxLQUFLO0FBQUEsSUFDZCxXQUFTLFNBQU8sNEJBQU87QUFDdEIsYUFBTyxLQUFLLGFBQWEsS0FBSztBQUFBLElBQy9CLFdBQVMsU0FBTywrQ0FBVztBQUMxQixhQUFPLEtBQUsscUJBQXFCLCtCQUFPLFFBQU8sSUFBSTtBQUFBLElBQ3BELFdBQVMsU0FBTyw2QkFBUTtBQUN2QixhQUFPLEtBQUssVUFBVSxLQUFLO0FBQUEsSUFDNUIsV0FBUyxTQUFPLGdCQUFLO0FBQ3BCLGFBQU8sS0FBSyxZQUFZLEtBQUs7QUFBQSxJQUM5QixXQUFTLFNBQU8sZ0JBQUs7QUFDcEIsYUFBTyxLQUFLLGFBQWEsS0FBSztBQUFBLElBQy9CLFdBQVMsU0FBTyw0QkFBTztBQUN0QixhQUFPLEtBQUssZUFBZTtBQUFBLElBQzVCLFdBQVMsU0FBTyx5QkFBd0I7QUFDdkMsVUFBSSxJQUFJLEtBQUssSUFBSSxRQUFRLFVBQVUsdUJBQXVCO0FBQzFELFVBQUcsQ0FBQyxHQUFFO0FBQUMsZUFBTyxDQUFDO0FBQUEsTUFBRTtBQUNqQixhQUFPLE9BQU87QUFBQSxRQUNiLEVBQUUsS0FBSztBQUFBLE1BQVcsRUFBRTtBQUFBLFFBQUksT0FBRyxLQUFLLElBQUksTUFBTSxRQUFRLEVBQUUsSUFBSTtBQUFBLE1BQ3pELEVBQUUsT0FBTyxPQUFHLENBQUM7QUFBQSxJQUNkLFdBQVMsU0FBTyw0QkFBTztBQUN0QixhQUFPLEtBQUssV0FBVyxLQUFLO0FBQUEsSUFDN0IsV0FBUyxTQUFPLDRCQUFPO0FBQ3RCLGFBQU8sS0FBSztBQUFBLFFBQ1g7QUFBQSxRQUNBLE9BQU8sS0FBSyxPQUFPLFNBQVMsU0FBUztBQUFBLFFBQ3JDLE9BQU8sS0FBSyxPQUFPLFNBQVMsU0FBUztBQUFBLE1BQ3RDO0FBQUEsSUFDRCxPQUFLO0FBQ0osYUFBTyxDQUFDO0FBQUEsSUFDVDtBQUFBLEVBQ0Q7QUFBQTtBQUFBLEVBSUEsY0FBYyxRQUFNLEtBQUssY0FBYTtBQUNyQyxRQUFHLENBQUMsT0FBTTtBQUFDO0FBQUEsSUFBTztBQUNsQixRQUFHLE1BQU0sU0FBUTtBQUNoQixVQUFJLFNBQVMsS0FBSyxJQUFJLE1BQU0saUJBQWlCO0FBQzdDLGVBQVMsT0FBTyxPQUFPLE9BQUcsS0FBSyxNQUFNLGlCQUFlLEtBQUssT0FBTyxnQkFBZ0IsR0FBRSxLQUFLLElBQUksQ0FBQztBQUM1RixVQUFHLE9BQU8sU0FBTyxHQUFFO0FBQ2xCLGVBQU8sTUFBTSxDQUFDO0FBQUEsTUFDZixPQUFLO0FBQ0osZUFBTztBQUFBLE1BQ1I7QUFBQSxJQUNELE9BQUs7QUFDSixVQUFJLE9BQU8sS0FBSyxPQUFPLGdCQUFnQixPQUFNLEtBQUssSUFBSTtBQUN0RCxVQUFHLENBQUMsTUFBSztBQUFDLGVBQU87QUFBQSxNQUFLO0FBRXRCLFVBQUksT0FBTyxLQUFLLFVBQVUsSUFBSTtBQUM5QixhQUFPLE9BQUssT0FBSztBQUFBLElBQ2xCO0FBQUEsRUFDRDtBQUFBLEVBRUEsZ0JBQWdCLFFBQU0sS0FBSyxjQUFhO0FBQ3ZDLFFBQUksT0FBTyxLQUFLLGNBQWMsS0FBSztBQUNuQyxTQUFLLFVBQVUsSUFBSTtBQUFBLEVBQ3BCO0FBQUEsRUFFQSxjQUFjLFFBQU0sS0FBSyxjQUFhO0FBQ3JDLFFBQUcsTUFBTSxTQUFRO0FBQ2hCLFVBQUksU0FBUyxLQUFLLElBQUksTUFBTSxpQkFBaUI7QUFDN0MsZUFBUyxPQUFPLE9BQU8sT0FBRyxLQUFLLE1BQU0saUJBQWUsS0FBSyxPQUFPLGdCQUFnQixHQUFFLEtBQUssSUFBSSxDQUFDO0FBQzVGLFVBQUcsT0FBTyxTQUFPLEdBQUU7QUFDbEIsZUFBTyxPQUFPLENBQUM7QUFBQSxNQUNoQixPQUFLO0FBQ0osZUFBTztBQUFBLE1BQ1I7QUFBQSxJQUNELE9BQUs7QUFDSixVQUFJLE9BQU8sS0FBSyxPQUFPLGdCQUFnQixPQUFNLEtBQUssSUFBSTtBQUN0RCxVQUFHLENBQUMsTUFBSztBQUFDLGVBQU87QUFBQSxNQUFLO0FBRXRCLFVBQUksT0FBTyxLQUFLLFVBQVUsSUFBSTtBQUM5QixhQUFPLE9BQUssT0FBSztBQUFBLElBQ2xCO0FBQUEsRUFDRDtBQUFBLEVBRUEsZ0JBQWdCLFFBQU0sS0FBSyxjQUFhO0FBQ3ZDLFFBQUksT0FBTyxLQUFLLGNBQWMsS0FBSztBQUNuQyxTQUFLLFVBQVUsSUFBSTtBQUFBLEVBQ3BCO0FBQUEsRUFFQSxVQUFVLFFBQU0sS0FBSyxjQUFhLE9BQUssSUFBRyxPQUFLLElBQUcsWUFBVSxNQUFLO0FBQ2hFLFFBQUcsU0FBTyxNQUFLO0FBQUMsYUFBTyxDQUFDO0FBQUEsSUFBRTtBQUUxQixRQUFJLE1BQU0sSUFBSSxNQUFNO0FBQ3BCLFFBQUcsV0FBVTtBQUNaLFVBQUksS0FBSyxLQUFLO0FBQUEsSUFDZjtBQUVBLFFBQUksTUFBTTtBQUNWLGFBQVEsSUFBRSxNQUFLLEtBQUcsR0FBRSxLQUFJO0FBQ3ZCLFVBQUksT0FBTyxLQUFLLGNBQWMsR0FBRztBQUNqQyxVQUFHLENBQUMsTUFBSztBQUNSO0FBQUEsTUFDRCxXQUFTLElBQUksU0FBUyxJQUFJLEdBQUU7QUFFM0IsYUFBSyxPQUFPLGdCQUFnQixNQUFLLEtBQUssTUFBSyxFQUFFO0FBQzdDLGFBQUssT0FBTyxnQkFBZ0IsS0FBSSxLQUFLLE1BQUssRUFBRTtBQUM1QztBQUFBLE1BQ0QsT0FBSztBQUNKLFlBQUksUUFBUSxJQUFJO0FBQ2hCLGNBQU07QUFBQSxNQUNQO0FBQUEsSUFDRDtBQUVBLFVBQU07QUFDTixhQUFRLElBQUUsTUFBSyxLQUFHLEdBQUUsS0FBSTtBQUN2QixVQUFJLE9BQU8sS0FBSyxjQUFjLEdBQUc7QUFDakMsVUFBRyxDQUFDLE1BQUs7QUFDUjtBQUFBLE1BQ0QsV0FBUyxJQUFJLFNBQVMsSUFBSSxHQUFFO0FBRTNCLGFBQUssT0FBTyxnQkFBZ0IsTUFBSyxLQUFLLE1BQUssRUFBRTtBQUM3QyxhQUFLLE9BQU8sZ0JBQWdCLEtBQUksS0FBSyxNQUFLLEVBQUU7QUFDNUM7QUFBQSxNQUNELE9BQUs7QUFDSixZQUFJLEtBQUssSUFBSTtBQUNiLGNBQU07QUFBQSxNQUNQO0FBQUEsSUFDRDtBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxlQUFlLFFBQU0sS0FBSyxjQUFhO0FBQ3RDLFFBQUksUUFBUSxLQUFLLFVBQVUsT0FBTSxJQUFHLEdBQUUsS0FBSztBQUMzQyxRQUFHLE1BQU0sU0FBTyxHQUFFO0FBQ2pCLGFBQU8sTUFBTSxDQUFDO0FBQUEsSUFDZixPQUFLO0FBQ0osYUFBTztBQUFBLElBQ1I7QUFBQSxFQUNEO0FBQUEsRUFFQSxjQUFjLFFBQU0sS0FBSyxjQUFhO0FBQ3JDLFFBQUksUUFBUSxLQUFLLFVBQVUsT0FBTSxHQUFFLElBQUcsS0FBSztBQUMzQyxRQUFHLE1BQU0sU0FBTyxHQUFFO0FBQ2pCLGFBQU8sTUFBTSxNQUFNLFNBQU8sQ0FBQztBQUFBLElBQzVCLE9BQUs7QUFDSixhQUFPO0FBQUEsSUFDUjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLGNBQWMsUUFBTSxLQUFLLGNBQWE7QUFDckMsV0FBTztBQUFBLE1BQ04sS0FBSyxjQUFjLEtBQUs7QUFBQSxNQUN4QixLQUFLLGNBQWMsS0FBSztBQUFBLElBQ3pCO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBTSxlQUFlLE9BQVksTUFBVztBQUMzQyxRQUFHLFNBQU8sUUFBUSxTQUFPLE1BQUs7QUFBQztBQUFBLElBQU87QUFDdEMsUUFBRyxRQUFNLE1BQU07QUFDZCxZQUFNLEtBQUssT0FBTztBQUFBLFFBQ2pCO0FBQUEsUUFBTSxLQUFLO0FBQUEsUUFBSztBQUFBLE1BQ2pCO0FBQUEsSUFDRCxPQUFLO0FBQ0osWUFBTSxLQUFLLE9BQU87QUFBQSxRQUNqQjtBQUFBLFFBQU0sS0FBSztBQUFBLFFBQUssS0FBSyxLQUFLO0FBQUEsTUFDM0I7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBTSxlQUFlLE9BQVksTUFBVztBQUMzQyxRQUFHLFNBQU8sUUFBUSxTQUFPLE1BQUs7QUFBQztBQUFBLElBQU87QUFDdEMsUUFBRyxRQUFNLE1BQU07QUFDZCxZQUFNLEtBQUssT0FBTztBQUFBLFFBQ2pCO0FBQUEsUUFBTSxLQUFLO0FBQUEsUUFBSztBQUFBLE1BQ2pCO0FBQUEsSUFDRCxPQUFLO0FBQ0osWUFBTSxLQUFLLE9BQU87QUFBQSxRQUNqQjtBQUFBLFFBQU0sS0FBSztBQUFBLFFBQUssS0FBSyxLQUFLO0FBQUEsTUFDM0I7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBTSxvQkFBb0IsTUFBVyxNQUFXO0FBQy9DLFVBQU0sS0FBSyxlQUFlLE1BQUssSUFBSTtBQUNuQyxVQUFNLEtBQUssZUFBZSxNQUFLLElBQUk7QUFBQSxFQUNwQztBQUFBLEVBRUEsTUFBTSxvQkFBb0IsUUFBb0I7QUFFN0MsUUFBSSxPQUFPLEtBQUssY0FBYyxPQUFPLENBQUMsQ0FBQztBQUN2QyxRQUFHLE9BQU8sU0FBUyxJQUFJLEdBQUU7QUFDeEIsWUFBTSxLQUFLLGVBQWUsT0FBTyxDQUFDLEdBQUUsSUFBSTtBQUFBLElBQ3pDO0FBR0EsUUFBSSxPQUFPLEtBQUssY0FBYyxPQUFPLE9BQU8sU0FBTyxDQUFDLENBQUM7QUFDckQsUUFBRyxPQUFPLFNBQVMsSUFBSSxHQUFFO0FBQ3hCLFlBQU0sS0FBSyxlQUFlLE9BQU8sT0FBTyxTQUFPLENBQUMsR0FBRSxJQUFJO0FBQUEsSUFDdkQ7QUFFQSxhQUFRLElBQUUsR0FBRSxJQUFFLE9BQU8sU0FBTyxHQUFFLEtBQUk7QUFDakMsWUFBTSxLQUFLLG9CQUFvQixPQUFPLENBQUMsR0FBRSxPQUFPLElBQUUsQ0FBQyxDQUFDO0FBQUEsSUFDckQ7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLGVBQWUsT0FBWTtBQUNoQyxRQUFJLFFBQVEsS0FBSyxjQUFjLEtBQUs7QUFDcEMsVUFBTSxLQUFLLG9CQUFvQixNQUFNLENBQUMsR0FBRSxNQUFNLENBQUMsQ0FBQztBQUFBLEVBQ2pEO0FBQUEsRUFFQSxNQUFNLDBCQUEwQixPQUFZLFFBQWE7QUFDeEQsUUFBSSxPQUFPLEtBQUssZUFBZSxNQUFNO0FBQ3JDLFVBQU0sS0FBSyxvQkFBb0IsT0FBTSxJQUFJO0FBQUEsRUFDMUM7QUFBQSxFQUVBLE1BQU0sMEJBQTBCLE9BQVksUUFBYTtBQUN4RCxRQUFJLE9BQU8sS0FBSyxjQUFjLE1BQU07QUFDcEMsVUFBTSxLQUFLLG9CQUFvQixNQUFLLEtBQUs7QUFBQSxFQUMxQztBQUFBLEVBRUEsTUFBTSx3QkFBd0IsT0FBWSxRQUFhO0FBQ3RELFVBQU0sS0FBSyxlQUFlLEtBQUs7QUFDL0IsUUFBSSxPQUFPLEtBQUssY0FBYyxNQUFNO0FBQ3BDLFVBQU0sS0FBSyxvQkFBb0IsQ0FBQyxRQUFPLE9BQU0sSUFBSSxDQUFDO0FBQUEsRUFDbkQ7QUFBQSxFQUVBLE1BQU0seUJBQXlCLE9BQVksUUFBYTtBQUN2RCxVQUFNLEtBQUssZUFBZSxLQUFLO0FBQy9CLFFBQUksT0FBTyxLQUFLLGNBQWMsTUFBTTtBQUNwQyxVQUFNLEtBQUssb0JBQW9CLENBQUMsTUFBSyxPQUFNLE1BQU0sQ0FBQztBQUFBLEVBQ25EO0FBQUEsRUFFQSxNQUFNLDBCQUEwQixPQUFZLFFBQWE7QUFDeEQsUUFBRyxDQUFDLE1BQU0sVUFBVSxNQUFNLE9BQU8sVUFBUSxPQUFPLFFBQU87QUFDdEQ7QUFBQSxJQUNEO0FBQ0EsUUFBSSxPQUFPLEtBQUssVUFBVSxNQUFNLE9BQU8sSUFBSTtBQUMzQyxRQUFHLENBQUMsTUFBSztBQUNSLGNBQVEsSUFBSSw4REFBWTtBQUN4QjtBQUFBLElBQ0Q7QUFDQSxVQUFNLEtBQUssT0FBTyxPQUFPO0FBQUEsTUFDeEI7QUFBQSxNQUFLO0FBQUEsTUFBaUIsS0FBSyxPQUFPO0FBQUEsSUFDbkM7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLHVCQUF1QixRQUFNLEtBQUssY0FBYSxPQUFLLGFBQVk7QUFDckUsUUFBSSxRQUFRLEtBQUssYUFBYSxLQUFLO0FBQ25DLFFBQUcsTUFBTSxVQUFRLEdBQUU7QUFBQztBQUFBLElBQU87QUFFM0IsUUFBSSxRQUFRLE1BQU0sS0FBSyxlQUFlLEtBQUs7QUFDM0MsVUFBTSxLQUFLLG9CQUFvQixLQUFLO0FBQUEsRUFDckM7QUFBQSxFQUVBLFlBQVksT0FBbUIsT0FBVTtBQUN4QyxRQUFHLE9BQU8sVUFBVSxVQUFTO0FBQzVCLFVBQUcsVUFBUSxRQUFPO0FBQ2pCLGVBQU8sTUFBTTtBQUFBLFVBQ1osQ0FBQyxHQUFFLE1BQUssRUFBRSxLQUFLLGNBQWMsRUFBRSxJQUFJO0FBQUEsUUFDcEM7QUFBQSxNQUNELFdBQVMsVUFBUSxTQUFRO0FBQ3hCLGVBQU8sTUFBTTtBQUFBLFVBQ1osQ0FBQyxHQUFFLE1BQUssRUFBRSxLQUFLLFFBQU0sRUFBRSxLQUFLO0FBQUEsUUFDN0I7QUFBQSxNQUNELFdBQVMsVUFBUSxTQUFRO0FBQ3hCLGVBQU8sTUFBTTtBQUFBLFVBQ1osQ0FBQyxHQUFFLE1BQUssRUFBRSxLQUFLLFFBQU0sRUFBRSxLQUFLO0FBQUEsUUFDN0I7QUFBQSxNQUNELFdBQ1EsVUFBUSxTQUFRO0FBQ3ZCLGVBQU8sS0FBSyxxQkFBcUIsS0FBSztBQUFBLE1BQ3ZDO0FBQ0EsYUFBTztBQUFBLElBQ1IsV0FBUyxPQUFPLFVBQVUsVUFBUztBQUNsQyxVQUFHLGlCQUFpQixPQUFNO0FBQ3pCLFlBQUksU0FBUyxLQUFLLFlBQVksT0FBTSxNQUFNLENBQUMsQ0FBQztBQUM1QyxZQUFHLE1BQU0sVUFBUSxHQUFFO0FBQ2xCLGNBQUcsTUFBTSxDQUFDLE1BQUksS0FBSTtBQUNqQixtQkFBTyxPQUFPLFFBQVE7QUFBQSxVQUN2QjtBQUFBLFFBQ0Q7QUFDQSxlQUFPO0FBQUEsTUFDUjtBQUFBLElBQ0Q7QUFDQSxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEscUJBQXFCLFFBQTRCO0FBQ2hELFFBQUksUUFBUSxPQUFPLE9BQU8sT0FBRyxhQUFhLHFCQUFLO0FBQy9DLFFBQUksTUFBTSxDQUFDO0FBQ1gsV0FBTSxNQUFNLFNBQU8sR0FBRTtBQUNwQixVQUFJLE9BQU8sTUFBTSxDQUFDO0FBQ2xCLFVBQUksU0FBUyxLQUFLLFVBQVUsTUFBSyxJQUFHLEVBQUU7QUFDdEMsZUFBUSxLQUFLLFFBQU87QUFDbkIsWUFBRyxNQUFNLFNBQVMsQ0FBQyxHQUFFO0FBQ3BCLGNBQUksS0FBSyxDQUFDO0FBQ1YsZ0JBQU0sT0FBTyxDQUFDO0FBQUEsUUFDZjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQ0EsUUFBSSxVQUFVLE9BQU8sT0FBTyxPQUFHLGFBQWEsdUJBQU87QUFDbkQsUUFBRyxRQUFRLFNBQU8sR0FBRTtBQUtuQixVQUFTLFVBQVQsU0FBaUIsR0FBZ0I7QUFDaEMsWUFBRyxhQUFhLHVCQUFNO0FBQ3JCLGlCQUFPLElBQUksUUFBUSxDQUFDO0FBQUEsUUFDckIsV0FBUyxhQUFhLHlCQUFRO0FBQzdCLGlCQUFPLEtBQUssUUFBUSxRQUFRLENBQUMsQ0FBQztBQUFBLFFBQy9CLE9BQUs7QUFDSixpQkFBTztBQUFBLFFBQ1I7QUFBQSxNQUNEO0FBWkEsVUFBSSxPQUFPLFFBQVE7QUFBQSxRQUNsQixDQUFDLE1BQVksS0FBSyxjQUFjLEdBQUUsR0FBYztBQUFBLE1BQ2pEO0FBQ0EsVUFBSSxLQUFLLEdBQUcsT0FBTztBQVVuQixZQUFNLElBQUksS0FBSyxDQUFDLEdBQUUsTUFBSSxRQUFRLENBQUMsSUFBRSxRQUFRLENBQUMsQ0FBQztBQUFBLElBQzVDO0FBQ0EsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLHlCQUF5QixRQUFvQjtBQUM1QyxRQUFJLElBQUksT0FBTyxPQUFPLE9BQUcsYUFBYSx1QkFBTyxFQUFFLEtBQUssQ0FBQyxHQUFFLE1BQUssRUFBRSxLQUFLLGNBQWMsRUFBRSxJQUFJLENBQUU7QUFDekYsUUFBSSxJQUFJLE9BQU8sT0FBTyxPQUFHLGFBQWEscUJBQUs7QUFDM0MsV0FBTyxLQUFLLE9BQU8sTUFBTSxhQUFhLENBQUMsR0FBRSxDQUFDLENBQUM7QUFBQSxFQUM1QztBQUFBLEVBRUEscUJBQXFCLFFBQW9CLE9BQWE7QUFDckQsUUFBSSxNQUFNLE9BQU87QUFBQSxNQUNoQixDQUFDLEdBQUUsTUFBSTtBQUNOLFlBQUksS0FBSyxLQUFLLE9BQU8sZ0JBQWdCLEdBQUUsS0FBSztBQUM1QyxZQUFJLEtBQUssS0FBSyxPQUFPLGdCQUFnQixHQUFFLEtBQUs7QUFDNUMsZUFBTyxLQUFLO0FBQUEsTUFDYjtBQUFBLElBQ0Q7QUFDQSxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEsTUFBTSxlQUFlLFFBQW9CO0FBQ3hDLFFBQUcsQ0FBQyxRQUFPO0FBQUMsYUFBTyxDQUFDO0FBQUEsSUFBRTtBQUN0QixRQUFHLE9BQU8sVUFBUSxHQUFFO0FBQUMsYUFBTyxDQUFDO0FBQUEsSUFBQztBQUFDO0FBQy9CLFFBQUksS0FBSztBQUFBLE1BQ1IsU0FBUTtBQUFBLE1BQ1IsUUFBTztBQUFBLE1BQ1AsU0FBUTtBQUFBLE1BQ1IsU0FBUTtBQUFBLE1BQ1IscUJBQVUsQ0FBQyxRQUFPLEdBQUc7QUFBQSxNQUNyQixzQkFBVyxDQUFDLFNBQVEsR0FBRztBQUFBLE1BQ3ZCLHNCQUFXLENBQUMsU0FBUSxHQUFHO0FBQUEsSUFDeEI7QUFDQSxRQUFJLFFBQVEsTUFBTSxLQUFLO0FBQUEsTUFDdEIsT0FBTyxLQUFLLEVBQUU7QUFBQSxNQUNkLE9BQU8sT0FBTyxFQUFFO0FBQUEsSUFDakI7QUFDQSxRQUFHLFNBQU8sTUFBSztBQUFDLGFBQU8sQ0FBQztBQUFBLElBQUU7QUFDMUIsUUFBRyxTQUFPLFNBQVE7QUFDakIsZUFBUyxLQUFLLFlBQVksUUFBTyxNQUFNO0FBQUEsSUFDeEM7QUFDQSxXQUFPLEtBQUssWUFBWSxRQUFPLEtBQUs7QUFBQSxFQUNyQztBQUFBLEVBRUEscUJBQW9CO0FBcHJCckI7QUFxckJFLFFBQUksUUFBTyxVQUFLLElBQUksVUFBVTtBQUFBLE1BQzdCO0FBQUEsSUFDRCxFQUFFLENBQUMsTUFGUSxtQkFFTDtBQUNOLFFBQUcsQ0FBQyxNQUFLO0FBQUM7QUFBQSxJQUFPO0FBQ2pCLFNBQUssS0FBSztBQUNWLFFBQUcsS0FBSyxPQUFNO0FBQ2IsZUFBUSxRQUFRLEtBQUssV0FBVTtBQUM5QixZQUFJLE9BQU8sS0FBSyxVQUFVLElBQUk7QUFDOUIsWUFBRyxLQUFLLFdBQVU7QUFDakIsY0FBSSxRQUFRLEtBQUssVUFBVSxVQUFVLElBQUksT0FBRyxFQUFFLElBQUk7QUFDbEQsa0JBQVEsS0FBSyxxQkFBcUIsS0FBSztBQUN2QyxjQUFJLFdBQVcsS0FBSyxVQUFVLFVBQVU7QUFBQSxZQUN2QyxDQUFDLEdBQUUsTUFBSSxNQUFNLFFBQVEsRUFBRSxJQUFJLElBQUUsTUFBTSxRQUFRLEVBQUUsSUFBSTtBQUFBLFVBQ2xEO0FBQ0EsZUFBSyxVQUFVLFlBQVksUUFBUTtBQUFBLFFBQ3BDO0FBQUEsTUFDRDtBQUNBLFdBQUssS0FBSyxlQUFlLFFBQVE7QUFBQSxJQUNsQztBQUFBLEVBQ0Q7QUFFRDs7O0FDMXNCQSxJQUFBQyxtQkFFTztBQU1QLElBQUksYUFBYSxTQUFTLFVBQVU7QUFDbkMsTUFBSSxTQUFTLElBQUksUUFBUSxVQUFVLFlBQVk7QUFDL0MsU0FBTyxZQUFZLEdBQUU7QUFDcEIsUUFBRyxRQUFPO0FBQ1QsVUFBRyxpQ0FBUSxTQUFTLG9CQUFtQjtBQUN0QyxZQUFJLElBQUksS0FBSyxNQUNYLElBQUksS0FBSyxNQUNULElBQUksRUFBRSxTQUFTLE1BQU07QUFDdkIsWUFBSSxFQUFFLE9BQU8sQ0FBQyxNQUFrQixDQUFDO0FBQ2pDLFlBQUcsRUFBRSxTQUFPLEdBQUU7QUFDYixjQUFJLFFBQVEsT0FBTyxNQUFNLFNBQVMsRUFBRSxDQUFDLEVBQUUsT0FBTyxJQUFJO0FBQ2xELGNBQUcsT0FBTTtBQUNSLGdCQUFJQyxLQUFJLE1BQU0sT0FBTyxDQUFDLE1BQWtCLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDckQsZ0JBQUksSUFBSSxNQUFNLE9BQU8sQ0FBQyxNQUFrQixDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDdEQsWUFBQUEsR0FBRSxLQUFLLEdBQUcsQ0FBQztBQUNYLGdCQUFJQTtBQUFBLFVBQ0w7QUFBQSxRQUNEO0FBQ0EsWUFBRyxPQUFPLFNBQVMsZUFBYztBQUNoQyxjQUFJLE9BQU8sTUFBTSx5QkFBeUIsQ0FBQztBQUFBLFFBQzVDO0FBQ0EsaUJBQVMsSUFBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLEVBQUUsUUFBUSxLQUFLO0FBQ2pELGNBQUksSUFBSSxFQUFFLENBQUMsR0FDVCxJQUFJLEVBQUUsVUFBVSxFQUFFLElBQUk7QUFDeEIsZUFBSyxFQUFFLEtBQUssQ0FBQztBQUFBLFFBQ2Q7QUFDQSxhQUFLLFVBQVUsWUFBWSxDQUFDO0FBQUEsTUFDN0IsT0FBSztBQUNKLGVBQU8sU0FBUyxLQUFLLE1BQUssR0FBRyxDQUFDO0FBQUEsTUFDL0I7QUFBQSxJQUNELE9BQUs7QUFDSixhQUFPLFNBQVMsS0FBSyxNQUFLLEdBQUcsQ0FBQztBQUFBLElBQy9CO0FBQUEsRUFDRDtBQUNEO0FBRUEsZ0JBQWdCLFNBQVMsVUFBVTtBQUNsQyxNQUFJLFNBQVMsSUFBSSxRQUFRLFVBQVUsWUFBWTtBQUMvQyxTQUFPLFlBQVksR0FBRTtBQUNwQixRQUFHLFFBQU87QUFDVCxVQUFHLGlDQUFRLFNBQVMsb0JBQW1CO0FBQ3RDLFlBQUksSUFBSSxLQUFLLE1BQ1gsSUFBSSxLQUFLLE1BQ1QsSUFBSSxFQUFFLFNBQVMsTUFBTTtBQUN2QixZQUFJLEVBQUUsT0FBTyxPQUFHLENBQUM7QUFDakIsWUFBSSxPQUFPLE1BQU0scUJBQXFCLENBQUM7QUFDdkMsWUFBSSxPQUFPLE1BQU0seUJBQXlCLENBQUM7QUFDM0MsaUJBQVMsSUFBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLEVBQUUsUUFBUSxLQUFLO0FBQ2pELGNBQUksSUFBSSxFQUFFLENBQUMsR0FDVCxJQUFJLEVBQUUsVUFBVSxFQUFFLElBQUk7QUFDeEIsZUFBSyxFQUFFLEtBQUssQ0FBQztBQUFBLFFBQ2Q7QUFDQSxhQUFLLFVBQVUsWUFBWSxDQUFDO0FBQUEsTUFDN0IsT0FBSztBQUNKLGVBQU8sU0FBUyxLQUFLLE1BQUssR0FBRyxDQUFDO0FBQUEsTUFDL0I7QUFBQSxJQUNELE9BQUs7QUFDSixhQUFPLFNBQVMsS0FBSyxNQUFLLEdBQUcsQ0FBQztBQUFBLElBQy9CO0FBQUEsRUFDRDtBQUNEO0FBRU8sSUFBTSxpQkFBTixNQUFvQjtBQUFBLEVBTzFCLFlBQVksUUFBdUI7QUFDbEMsU0FBSyxTQUFTO0FBQ2QsU0FBSyxRQUFRLE9BQU87QUFDcEIsU0FBSyxNQUFNLE9BQU87QUFDbEIsU0FBSyxTQUFTO0FBQUEsRUFDZjtBQUFBLEVBR0EsV0FBVTtBQUNULFNBQUssSUFBSSxVQUFVLGNBQWMsTUFBSTtBQUNwQyxVQUFJLFNBQVMsSUFBSSx5QkFBUSx3QkFBTSxFQUFFO0FBQ2pDLFVBQUksTUFBTSxLQUFLLGNBQWMsZ0JBQWdCLE1BQU0sRUFBRTtBQUNyRCxXQUFLLGNBQWM7QUFDbkIsV0FBSyxXQUFXLElBQUksVUFBVTtBQUM5QixXQUFLLFdBQVcsV0FBVyxLQUFLLFFBQVE7QUFDeEMsV0FBSyxZQUFZLFVBQVUsT0FBTyxLQUFLO0FBQ3ZDLFdBQUssS0FBSztBQUFBLElBQ1gsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLGFBQVk7QUFDWCxRQUFHLEtBQUssVUFBUztBQUNoQixjQUFRLElBQUksNkNBQTZDO0FBQ3pELFdBQUssWUFBWSxVQUFVLE9BQU8sS0FBSztBQUFBLElBQ3hDO0FBQUEsRUFDRDtBQUFBLEVBRUEsSUFBSSxnQkFBZTtBQXhHcEI7QUF5R0UsUUFBSSxRQUFPLFVBQUssSUFBSSxVQUFVO0FBQUEsTUFDN0I7QUFBQSxJQUNELEVBQUUsQ0FBQyxNQUZRLG1CQUVMO0FBQ04sV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLE1BQU0sS0FBSyxTQUFPLEdBQUU7QUEvR3JCO0FBZ0hFLFNBQUcsVUFBSyxrQkFBTCxtQkFBb0IsTUFBSztBQUMzQixVQUFHLFNBQU8sR0FBRTtBQUNYLGNBQU0sS0FBSyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQUEsTUFDckM7QUFDQSxXQUFLLE9BQU8sTUFBTSxjQUFjO0FBQ2hDLFdBQUssY0FBYyxLQUFLO0FBQUEsSUFDekI7QUFBQSxFQUNEO0FBQ0Q7OztBSDlHQTtBQWFBLElBQU0sbUJBQStCO0FBQUEsRUFDcEMsV0FBWTtBQUFBLEVBQ1osV0FBWTtBQUFBLEVBQ1osaUJBQWtCO0FBQUEsRUFDbEIsY0FBZTtBQUFBLEVBQ2Ysb0JBQXFCO0FBQUEsRUFDckIsZUFBZ0I7QUFDakI7QUFFQSxJQUFNLHFCQUFxQixDQUFDLFlBQTRCO0FBQUEsRUFDdkQsSUFBSTtBQUFBLEVBQ0QsTUFBTTtBQUFBLEVBQ1QsVUFBVSxNQUFNO0FBQ2YsUUFBSSxPQUFPLE9BQU8sTUFBTTtBQUN4QixRQUFHLFFBQVEsTUFBSztBQUFDO0FBQUEsSUFBTztBQUN4QixRQUFJLFlBQVk7QUFBQSxNQUNmO0FBQUEsTUFDQSxRQUFLO0FBQ0osWUFBRyxRQUFNLE1BQUs7QUFBQztBQUFBLFFBQU87QUFDdEIsWUFBRyxHQUFHLFVBQVUsS0FBRyxNQUFLO0FBQUM7QUFBQSxRQUFPO0FBQ2hDLFlBQUksU0FBUyxPQUFPLE1BQU0sYUFBYSxHQUFHLFNBQVMsTUFBTTtBQUN6RCxZQUFJLGVBQWUsT0FBTyxNQUFNLGFBQWEsR0FBRyxTQUFTLFlBQVk7QUFDckUsdUJBQWUsYUFBYSxPQUFPLENBQUMsTUFBVyxDQUFDLE9BQU8sU0FBUyxDQUFDLENBQUM7QUFDbEUsWUFBSSxRQUFRLE9BQU8sTUFBTSxhQUFhLENBQUMsUUFBTyxZQUFZLENBQUM7QUFDM0QsZ0JBQVEsTUFBTSxJQUFJLENBQUMsTUFBVyxPQUFPLE1BQU0sV0FBVyxDQUFDLENBQUM7QUFDeEQsWUFBRyxLQUFLLFVBQVEsTUFBSztBQUFDO0FBQUEsUUFBTTtBQUFDO0FBQzdCLFlBQUksU0FBUyxPQUFPLE1BQU0scUJBQXFCLEtBQUssTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFRLENBQUMsTUFBTSxTQUFTLENBQUMsQ0FBQztBQUM5RixnQkFBUSxPQUFPLE1BQU0sYUFBYSxDQUFDLFFBQU8sS0FBSyxDQUFDO0FBQ2hELGVBQU8sTUFBTSxvQkFBb0IsS0FBSztBQUFBLE1BQ3ZDO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFDRDtBQUVBLElBQU0scUJBQXFCLENBQUMsWUFBNEI7QUFBQSxFQUN2RCxJQUFJO0FBQUEsRUFDRCxNQUFNO0FBQUEsRUFDVCxVQUFVLE1BQU07QUFDZixRQUFJLE9BQU8sT0FBTyxNQUFNO0FBQ3hCLFFBQUcsUUFBTSxNQUFLO0FBQUM7QUFBQSxJQUFPO0FBQ3RCLFFBQUksWUFBWTtBQUFBLE1BQ2Y7QUFBQSxNQUNBLFFBQUs7QUFDSixZQUFHLFFBQU0sTUFBSztBQUFDO0FBQUEsUUFBTztBQUN0QixZQUFHLEtBQUssVUFBUSxNQUFLO0FBQUM7QUFBQSxRQUFNO0FBQUM7QUFFN0IsWUFBRyxHQUFHLFVBQVUsS0FBRyxNQUFLO0FBQUM7QUFBQSxRQUFPO0FBQ2hDLFlBQUksUUFBUSxPQUFPLE1BQU0scUJBQXFCLEtBQUssTUFBTTtBQUN6RCxnQkFBUSxPQUFPLE1BQU0scUJBQXFCLEtBQUs7QUFDL0MsV0FBRyxTQUFTLFNBQVMsTUFBTSxJQUFJLENBQUMsTUFBVSxFQUFFLFFBQVE7QUFBQSxNQUNyRDtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQ0Q7QUFHQSxJQUFNLHFCQUFxQixDQUFDLFlBQTRCO0FBQUEsRUFDdkQsSUFBSTtBQUFBLEVBQ0QsTUFBTTtBQUFBLEVBQ1QsVUFBVSxZQUFZO0FBQ3JCLFVBQU0sT0FBTyxTQUFTLEtBQUs7QUFBQSxFQUM1QjtBQUNEO0FBRUEsSUFBTSxxQkFBcUIsQ0FBQyxZQUE0QjtBQUFBLEVBQ3ZELElBQUk7QUFBQSxFQUNKLE1BQU07QUFBQSxFQUNOLFVBQVUsTUFBTTtBQUNmLFdBQU8sa0JBQWtCO0FBQUEsRUFDMUI7QUFDRDtBQUVBLElBQU0sc0JBQXNCLENBQUMsWUFBNEI7QUFBQSxFQUN4RCxJQUFJO0FBQUEsRUFDSixNQUFNO0FBQUEsRUFDTixVQUFVLE1BQU07QUFDZixXQUFPLE1BQU0sb0JBQW9CO0FBQUEsRUFDbEM7QUFDRDtBQUVBLElBQU0sa0JBQWtCLENBQUMsWUFBNEI7QUFBQSxFQUNwRCxJQUFJO0FBQUEsRUFDSixNQUFNO0FBQUEsRUFDTixVQUFVLE1BQU07QUFDZixXQUFPLE1BQU0sZ0JBQWdCO0FBQUEsRUFDOUI7QUFDRDtBQUVBLElBQU0sa0JBQWtCLENBQUMsWUFBNEI7QUFBQSxFQUNwRCxJQUFJO0FBQUEsRUFDSixNQUFNO0FBQUEsRUFDTixVQUFVLE1BQU07QUFDZixXQUFPLE1BQU0sZ0JBQWdCO0FBQUEsRUFDOUI7QUFDRDtBQUdBLElBQU0sZ0JBQWdCLENBQUMsWUFBNEI7QUFBQSxFQUNsRCxJQUFJO0FBQUEsRUFDSixNQUFNO0FBQUEsRUFDTixVQUFVLE1BQU07QUFDZixXQUFPLGNBQWM7QUFBQSxFQUN0QjtBQUNEO0FBRUEsSUFBTSw4QkFBOEIsQ0FBQyxZQUE0QjtBQUFBLEVBQ2hFLElBQUk7QUFBQSxFQUNKLE1BQU07QUFBQSxFQUNOLFVBQVUsTUFBTTtBQUNmLFdBQU8sTUFBTSxnQ0FBZ0M7QUFBQSxFQUM5QztBQUNEO0FBRUEsSUFBTSwwQkFBMEIsQ0FBQyxZQUE0QjtBQUFBLEVBQzVELElBQUk7QUFBQSxFQUNKLE1BQU07QUFBQSxFQUNOLFVBQVUsTUFBTTtBQUNmLFdBQU8sd0JBQXdCO0FBQUEsRUFDaEM7QUFDRDtBQUVBLElBQU0sb0JBQW9CLENBQUMsWUFBNEI7QUFBQSxFQUN0RCxJQUFJO0FBQUEsRUFDSixNQUFNO0FBQUEsRUFDTixVQUFVLFlBQVk7QUFDckIsVUFBTSxPQUFPLHNCQUFzQjtBQUNuQyxVQUFNLE9BQU8sU0FBUyxLQUFLLEdBQUc7QUFBQSxFQUMvQjtBQUNEO0FBRUEsSUFBTSxxQkFBcUIsQ0FBQyxZQUE0QjtBQUFBLEVBQ3ZELElBQUk7QUFBQSxFQUNKLE1BQU07QUFBQSxFQUNOLFVBQVUsWUFBWTtBQUNyQixVQUFNLE9BQU8sTUFBTSx1QkFBdUI7QUFDMUMsV0FBTyxTQUFTLEtBQUs7QUFBQSxFQUN0QjtBQUNEO0FBRUEsSUFBTSxrQkFBa0I7QUFBQSxFQUN2QjtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Q7QUFFQSxTQUFTLFlBQVksUUFBd0I7QUFDekMsa0JBQWdCLFFBQVEsQ0FBQyxNQUFNO0FBQzNCLFdBQU8sV0FBVyxFQUFFLE1BQU0sQ0FBQztBQUFBLEVBQy9CLENBQUM7QUFDTDtBQUVBLElBQXFCLGtCQUFyQixjQUE2Qyx3QkFBTztBQUFBLEVBU25ELE1BQU0sU0FBUztBQUNkLFNBQUssUUFBTTtBQUNYLFVBQU0sS0FBSyxhQUFhO0FBRXhCLFNBQUssUUFBUTtBQUNiLFNBQUssS0FBSyxRQUFRLFVBQVU7QUFDNUIsU0FBSyxTQUFTLElBQUksU0FBUyxLQUFLLEdBQUc7QUFDbkMsU0FBSyxRQUFRLElBQUksVUFBVSxNQUFLLEtBQUssTUFBTTtBQUMzQyxTQUFLLFdBQVcsSUFBSSxlQUFlLElBQUk7QUFFdkMsZ0JBQVksSUFBSTtBQUdoQixTQUFLLGNBQWMsSUFBSSxhQUFhLEtBQUssS0FBSyxJQUFJLENBQUM7QUFFbkQsWUFBUSxJQUFJLDBDQUEwQztBQUN0RCxTQUFLO0FBQUEsTUFDSixLQUFLLElBQUksVUFBVSxHQUFHLGFBQWEsS0FBSyxrQkFBa0I7QUFBQSxJQUMzRDtBQUVBLFNBQUssY0FBYyxLQUFLLElBQUksTUFBTTtBQUFBLE1BQ2pDO0FBQUEsTUFBVSxDQUFDLFNBQWdCO0FBQzFCLFlBQUcsS0FBSyxPQUFNO0FBQUMsa0JBQVEsSUFBSSxXQUFXO0FBQUEsUUFBRTtBQUN4QyxhQUFLLE1BQU0sZUFBZSxJQUFJO0FBQzlCLGFBQUssU0FBUyxLQUFLO0FBQUEsTUFDcEI7QUFBQSxJQUNELENBQUM7QUFFRCxTQUFLLGNBQWMsS0FBSyxJQUFJLE1BQU07QUFBQSxNQUNqQztBQUFBLE1BQVUsTUFBTTtBQUNmLFlBQUcsS0FBSyxPQUFNO0FBQUMsa0JBQVEsSUFBSSxXQUFXO0FBQUEsUUFBRTtBQUN4QyxhQUFLLFNBQVMsS0FBSztBQUFBLE1BQ3BCO0FBQUEsSUFDRCxDQUFDO0FBRUQsU0FBSyxjQUFjLEtBQUssSUFBSSxNQUFNO0FBQUEsTUFDakM7QUFBQSxNQUFVLENBQUMsTUFBWSxZQUFtQjtBQUN6QyxZQUFHLEtBQUssT0FBTTtBQUFDLGtCQUFRLElBQUksV0FBVztBQUFBLFFBQUU7QUFDeEMsYUFBSyxTQUFTLEtBQUs7QUFBQSxNQUNwQjtBQUFBLElBQ0QsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUdBLFdBQVc7QUFDVixZQUFRLElBQUksNENBQTRDO0FBQ3hELFNBQUssSUFBSSxVQUFVLElBQUksYUFBYSxLQUFLLGtCQUFrQjtBQUMzRCxTQUFLLFNBQVMsV0FBVztBQUN6QixTQUFLLFNBQVMsS0FBSztBQUFBLEVBQ3BCO0FBQUEsRUFFQSxNQUFNLG1CQUFtQixNQUFXO0FBQ25DLFFBQUcsS0FBSyxJQUFJLGVBQWUsU0FBUyxHQUFFO0FBQ3JDLFVBQUlDLE1BQUssTUFBTSxLQUFLLElBQUksUUFBUSxVQUFVLFlBQVk7QUFBQSxJQUN2RDtBQUNBLFFBQUksS0FBSyxNQUFNLElBQUksUUFBUSxVQUFVLFlBQVk7QUFDakQsUUFBRyxDQUFDLElBQUc7QUFBQztBQUFBLElBQU87QUFDZixRQUFHLEdBQUcsU0FBUyxpQkFBZ0I7QUFDOUIsU0FBRyxJQUFJLFNBQVM7QUFBQSxRQUNmO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFDQSxRQUFHLEdBQUcsU0FBUyxjQUFhO0FBQzNCLFVBQUksU0FBUyxNQUFNLElBQUksUUFBUSxVQUFVLHVCQUF1QjtBQUNoRSxhQUFPLE1BQU0sa0JBQWtCO0FBQUEsSUFDaEM7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUMxRTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ2xDO0FBQUEsRUFFQSxNQUFNLGNBQWMsUUFBTSxLQUFLLE1BQU0sY0FBYSxPQUFLLGFBQVk7QUFDbEUsUUFBSSxRQUFRLEtBQUssTUFBTSxZQUFZLEtBQUs7QUFDeEMsUUFBRyxNQUFNLFFBQU87QUFDZixVQUFHLFNBQU8sYUFBWTtBQUNyQixlQUFPLE1BQU0sS0FBSyxNQUFNO0FBQUEsVUFDdkIsQ0FBQyw0QkFBTyw0QkFBTywwQkFBTztBQUFBLFVBQ3RCLENBQUMsQ0FBQyxRQUFPLEtBQUssR0FBRSxDQUFDLFFBQU8sS0FBSyxHQUFFLENBQUMsUUFBTyxLQUFLLENBQUM7QUFBQSxRQUM5QztBQUFBLE1BQ0Q7QUFDQSxVQUFJLE1BQU0sS0FBSyxPQUFPLFlBQVksT0FBTSxLQUFLLENBQUMsQ0FBQztBQUMvQyxVQUFHLEtBQUk7QUFDTixpQkFBUSxRQUFRLE9BQU07QUFDckIsY0FBSTtBQUNKLGNBQUcsS0FBSyxDQUFDLE1BQUksT0FBTTtBQUNsQixxQkFBTyxNQUFNO0FBQUEsVUFDZCxPQUFLO0FBQ0oscUJBQU87QUFBQSxVQUNSO0FBQ0EsZUFBSyxPQUFPLFFBQVEsTUFBSyxLQUFJLE1BQU07QUFBQSxRQUNwQztBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBLEVBRUEsSUFBSSxTQUFRO0FBQ1gsV0FBTyxZQUFZLEtBQUssS0FBSSxrQkFBa0I7QUFBQSxFQUMvQztBQUFBLEVBRUEsTUFBTSwwQkFBeUI7QUFDOUIsUUFBSSxRQUFRLE1BQU0sS0FBSyxNQUFNLGdCQUFnQjtBQUM3QyxTQUFHLCtCQUFPLFVBQU8sR0FBRTtBQUNsQixVQUFJO0FBQ0gsWUFBSSxPQUFPLE1BQU0sS0FBSyxPQUFPLHdEQUFXO0FBQ3hDLFlBQUcsUUFBTSxNQUFLO0FBQ2I7QUFBQSxRQUNEO0FBQ0EsWUFBSSxNQUFNLElBQUksT0FBTyxNQUFLLEdBQUc7QUFFN0IsWUFBSSxTQUFTLE1BQU0sS0FBSyxPQUFPLGdDQUFPO0FBQ3RDLFlBQUcsVUFBUSxNQUFLO0FBQ2Y7QUFBQSxRQUNEO0FBQ0EsaUJBQVMsT0FBTyxLQUFLLEVBQUU7QUFBQSxVQUN0QjtBQUFBLFVBQU87QUFBQSxRQUNSO0FBQ0EsZ0JBQVEsSUFBSSxNQUFLLEtBQUksTUFBTTtBQUMzQixpQkFBUSxRQUFRLE9BQU07QUFDckIsZ0JBQU0sS0FBSyxPQUFPLFFBQVEsTUFBSyxLQUFJLE1BQU07QUFBQSxRQUMxQztBQUFBLE1BQ0QsU0FBUyxPQUFQO0FBQ0QsZ0JBQVEsSUFBSSxLQUFLO0FBQUEsTUFDbEI7QUFBQSxJQUVEO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBTSx3QkFBdUI7QUFDNUIsUUFBSSxPQUFPLEtBQUssTUFBTTtBQUN0QixRQUFHLFFBQU0sTUFBSztBQUFDO0FBQUEsSUFBTztBQUN0QixRQUFJLFFBQVEsTUFBTSxLQUFLLE1BQU0sZ0JBQWdCLE1BQUssS0FBSztBQUN2RCxRQUFHLENBQUMsT0FBTTtBQUFDO0FBQUEsSUFBTTtBQUNqQixZQUFRLEtBQUssTUFBTSxZQUFZLE9BQU0sQ0FBQyxTQUFRLEdBQUcsQ0FBQztBQUNsRCxZQUFRLEtBQUssTUFBTSxxQkFBcUIsS0FBSztBQUU3QyxRQUFHLE1BQU0sVUFBUSxHQUFFO0FBQUM7QUFBQSxJQUFPO0FBQzNCLFVBQU0sT0FBTyxNQUFNLEtBQUssTUFBTTtBQUFBLE1BQzdCLENBQUMsU0FBZSxLQUFLLGdCQUFnQixNQUFLLENBQUMsR0FBRSxFQUFFO0FBQUEsTUFDL0M7QUFBQSxJQUNEO0FBRUEsUUFBRyxDQUFDLE1BQUs7QUFBQztBQUFBLElBQU87QUFFakIsUUFBSSxTQUFTO0FBQUEsTUFDWjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxJQUNEO0FBQ0EsUUFBSSxPQUFPLE1BQU0sS0FBSyxNQUFNO0FBQUEsTUFDM0I7QUFBQSxNQUFPO0FBQUEsTUFBTztBQUFBLE1BQU07QUFBQSxJQUNyQjtBQUVBLFFBQUcsQ0FBQyxNQUFLO0FBQUM7QUFBQSxJQUFPO0FBRWpCLFlBQVEsSUFBSSxPQUFPLE1BQU0sSUFBSTtBQUU3QixRQUFHLFNBQU8sdUJBQXNCO0FBQy9CLFlBQU0sS0FBSyxNQUFNLDBCQUEwQixNQUFLLElBQUk7QUFBQSxJQUNyRCxXQUFTLFNBQU8sdUJBQXNCO0FBQ3JDLFlBQU0sS0FBSyxNQUFNLDBCQUEwQixNQUFLLElBQUk7QUFBQSxJQUNyRCxXQUFTLFNBQU8sc0JBQXFCO0FBQ3BDLFlBQU0sS0FBSyxNQUFNLHlCQUF5QixNQUFLLElBQUk7QUFBQSxJQUNwRCxXQUFTLFNBQU8scUJBQW9CO0FBQ25DLFlBQU0sS0FBSyxNQUFNLHdCQUF3QixNQUFLLElBQUk7QUFBQSxJQUNuRCxXQUFTLFNBQU8sdUJBQXNCO0FBQ3JDLFlBQU0sS0FBSyxNQUFNLDBCQUEwQixNQUFLLElBQUk7QUFBQSxJQUNyRCxPQUFLO0FBQ0o7QUFBQSxJQUNEO0FBQUEsRUFFRDtBQUFBLEVBRUEsZ0JBQWdCLE9BQVksUUFBcUIsS0FBVztBQUMzRCxRQUFJLFFBQVEsSUFBSSxNQUFNO0FBQ3RCLFFBQUcsU0FBTyxLQUFLLE1BQU0sY0FBYTtBQUNqQyxZQUFNLEtBQUssY0FBTyxNQUFNLFFBQVE7QUFBQSxJQUNqQyxPQUFLO0FBQ0osWUFBTSxLQUFLLE1BQU0sUUFBUTtBQUFBLElBQzFCO0FBRUEsYUFBUSxTQUFTLFFBQU87QUFDdkIsVUFBRztBQUNGLGNBQU0sS0FBSyxLQUFLLE9BQU8sZ0JBQWdCLE9BQU0sS0FBSyxDQUFDO0FBQUEsTUFDcEQsU0FBTyxPQUFOO0FBQ0EsY0FBTSxLQUFLLEdBQUc7QUFBQSxNQUNmO0FBQUEsSUFDRDtBQUNBLFdBQU8sTUFBTSxLQUFLLEdBQUc7QUFBQSxFQUN0QjtBQUFBLEVBRUEsTUFBTSxvQkFBbUI7QUFFeEIsUUFBSSxPQUFPLEtBQUssTUFBTTtBQUN0QixRQUFJLFFBQVEsTUFBTSxLQUFLLE1BQU0sZ0JBQWdCLE1BQUssS0FBSztBQUV2RCxZQUFRLEtBQUssTUFBTSxZQUFZLE9BQU0sQ0FBQyxTQUFRLEdBQUcsQ0FBQztBQUNsRCxZQUFRLEtBQUssTUFBTSxxQkFBcUIsS0FBSztBQUM3QyxRQUFHLE1BQU0sU0FBTyxHQUFFO0FBQ2pCLFVBQUksT0FBTyxNQUFNLEtBQUssTUFBTTtBQUFBLFFBQzNCLENBQUMsU0FBZSxLQUFLLE1BQU0sZ0JBQWdCLElBQUk7QUFBQSxRQUMvQztBQUFBLE1BQ0Q7QUFDQSxVQUFHLE1BQUs7QUFDUCxjQUFNLEtBQUssTUFBTSxVQUFVLElBQUk7QUFBQSxNQUNoQztBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBRUQ7QUFFQSxJQUFNLGVBQU4sY0FBMkIsa0NBQWlCO0FBQUEsRUFHM0MsWUFBWUMsTUFBVSxRQUF5QjtBQUM5QyxVQUFNQSxNQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDZjtBQUFBLEVBRUEsVUFBZ0I7QUFDZixVQUFNLEVBQUMsWUFBVyxJQUFJO0FBRXRCLGdCQUFZLE1BQU07QUFFbEIsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsb0JBQW9CLEVBQzVCLFFBQVEsNkJBQTZCLEVBQ3JDO0FBQUEsTUFBVSxVQUFRLEtBQ2pCLFNBQVMsS0FBSyxPQUFPLFNBQVMsa0JBQWtCLEVBQ2hELFNBQVMsT0FBTyxVQUFVO0FBQzFCLGFBQUssT0FBTyxTQUFTLHFCQUFxQjtBQUMxQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQy9CLGFBQUssT0FBTyxTQUFTLGNBQWMsS0FBSztBQUFBLE1BQ3pDLENBQUM7QUFBQSxJQUNGO0FBQ0YsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsbUJBQW1CLEVBQzNCLFFBQVEsaUNBQWlDLEVBQ3pDO0FBQUEsTUFBVSxVQUFRLEtBQ2pCLFNBQVMsS0FBSyxPQUFPLFNBQVMsYUFBYSxFQUMzQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixhQUFLLE9BQU8sU0FBUyxnQkFBZ0I7QUFDckMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUMvQixhQUFLLE9BQU8sU0FBUyxjQUFjLEtBQUs7QUFBQSxNQUN6QyxDQUFDO0FBQUEsSUFDRjtBQUdGLFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLFdBQVcsRUFDbkIsUUFBUSwrQkFBK0IsRUFDdkMsUUFBUSxVQUFRLEtBQ2YsU0FBUyxLQUFLLE9BQU8sU0FBUyxTQUFTLEVBQ3ZDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLFdBQUssT0FBTyxTQUFTLFlBQVk7QUFDakMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2hDLENBQUMsQ0FBQztBQUVKLFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLFdBQVcsRUFDbkIsUUFBUSwrQkFBK0IsRUFDdkMsUUFBUSxVQUFRLEtBQ2YsU0FBUyxLQUFLLE9BQU8sU0FBUyxTQUFTLEVBQ3ZDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLFdBQUssT0FBTyxTQUFTLFlBQVk7QUFDakMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2hDLENBQUMsQ0FBQztBQUdKLFFBQUkseUJBQVEsV0FBVyxFQUNwQixRQUFRLGlCQUFpQixFQUN6QixRQUFRLHVDQUF1QyxFQUMvQztBQUFBLE1BQVUsVUFBUSxLQUNqQixTQUFTLEtBQUssT0FBTyxTQUFTLGVBQWUsRUFDN0MsU0FBUyxPQUFPLFVBQVU7QUFDMUIsYUFBSyxPQUFPLFNBQVMsa0JBQWtCO0FBQ3ZDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxDQUFDO0FBQUEsSUFDRjtBQUNGLFFBQUkseUJBQVEsV0FBVyxFQUNwQixRQUFRLGNBQWMsRUFDdEIsUUFBUSxvQ0FBb0MsRUFDNUM7QUFBQSxNQUFVLFVBQVEsS0FDakIsU0FBUyxLQUFLLE9BQU8sU0FBUyxZQUFZLEVBQzFDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLGFBQUssT0FBTyxTQUFTLGVBQWU7QUFDcEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2hDLENBQUM7QUFBQSxJQUNGO0FBQUEsRUFDSDtBQUNEOyIsCiAgIm5hbWVzIjogWyJhcHAiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJmIiwgImltcG9ydF9vYnNpZGlhbiIsICJhIiwgInpoIiwgImFwcCJdCn0K
